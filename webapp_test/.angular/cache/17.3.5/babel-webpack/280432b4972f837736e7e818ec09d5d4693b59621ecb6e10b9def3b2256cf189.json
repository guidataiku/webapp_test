{"ast":null,"code":"import { FormArray, FormControl, FormGroup } from '@angular/forms';\nimport { environment } from '@environment';\nimport { SelectionTableComponent } from '../selection-table/selection-table.component';\nimport { SelectionDateRangeComponent } from '../selection-date-range/selection-date-range.component';\nimport * as _ from 'lodash';\nimport { SelectionTreeTableComponent } from '../selection-tree-table/selection-tree-table.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@rds/angular-components\";\nfunction ParameterDashboardFormComponent_For_4_For_3_Conditional_0_Conditional_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"rds-control-label\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", item_r1.labelBefore, \":\");\n  }\n}\nfunction ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_3_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"rds-icon\", 11);\n  }\n  if (rf & 2) {\n    const button_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"icon\", button_r3.icon);\n  }\n}\nfunction ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_3_Template_button_click_0_listener() {\n      const button_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const item_r1 = i0.ɵɵnextContext(2).$implicit;\n      const stepIndex_r4 = i0.ɵɵnextContext().$index;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.openModal(stepIndex_r4, item_r1.id, button_r3.id));\n    });\n    i0.ɵɵtemplate(1, ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_3_Conditional_1_Template, 1, 1, \"rds-icon\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const button_r3 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(1, button_r3.icon ? 1 : -1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", button_r3.label, \" \");\n  }\n}\nfunction ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"rds-chip-selectable\", 12);\n    i0.ɵɵlistener(\"closeChip\", function ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_6_Template_rds_chip_selectable_closeChip_0_listener() {\n      const chipIndex_r7 = i0.ɵɵrestoreView(_r6).$index;\n      const item_r1 = i0.ɵɵnextContext(2).$implicit;\n      const stepIndex_r4 = i0.ɵɵnextContext().$index;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onRemoveFromArray(stepIndex_r4, item_r1.id, chipIndex_r7));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const chip_r8 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(chip_r8.value);\n  }\n}\nfunction ParameterDashboardFormComponent_For_4_For_3_Conditional_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ParameterDashboardFormComponent_For_4_For_3_Conditional_0_Conditional_0_Template, 2, 1, \"rds-control-label\");\n    i0.ɵɵelementStart(1, \"div\", 7);\n    i0.ɵɵrepeaterCreate(2, ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_3_Template, 3, 2, \"button\", 8, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"rds-chip-list\");\n    i0.ɵɵrepeaterCreate(5, ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_6_Template, 2, 1, \"rds-chip-selectable\", 9, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext().$implicit;\n    const stepIndex_r4 = i0.ɵɵnextContext().$index;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵconditional(0, item_r1.labelBefore ? 0 : -1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵrepeater(item_r1.selectBy);\n    i0.ɵɵadvance(3);\n    i0.ɵɵrepeater(ctx_r4.getFormArrayControls(stepIndex_r4, item_r1.id));\n  }\n}\nfunction ParameterDashboardFormComponent_For_4_For_3_Conditional_1_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"rds-control-label\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", item_r1.labelBefore, \":\");\n  }\n}\nfunction ParameterDashboardFormComponent_For_4_For_3_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"rds-form-field\");\n    i0.ɵɵtemplate(1, ParameterDashboardFormComponent_For_4_For_3_Conditional_1_Conditional_1_Template, 2, 1, \"rds-control-label\");\n    i0.ɵɵelementStart(2, \"rds-select\", 13)(3, \"rds-select-option\", 14);\n    i0.ɵɵtext(4, \"Avastin\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext().$implicit;\n    const stepIndex_r4 = i0.ɵɵnextContext().$index;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(1, item_r1.labelBefore ? 1 : -1);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"formControl\", ctx_r4.getItemControl(stepIndex_r4, item_r1.id));\n  }\n}\nfunction ParameterDashboardFormComponent_For_4_For_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ParameterDashboardFormComponent_For_4_For_3_Conditional_0_Template, 7, 1)(1, ParameterDashboardFormComponent_For_4_For_3_Conditional_1_Template, 5, 2);\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵconditional(0, item_r1.type === \"SelectBy\" ? 0 : item_r1.type === \"Dropdown\" ? 1 : -1);\n  }\n}\nfunction ParameterDashboardFormComponent_For_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"rds-step\", 3)(1, \"form\", 5);\n    i0.ɵɵrepeaterCreate(2, ParameterDashboardFormComponent_For_4_For_3_Template, 2, 1, null, null, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\")(5, \"button\", 6);\n    i0.ɵɵtext(6, \"Next\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const step_r9 = ctx.$implicit;\n    const stepIndex_r4 = ctx.$index;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"label\", step_r9.stepname);\n    i0.ɵɵproperty(\"stepControl\", ctx_r4.getStepControl(stepIndex_r4))(\"state\", \"false\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"formGroup\", ctx_r4.getStepControl(stepIndex_r4));\n    i0.ɵɵadvance();\n    i0.ɵɵrepeater(step_r9.items);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r4.isStepDisabled(step_r9));\n  }\n}\nexport class ParameterDashboardFormComponent {\n  constructor(route, dialogService) {\n    this.route = route;\n    this.dialogService = dialogService;\n    const type = this.route.snapshot.paramMap.get('type');\n    this.definition = environment.forms.hasOwnProperty(type) ? environment.forms[type] : [];\n    this.form = this.definition.reduce((form, step, stepIndex) => {\n      const stepFormGroup = step.items.reduce((stepForm, item) => {\n        stepForm.addControl(item.id, item.multiselect === true ? new FormArray([]) : new FormControl(null));\n        return stepForm;\n      }, new FormGroup({}));\n      form.addControl(this.getStepId(stepIndex), stepFormGroup);\n      return form;\n    }, new FormGroup({}));\n  }\n  openModal(stepIndex, itemId, modalType) {\n    console.log('asd');\n    if (modalType === 'byDate') {\n      this.dialog = this.dialogService.open(SelectionDateRangeComponent, {\n        data: {\n          params: this.getParamsByKeys(['product']),\n          endpoint: 'api/products/${product}/batches'\n        }\n      });\n    } else {\n      const tableDefinition = this.getTableDefinition(modalType);\n      const component = tableDefinition.type === 'selection-table' ? SelectionTableComponent : SelectionTreeTableComponent;\n      if (tableDefinition) {\n        this.dialog = this.dialogService.open(component, {\n          data: {\n            type: modalType,\n            params: this.getParamsByKeys(tableDefinition.params),\n            ...tableDefinition\n          }\n        });\n      }\n    }\n    this.dialog.afterClosed().subscribe(val => {\n      if (val !== undefined) {\n        this.addValues(stepIndex, itemId, val);\n      }\n    });\n  }\n  addValues(stepIndex, itemId, values) {\n    const formControls = values.map(value => new FormControl(value));\n    this.form.get(this.getStepId(stepIndex)).setControl(itemId, new FormArray(formControls));\n  }\n  getTableDefinition(modalType) {\n    if (environment.selectionTables.hasOwnProperty(modalType)) {\n      return environment.selectionTables[modalType];\n    }\n    return null;\n  }\n  getStepId(index) {\n    return `step-${index}`;\n  }\n  getStepControl(index) {\n    return this.form.controls[this.getStepId(index)];\n  }\n  getFormArrayControls(index, itemId) {\n    return this.getStepControl(index).get(itemId).controls;\n  }\n  getItemControl(index, itemId) {\n    return this.getStepControl(index).get(itemId);\n  }\n  getFormValues() {\n    return Object.keys(this.form.value).reduce((acc, key) => {\n      return {\n        ...acc,\n        ...this.form.value[key]\n      };\n    }, {});\n  }\n  getParamsByKeys(keys) {\n    const formValues = this.getFormValues();\n    return _.reduce(keys, (acc, key) => {\n      acc[key] = formValues[key];\n      return acc;\n    }, {});\n  }\n  isStepDisabled(step) {\n    const formValues = this.getFormValues();\n    return _.some(step.items, item => {\n      const id = item.id;\n      if (item.multiselect) {\n        return formValues[id].length === 0;\n      }\n      return formValues[id] === null;\n    });\n  }\n  onRemoveFromArray(stepIndex, itemId, index) {\n    this.form.get(this.getStepId(stepIndex)).get(itemId).removeAt(index);\n  }\n  static #_ = this.ɵfac = function ParameterDashboardFormComponent_Factory(t) {\n    return new (t || ParameterDashboardFormComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.RdsDialogService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ParameterDashboardFormComponent,\n    selectors: [[\"app-parameter-dashboard-form\"]],\n    decls: 9,\n    vars: 4,\n    consts: [[\"stepper\", \"\"], [3, \"formGroup\"], [\"orientation\", \"vertical\"], [3, \"label\", \"stepControl\", \"state\"], [\"label\", \"View Analysis\"], [1, \"mt-10\", 3, \"formGroup\"], [\"rds-primary-button\", \"\", \"rdsStepperNext\", \"\", 3, \"disabled\"], [1, \"button\", \"select-by-wrapper\"], [\"rds-secondary-button\", \"\"], [\"closable\", \"\"], [\"rds-secondary-button\", \"\", 3, \"click\"], [\"namespace\", \"filled\", 3, \"icon\"], [\"closable\", \"\", 3, \"closeChip\"], [3, \"formControl\"], [\"value\", \"avastin\"]],\n    template: function ParameterDashboardFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 1)(1, \"rds-stepper\", 2, 0);\n        i0.ɵɵrepeaterCreate(3, ParameterDashboardFormComponent_For_4_Template, 7, 5, \"rds-step\", 3, i0.ɵɵrepeaterTrackByIdentity);\n        i0.ɵɵelement(5, \"rds-step\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"pre\");\n        i0.ɵɵtext(7);\n        i0.ɵɵpipe(8, \"json\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(3);\n        i0.ɵɵrepeater(ctx.definition);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 2, ctx.form.value));\n      }\n    },\n    styles: [\"[_nghost-%COMP%]   .select-by-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]    + button[_ngcontent-%COMP%] {\\n  margin-left: 10px;\\n}\\n[_nghost-%COMP%]   .select-by-wrapper[_ngcontent-%COMP%]    + rds-chip-list[_ngcontent-%COMP%] {\\n  margin: 10px 0 15px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9wYXJhbWV0ZXItZGFzaGJvYXJkLWZvcm0vcGFyYW1ldGVyLWRhc2hib2FyZC1mb3JtLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVRO0VBQ0ksaUJBQUE7QUFEWjtBQUlJO0VBQ0ksbUJBQUE7QUFGUiIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgICAuc2VsZWN0LWJ5LXdyYXBwZXIge1xuICAgICAgICBidXR0b24gKyBidXR0b24ge1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgICAgIH1cbiAgICB9IFxuICAgIC5zZWxlY3QtYnktd3JhcHBlciArIHJkcy1jaGlwLWxpc3Qge1xuICAgICAgICBtYXJnaW46IDEwcHggMCAxNXB4O1xuICAgIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["FormArray","FormControl","FormGroup","environment","SelectionTableComponent","SelectionDateRangeComponent","_","SelectionTreeTableComponent","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","item_r1","labelBefore","ɵɵelement","ɵɵproperty","button_r3","icon","ɵɵlistener","ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_3_Template_button_click_0_listener","ɵɵrestoreView","_r2","$implicit","ɵɵnextContext","stepIndex_r4","$index","ctx_r4","ɵɵresetView","openModal","id","ɵɵtemplate","ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_3_Conditional_1_Template","ɵɵconditional","label","ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_6_Template_rds_chip_selectable_closeChip_0_listener","chipIndex_r7","_r6","onRemoveFromArray","ɵɵtextInterpolate","chip_r8","value","ParameterDashboardFormComponent_For_4_For_3_Conditional_0_Conditional_0_Template","ɵɵrepeaterCreate","ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_3_Template","ɵɵrepeaterTrackByIdentity","ParameterDashboardFormComponent_For_4_For_3_Conditional_0_For_6_Template","ɵɵrepeater","selectBy","getFormArrayControls","ParameterDashboardFormComponent_For_4_For_3_Conditional_1_Conditional_1_Template","getItemControl","ParameterDashboardFormComponent_For_4_For_3_Conditional_0_Template","ParameterDashboardFormComponent_For_4_For_3_Conditional_1_Template","type","ParameterDashboardFormComponent_For_4_For_3_Template","ɵɵpropertyInterpolate","step_r9","stepname","getStepControl","items","isStepDisabled","ParameterDashboardFormComponent","constructor","route","dialogService","snapshot","paramMap","get","definition","forms","hasOwnProperty","form","reduce","step","stepIndex","stepFormGroup","stepForm","item","addControl","multiselect","getStepId","itemId","modalType","console","log","dialog","open","data","params","getParamsByKeys","endpoint","tableDefinition","getTableDefinition","component","afterClosed","subscribe","val","undefined","addValues","values","formControls","map","setControl","selectionTables","index","controls","getFormValues","Object","keys","acc","key","formValues","some","length","removeAt","ɵɵdirectiveInject","i1","ActivatedRoute","i2","RdsDialogService","_2","selectors","decls","vars","consts","template","ParameterDashboardFormComponent_Template","rf","ctx","ParameterDashboardFormComponent_For_4_Template","ɵɵpipeBind1"],"sources":["/home/dataiku/workspace/project-lib-versioned/webapp_test/frontend_copy/src/app/components/parameter-dashboard-form/parameter-dashboard-form.component.ts","/home/dataiku/workspace/project-lib-versioned/webapp_test/frontend_copy/src/app/components/parameter-dashboard-form/parameter-dashboard-form.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { AbstractControl, FormArray, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { environment } from '@environment';\nimport { RdsDialogRef, RdsDialogService } from '@rds/angular-components';\nimport { SelectionTableComponent } from '../selection-table/selection-table.component';\nimport { IParameterDashboard, IParameterDashboardItem, IParameterDashboardStep } from '../../../types/parameter-dashboard-form';\nimport { SelectionDateRangeComponent } from '../selection-date-range/selection-date-range.component';\nimport * as _ from 'lodash';\nimport { throws } from 'assert';\nimport { SelectionTreeTableComponent } from '../selection-tree-table/selection-tree-table.component';\n\n@Component({\n  selector: 'app-parameter-dashboard-form',\n  templateUrl: './parameter-dashboard-form.component.html',\n  styleUrl: './parameter-dashboard-form.component.scss'\n})\nexport class ParameterDashboardFormComponent {\n\n  public definition!: IParameterDashboardStep[];\n\n  public form!: FormGroup;\n\n  private dialog!: RdsDialogRef<any>;\n\n  constructor(private route: ActivatedRoute, private dialogService: RdsDialogService) {\n    const type: 'stability' | 'univariety' | 'bivariate' = this.route.snapshot.paramMap.get('type') as 'stability' | 'univariety' | 'bivariate';\n    this.definition = environment.forms.hasOwnProperty(type) ? environment.forms[type] as IParameterDashboardStep[] : [];\n    this.form = (this.definition).reduce((form: FormGroup, step: IParameterDashboardStep, stepIndex: number) => {\n        const stepFormGroup = step.items.reduce((stepForm: FormGroup, item: IParameterDashboardItem) => {\n          stepForm.addControl(item.id, item.multiselect === true ? new FormArray([]) : new FormControl(null));\n          return stepForm;\n        }, new FormGroup({}));\n        form.addControl(this.getStepId(stepIndex), stepFormGroup);\n        return form;\n    }, new FormGroup({}));\n  }\n\n  public openModal(stepIndex: number, itemId: string, modalType: string): void {\n    console.log('asd')\n    if (modalType === 'byDate') {\n      this.dialog = this.dialogService.open(SelectionDateRangeComponent, {\n        data: {\n          params: this.getParamsByKeys(['product']),\n          endpoint: 'api/products/${product}/batches'\n        }\n      });\n    } else {\n      const tableDefinition: any | null = this.getTableDefinition(modalType);\n      const component: any = tableDefinition.type === 'selection-table' ? SelectionTableComponent : SelectionTreeTableComponent;\n      if (tableDefinition) {\n        this.dialog = this.dialogService.open(component, {\n          data: {\n            type: modalType,\n            params: this.getParamsByKeys(tableDefinition.params),\n            ...tableDefinition\n          }\n        });\n\n      }\n    }\n    this.dialog.afterClosed().subscribe((val: string[] | undefined) => {\n      if (val !== undefined) {\n        this.addValues(stepIndex, itemId, val);\n      }\n    });\n  }\n\n  private addValues(stepIndex: number, itemId: string, values: string[]): void {\n    const formControls: FormControl[] = values.map((value: string) => new FormControl(value));\n    (this.form.get(this.getStepId(stepIndex)) as FormGroup).setControl(itemId, new FormArray(formControls));\n  }\n\n  private getTableDefinition(modalType: string): any | null {\n    if (environment.selectionTables.hasOwnProperty(modalType)) {\n      return (environment.selectionTables as {[type: string]: any})[modalType];\n    }\n    return null;\n  }\n\n  private getStepId(index: number): string {\n    return `step-${index}`;\n  }\n\n  public getStepControl(index: number): FormGroup {\n    return this.form.controls[this.getStepId(index)] as FormGroup;\n  }\n\n  public getFormArrayControls(index: number, itemId: string): AbstractControl[] {\n    return (this.getStepControl(index).get(itemId) as FormArray).controls;\n  }\n\n  public getItemControl(index: number, itemId: string): FormControl {\n    return this.getStepControl(index).get(itemId) as FormControl;\n  }\n\n  private getFormValues(): any {\n    return Object.keys(this.form.value).reduce((acc: any, key: string) => {\n      return {\n        ...acc,\n        ...this.form.value[key]\n      };\n    }, {});\n  }\n\n  private getParamsByKeys(keys: string[]): any {\n    const formValues = this.getFormValues();\n    return _.reduce(keys, (acc: any, key: string) => {\n      acc[key] = formValues[key];\n      return acc;\n    }, {});\n  }\n\n  public isStepDisabled(step: IParameterDashboardStep): boolean {\n    const formValues: any = this.getFormValues();\n    return _.some(step.items, (item: IParameterDashboardItem) => {\n      const id = item.id;\n      if (item.multiselect) {\n        return formValues[id].length === 0;\n      }\n      return formValues[id] === null;\n    });\n  }\n\n  public onRemoveFromArray(stepIndex: number, itemId: string, index: number): void {\n    ((this.form.get(this.getStepId(stepIndex)) as FormGroup).get(itemId) as FormArray).removeAt(index);\n  }\n}","<div [formGroup]=\"form\"><rds-stepper #stepper orientation=\"vertical\">\n    @for (step of definition; track step; let stepIndex = $index;) {\n        <rds-step label=\"{{ step.stepname }}\" [stepControl]=\"getStepControl(stepIndex)\" [state]=\"'false'\">\n            <form [formGroup]=\"getStepControl(stepIndex)\" class=\"mt-10\">\n                @for (item of step.items; track item) {\n                    @if (item.type === 'SelectBy') {\n                        @if (item.labelBefore) {\n                            <rds-control-label>{{ item.labelBefore }}:</rds-control-label>\n                        }\n                        <div class=\"button select-by-wrapper\">\n                            @for (button of item.selectBy; track button) {\n                                <button rds-secondary-button (click)=\"openModal(stepIndex, item.id, button.id)\">\n                                    @if (button.icon) {\n                                        <rds-icon [icon]=\"button.icon\" namespace=\"filled\"></rds-icon>\n                                    }\n                                    {{ button.label }}\n                                </button>\n                            }\n                        </div>\n                        <rds-chip-list>\n                            @for (chip of this.getFormArrayControls(stepIndex, item.id); track chip; let chipIndex = $index;) {\n                                <rds-chip-selectable\n                                    closable\n                                    (closeChip)=\"onRemoveFromArray(stepIndex, item.id, chipIndex)\"\n                                    >{{ chip.value }}</rds-chip-selectable>\n                            }\n                        </rds-chip-list>\n                    } @else if(item.type === 'Dropdown') {\n                        <rds-form-field>\n                            @if (item.labelBefore) {\n                                <rds-control-label>{{ item.labelBefore }}:</rds-control-label>\n                            }\n                            <rds-select [formControl]=\"getItemControl(stepIndex, item.id)\">\n                                <rds-select-option value=\"avastin\">Avastin</rds-select-option>\n                            </rds-select>\n                        </rds-form-field>\n\n                    }\n                }\n            </form>\n            <div>\n                <button rds-primary-button rdsStepperNext [disabled]=\"isStepDisabled(step)\">Next</button>\n            </div>\n        </rds-step>\n    }\n    <rds-step label=\"View Analysis\">\n\n    </rds-step>\n</rds-stepper>\n<pre>{{ form.value | json }}</pre>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}