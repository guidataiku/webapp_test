import { booleanAttribute, ChangeDetectionStrategy, Component, ElementRef, EventEmitter, HostBinding, inject, Input, NgZone, Output, ViewEncapsulation, } from '@angular/core';
import { take } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
/* eslint-disable-next-line @typescript-eslint/no-explicit-any */
export class RdsCalendarCell {
    constructor(value, displayValue, ariaLabel, enabled, cssClasses = {}, rawValue, compareValue = value) {
        this.value = value;
        this.displayValue = displayValue;
        this.ariaLabel = ariaLabel;
        this.enabled = enabled;
        this.cssClasses = cssClasses;
        this.rawValue = rawValue;
        this.compareValue = compareValue;
    }
}
export class RdsCalendarBodyComponent {
    constructor() {
        this.elementRef = inject(ElementRef);
        this.ngZone = inject(NgZone);
        this._skipNextFocus = null;
        this.class = 'rds-calendar-body';
        this.role = 'grid';
        this.ariaReadonly = 'true';
        this.label = null;
        this.rows = null;
        this.todayValue = null;
        this.startValue = null;
        this.endValue = null;
        this.labelMinRequiredCells = null;
        this.numCols = 7;
        this.activeCell = null;
        this.isRange = false;
        this.cellAspectRatio = 1;
        this.comparisonStart = null;
        this.comparisonEnd = null;
        this.previewStart = null;
        this.previewEnd = null;
        this.selectedValueChange = new EventEmitter();
        this.previewChange = new EventEmitter();
        this._firstRowOffset = null;
        this._cellPadding = null;
        this._cellWidth = null;
        this._enterHandler = (event) => {
            if (this._skipNextFocus && event.type === 'focus') {
                this._skipNextFocus = false;
                return;
            }
            if (event.target && this.isRange) {
                const cell = this._getCellFromElement(event.target);
                if (cell) {
                    this.ngZone.run(() => this.previewChange.emit({ value: cell.enabled ? cell : null, event }));
                }
            }
        };
        this._leaveHandler = (event) => {
            if (this.previewEnd !== null && this.isRange) {
                if (event.target && isTableCell(event.target)) {
                    this.ngZone.run(() => this.previewChange.emit({ value: null, event }));
                }
            }
        };
        this.ngZone.runOutsideAngular(() => {
            const element = this.elementRef.nativeElement;
            element.addEventListener('mouseenter', this._enterHandler, true);
            element.addEventListener('focus', this._enterHandler, true);
            element.addEventListener('mouseleave', this._leaveHandler, true);
            element.addEventListener('blur', this._leaveHandler, true);
        });
    }
    _cellClicked(cell, event) {
        if (cell.enabled) {
            this.selectedValueChange.emit({ value: cell, event });
        }
    }
    _isSelected(value) {
        return this.startValue === value || this.endValue === value;
    }
    ngOnChanges(changes) {
        const columnChanges = changes['numCols'];
        const { rows, numCols } = this;
        if (changes['rows'] || columnChanges) {
            this._firstRowOffset =
                rows && rows.length && rows[0].length ? numCols - rows[0].length : 0;
        }
        if (changes['cellAspectRatio'] || columnChanges || !this._cellPadding) {
            this._cellPadding = `${(50 * this.cellAspectRatio) / numCols}%`;
        }
        if (columnChanges || !this._cellWidth) {
            this._cellWidth = `${100 / numCols}%`;
        }
    }
    ngOnDestroy() {
        const element = this.elementRef.nativeElement;
        element.removeEventListener('mouseenter', this._enterHandler, true);
        element.removeEventListener('focus', this._enterHandler, true);
        element.removeEventListener('mouseleave', this._leaveHandler, true);
        element.removeEventListener('blur', this._leaveHandler, true);
    }
    _isActiveCell(item) {
        return this.activeCell === item;
    }
    _focusActiveCell(movePreview = true) {
        this.ngZone.runOutsideAngular(() => {
            this.ngZone.onStable.pipe(take(1)).subscribe(() => {
                const activeCell = this.elementRef.nativeElement.querySelector('.rds-calendar-body-active');
                if (activeCell) {
                    if (!movePreview) {
                        this._skipNextFocus = true;
                    }
                    activeCell.focus();
                }
            });
        });
    }
    _isRangeStart(value) {
        return isStart(value, this.startValue, this.endValue);
    }
    _isRangeEnd(value) {
        return isEnd(value, this.startValue, this.endValue);
    }
    _isInRange(value) {
        return isInRange(value, this.startValue, this.endValue, this.isRange);
    }
    _isComparisonStart(value) {
        return isStart(value, this.comparisonStart, this.comparisonEnd);
    }
    _isComparisonBridgeStart(value, rowIndex, colIndex) {
        if (!this._isComparisonStart(value) ||
            this._isRangeStart(value) ||
            !this._isInRange(value)) {
            return false;
        }
        let previousCell = this.rows
            ? this.rows[rowIndex][colIndex - 1]
            : null;
        if (!previousCell && this.rows) {
            const previousRow = this.rows[rowIndex - 1];
            previousCell = previousRow && previousRow[previousRow.length - 1];
        }
        return previousCell ? !this._isRangeEnd(previousCell.compareValue) : false;
    }
    _isComparisonBridgeEnd(value, rowIndex, colIndex) {
        if (!this._isComparisonEnd(value) ||
            this._isRangeEnd(value) ||
            !this._isInRange(value)) {
            return false;
        }
        let nextCell = this.rows
            ? this.rows[rowIndex][colIndex + 1]
            : null;
        if (!nextCell && this.rows) {
            const nextRow = this.rows[rowIndex + 1];
            nextCell = nextRow && nextRow[0];
        }
        return nextCell ? !this._isRangeStart(nextCell.compareValue) : false;
    }
    _isComparisonEnd(value) {
        return isEnd(value, this.comparisonStart, this.comparisonEnd);
    }
    _isInComparisonRange(value) {
        return isInRange(value, this.comparisonStart, this.comparisonEnd, this.isRange);
    }
    _isComparisonIdentical(value) {
        return (this.comparisonStart === this.comparisonEnd &&
            value === this.comparisonStart);
    }
    _isPreviewStart(value) {
        return isStart(value, this.previewStart, this.previewEnd);
    }
    _isPreviewEnd(value) {
        return isEnd(value, this.previewStart, this.previewEnd);
    }
    _isInPreview(value) {
        return isInRange(value, this.previewStart, this.previewEnd, this.isRange);
    }
    _getCellFromElement(element) {
        let cell;
        if (isTableCell(element)) {
            cell = element;
        }
        else if (isTableCell(element.parentNode)) {
            cell = element.parentNode;
        }
        if (cell) {
            const row = cell.getAttribute('data-rds-row');
            const col = cell.getAttribute('data-rds-col');
            if (row && col && this.rows) {
                return this.rows[parseInt(row)][parseInt(col)];
            }
        }
        return null;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsCalendarBodyComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.1", type: RdsCalendarBodyComponent, selector: "[rdsCalendarBody], [rds-calendar-body]", inputs: { label: "label", rows: "rows", todayValue: "todayValue", startValue: "startValue", endValue: "endValue", labelMinRequiredCells: "labelMinRequiredCells", numCols: "numCols", activeCell: "activeCell", isRange: ["isRange", "isRange", booleanAttribute], cellAspectRatio: "cellAspectRatio", comparisonStart: "comparisonStart", comparisonEnd: "comparisonEnd", previewStart: "previewStart", previewEnd: "previewEnd" }, outputs: { selectedValueChange: "selectedValueChange", previewChange: "previewChange" }, host: { properties: { "class": "this.class", "attr.role": "this.role", "attr.aria-readonly": "this.ariaReadonly" } }, exportAs: ["rdsCalendarBody"], usesOnChanges: true, ngImport: i0, template: "@for (row of rows; track row; let rowIndex = $index) {\n  <tr role=\"row\">\n    @if (rowIndex === 0 && _firstRowOffset) {\n      <td\n        aria-hidden=\"true\"\n        class=\"rds-calendar-body-label\"\n        [attr.colspan]=\"_firstRowOffset\"\n        [style.paddingTop]=\"_cellPadding\"\n        [style.paddingBottom]=\"_cellPadding\"\n      ></td>\n    }\n    @for (item of row; track item; let colIndex = $index) {\n      <td\n        role=\"gridcell\"\n        class=\"rds-calendar-body-cell\"\n        [ngClass]=\"item.cssClasses\"\n        [tabindex]=\"_isActiveCell(item) ? 0 : -1\"\n        [attr.data-rds-row]=\"rowIndex\"\n        [attr.data-rds-col]=\"colIndex\"\n        [class.rds-calendar-body-disabled]=\"!item.enabled\"\n        [class.rds-calendar-body-active]=\"_isActiveCell(item)\"\n        [class.rds-calendar-body-range-start]=\"_isRangeStart(item.compareValue)\"\n        [class.rds-calendar-body-range-end]=\"_isRangeEnd(item.compareValue)\"\n        [class.rds-calendar-body-in-range]=\"_isInRange(item.compareValue)\"\n        [class.rds-calendar-body-comparison-bridge-start]=\"\n          _isComparisonBridgeStart(item.compareValue, rowIndex, colIndex)\n        \"\n        [class.rds-calendar-body-comparison-bridge-end]=\"\n          _isComparisonBridgeEnd(item.compareValue, rowIndex, colIndex)\n        \"\n        [class.rds-calendar-body-comparison-start]=\"\n          _isComparisonStart(item.compareValue)\n        \"\n        [class.rds-calendar-body-comparison-end]=\"\n          _isComparisonEnd(item.compareValue)\n        \"\n        [class.rds-calendar-body-in-comparison-range]=\"\n          _isInComparisonRange(item.compareValue)\n        \"\n        [class.rds-calendar-body-preview-start]=\"\n          _isPreviewStart(item.compareValue)\n        \"\n        [class.rds-calendar-body-preview-end]=\"_isPreviewEnd(item.compareValue)\"\n        [class.rds-calendar-body-in-preview]=\"_isInPreview(item.compareValue)\"\n        [attr.aria-label]=\"item.ariaLabel\"\n        [attr.aria-disabled]=\"!item.enabled || null\"\n        [attr.aria-selected]=\"_isSelected(item.compareValue)\"\n        (click)=\"_cellClicked(item, $event)\"\n        [style.paddingTop]=\"_cellPadding\"\n        [style.paddingBottom]=\"_cellPadding\"\n      >\n        <div\n          class=\"rds-calendar-body-cell-content rds-focus-indicator\"\n          [class.rds-calendar-body-cell-content-disabled]=\"!item.enabled\"\n          [class.rds-calendar-body-selected]=\"_isSelected(item.compareValue)\"\n          [class.rds-calendar-body-comparison-identical]=\"\n            _isComparisonIdentical(item.compareValue)\n          \"\n          [class.rds-calendar-body-today]=\"todayValue === item.compareValue\"\n        >\n          {{ item.displayValue }}\n        </div>\n        <div class=\"rds-calendar-body-cell-preview\"></div>\n      </td>\n    }\n  </tr>\n}\n", styles: [".rds-calendar-body{min-width:280px}.rds-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.rds-calendar-body-cell{position:relative;height:40px;width:40px;line-height:0;text-align:center;outline:none;cursor:pointer;margin-top:4px}.rds-calendar-body-cell:before,.rds-calendar-body-cell:after,.rds-calendar-body-cell-preview{content:\"\";position:absolute;top:4px;left:0;z-index:0;box-sizing:border-box;height:100%;width:100%}.rds-calendar-body-range-start:not(.rds-calendar-body-in-comparison-range):before,.rds-calendar-body-range-start:after,.rds-calendar-body-comparison-start:not(.rds-calendar-body-comparison-bridge-start):before,.rds-calendar-body-comparison-start:after,.rds-calendar-body-preview-start .rds-calendar-body-cell-preview{left:0;width:100%;border-top-left-radius:2px;border-bottom-left-radius:2px}[dir=rtl] .rds-calendar-body-range-start:not(.rds-calendar-body-in-comparison-range):before,[dir=rtl] .rds-calendar-body-range-start:after,[dir=rtl] .rds-calendar-body-comparison-start:not(.rds-calendar-body-comparison-bridge-start):before,[dir=rtl] .rds-calendar-body-comparison-start:after,[dir=rtl] .rds-calendar-body-preview-start .rds-calendar-body-cell-preview{left:0;border-radius:0 2px 2px 0}.rds-calendar-body-range-end:not(.rds-calendar-body-in-comparison-range):before,.rds-calendar-body-range-end:after,.rds-calendar-body-comparison-end:not(.rds-calendar-body-comparison-bridge-end):before,.rds-calendar-body-comparison-end:after,.rds-calendar-body-preview-end .rds-calendar-body-cell-preview{width:100%;border-top-right-radius:2px;border-bottom-right-radius:2px}[dir=rtl] .rds-calendar-body-range-end:not(.rds-calendar-body-in-comparison-range):before,[dir=rtl] .rds-calendar-body-range-end:after,[dir=rtl] .rds-calendar-body-comparison-end:not(.rds-calendar-body-comparison-bridge-end):before,[dir=rtl] .rds-calendar-body-comparison-end:after,[dir=rtl] .rds-calendar-body-preview-end .rds-calendar-body-cell-preview{left:0;border-radius:2px 0 0 2px}[dir=rtl] .rds-calendar-body-comparison-bridge-start.rds-calendar-body-range-end:after,[dir=rtl] .rds-calendar-body-comparison-bridge-end.rds-calendar-body-range-start:after{width:100%;border-top-right-radius:2px;border-bottom-right-radius:2px}.rds-calendar-body-comparison-start.rds-calendar-body-range-end:after,[dir=rtl] .rds-calendar-body-comparison-start.rds-calendar-body-range-end:after,.rds-calendar-body-comparison-end.rds-calendar-body-range-start:after,[dir=rtl] .rds-calendar-body-comparison-end.rds-calendar-body-range-start:after{width:100%}.rds-calendar-body-cell.rds-calendar-body-in-preview .rds-calendar-body-cell-preview,.rds-calendar-body-cell.rds-calendar-body-preview-start .rds-calendar-body-cell-preview,.rds-calendar-body-cell.rds-calendar-body-preview-end .rds-calendar-body-cell-preview{background:var(--rds-color-datepicker-item-bg-hover)}.rds-calendar-body-cell.rds-calendar-body-in-preview .rds-calendar-body-cell-content:not(.rds-calendar-body-selected),.rds-calendar-body-cell.rds-calendar-body-preview-start .rds-calendar-body-cell-content:not(.rds-calendar-body-selected),.rds-calendar-body-cell.rds-calendar-body-preview-end .rds-calendar-body-cell-content:not(.rds-calendar-body-selected){color:var(--rds-color-on-light-surface)}.rds-calendar-body-disabled{cursor:default}.rds-calendar-body-cell-content{font-size:18px;font-weight:200;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;top:4px;left:0;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%;color:var(--rds-color-high-contrast);line-height:1;border-color:transparent;border-width:2px;border-style:solid;border-radius:2px}.rds-calendar-body-cell-content.rds-focus-indicator{position:absolute}.rds-calendar-body-cell-content:hover:not(.rds-calendar-body-selected,.rds-calendar-body-cell-content-disabled){background:var(--rds-color-datepicker-item-bg-hover);border-color:var(--rds-color-datepicker-item-bg-hover);color:var(--rds-color-on-light-surface)}.rds-calendar-body-cell-content.rds-calendar-body-today:not(.rds-calendar-body-selected),.rds-calendar-body-cell-content:hover.rds-calendar-body-today:not(.rds-calendar-body-selected,.rds-calendar-body-cell-content-disabled){border:1px solid var(--rds-color-stroke-enabled)}.rds-calendar-body-cell-content.rds-calendar-body-selected{color:var(--rds-color-on-dark-surface);background:var(--rds-color-bg-informative);border-width:0}.rds-calendar-body-cell-content.rds-calendar-body-cell-content-disabled{color:var(--rds-color-disabled)}.rds-calendar-body-cell-prev-month .rds-calendar-body-cell-content,.rds-calendar-body-cell-next-month .rds-calendar-body-cell-content{color:var(--rds-color-low-contrast)}.rds-calendar-body-cell-prev-month .rds-calendar-body-cell-content.rds-calendar-body-selected,.rds-calendar-body-cell-next-month .rds-calendar-body-cell-content.rds-calendar-body-selected{color:var(--rds-color-on-dark-surface)}.rds-calendar-body-cell-prev-month .rds-calendar-body-cell-content.rds-calendar-body-cell-content-disabled,.rds-calendar-body-cell-next-month .rds-calendar-body-cell-content.rds-calendar-body-cell-content-disabled{color:var(--rds-color-disabled)}.rds-datepicker-dialog{width:unset!important;min-width:unset!important;max-width:unset!important}.rds-datepicker-dialog .rds-dialog-container{position:relative;overflow:visible}.cdk-keyboard-focused .rds-calendar-body-active>.rds-calendar-body-cell-content:not(.rds-calendar-body-selected),.cdk-program-focused .rds-calendar-body-active>.rds-calendar-body-cell-content:not(.rds-calendar-body-selected){border:2px solid var(--rds-color-stroke-active-focus)}[dir=rtl] .rds-calendar-body-label{text-align:right}@media (hover: none){.rds-calendar-body-cell:not(.rds-calendar-body-disabled):hover>.rds-calendar-body-cell-content:not(.rds-calendar-body-selected){background-color:transparent}}.rds-calendar-body-in-range:before{background:var(--rds-color-datepicker-item-bg-hover)}.rds-calendar-body-in-range .rds-calendar-body-cell-content:not(.rds-calendar-body-selected){color:var(--rds-color-on-light-surface)}.rds-calendar-body-comparison-identical,.rds-calendar-body-in-comparison-range:before{background:var(--rds-color-datepicker-item-bg-comparison)}.rds-calendar-body-comparison-identical .rds-calendar-body-cell-content,.rds-calendar-body-in-comparison-range .rds-calendar-body-cell-content{color:var(--rds-color-on-light-surface)}.rds-calendar-body-comparison-bridge-start:before,[dir=rtl] .rds-calendar-body-comparison-bridge-end:before{background:linear-gradient(to right,var(--rds-color-datepicker-item-bg-hover) 50%,var(--rds-color-datepicker-item-bg-comparison) 50%)}.rds-calendar-body-comparison-bridge-end:before,[dir=rtl] .rds-calendar-body-comparison-bridge-start:before{background:linear-gradient(to left,var(--rds-color-datepicker-item-bg-hover) 50%,var(--rds-color-datepicker-item-bg-comparison) 50%)}.rds-calendar-body-comparison-bridge-start,[dir=rtl] .rds-calendar-body-comparison-bridge-end,.rds-calendar-body-comparison-bridge-end,[dir=rtl] .rds-calendar-body-comparison-bridge-start{color:var(--rds-color-on-light-surface)}.rds-calendar-body-in-range>.rds-calendar-body-comparison-identical,.rds-calendar-body-in-comparison-range.rds-calendar-body-in-range:after{background:var(--rds-color-datepicker-item-bg-overlap)}.rds-calendar-body-in-range>.rds-calendar-body-comparison-identical .rds-calendar-body-cell-content:not(.rds-calendar-body-selected),.rds-calendar-body-in-comparison-range.rds-calendar-body-in-range .rds-calendar-body-cell-content:not(.rds-calendar-body-selected){color:var(--rds-color-on-light-surface)}.rds-calendar-body-comparison-identical.rds-calendar-body-selected,.rds-calendar-body-in-comparison-range>.rds-calendar-body-selected{background:var(--rds-color-datepicker-item-bg-overlap-selected);color:var(--rds-color-on-dark-surface)}\n"], dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsCalendarBodyComponent, decorators: [{
            type: Component,
            args: [{ selector: '[rdsCalendarBody], [rds-calendar-body]', exportAs: 'rdsCalendarBody', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, template: "@for (row of rows; track row; let rowIndex = $index) {\n  <tr role=\"row\">\n    @if (rowIndex === 0 && _firstRowOffset) {\n      <td\n        aria-hidden=\"true\"\n        class=\"rds-calendar-body-label\"\n        [attr.colspan]=\"_firstRowOffset\"\n        [style.paddingTop]=\"_cellPadding\"\n        [style.paddingBottom]=\"_cellPadding\"\n      ></td>\n    }\n    @for (item of row; track item; let colIndex = $index) {\n      <td\n        role=\"gridcell\"\n        class=\"rds-calendar-body-cell\"\n        [ngClass]=\"item.cssClasses\"\n        [tabindex]=\"_isActiveCell(item) ? 0 : -1\"\n        [attr.data-rds-row]=\"rowIndex\"\n        [attr.data-rds-col]=\"colIndex\"\n        [class.rds-calendar-body-disabled]=\"!item.enabled\"\n        [class.rds-calendar-body-active]=\"_isActiveCell(item)\"\n        [class.rds-calendar-body-range-start]=\"_isRangeStart(item.compareValue)\"\n        [class.rds-calendar-body-range-end]=\"_isRangeEnd(item.compareValue)\"\n        [class.rds-calendar-body-in-range]=\"_isInRange(item.compareValue)\"\n        [class.rds-calendar-body-comparison-bridge-start]=\"\n          _isComparisonBridgeStart(item.compareValue, rowIndex, colIndex)\n        \"\n        [class.rds-calendar-body-comparison-bridge-end]=\"\n          _isComparisonBridgeEnd(item.compareValue, rowIndex, colIndex)\n        \"\n        [class.rds-calendar-body-comparison-start]=\"\n          _isComparisonStart(item.compareValue)\n        \"\n        [class.rds-calendar-body-comparison-end]=\"\n          _isComparisonEnd(item.compareValue)\n        \"\n        [class.rds-calendar-body-in-comparison-range]=\"\n          _isInComparisonRange(item.compareValue)\n        \"\n        [class.rds-calendar-body-preview-start]=\"\n          _isPreviewStart(item.compareValue)\n        \"\n        [class.rds-calendar-body-preview-end]=\"_isPreviewEnd(item.compareValue)\"\n        [class.rds-calendar-body-in-preview]=\"_isInPreview(item.compareValue)\"\n        [attr.aria-label]=\"item.ariaLabel\"\n        [attr.aria-disabled]=\"!item.enabled || null\"\n        [attr.aria-selected]=\"_isSelected(item.compareValue)\"\n        (click)=\"_cellClicked(item, $event)\"\n        [style.paddingTop]=\"_cellPadding\"\n        [style.paddingBottom]=\"_cellPadding\"\n      >\n        <div\n          class=\"rds-calendar-body-cell-content rds-focus-indicator\"\n          [class.rds-calendar-body-cell-content-disabled]=\"!item.enabled\"\n          [class.rds-calendar-body-selected]=\"_isSelected(item.compareValue)\"\n          [class.rds-calendar-body-comparison-identical]=\"\n            _isComparisonIdentical(item.compareValue)\n          \"\n          [class.rds-calendar-body-today]=\"todayValue === item.compareValue\"\n        >\n          {{ item.displayValue }}\n        </div>\n        <div class=\"rds-calendar-body-cell-preview\"></div>\n      </td>\n    }\n  </tr>\n}\n", styles: [".rds-calendar-body{min-width:280px}.rds-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.rds-calendar-body-cell{position:relative;height:40px;width:40px;line-height:0;text-align:center;outline:none;cursor:pointer;margin-top:4px}.rds-calendar-body-cell:before,.rds-calendar-body-cell:after,.rds-calendar-body-cell-preview{content:\"\";position:absolute;top:4px;left:0;z-index:0;box-sizing:border-box;height:100%;width:100%}.rds-calendar-body-range-start:not(.rds-calendar-body-in-comparison-range):before,.rds-calendar-body-range-start:after,.rds-calendar-body-comparison-start:not(.rds-calendar-body-comparison-bridge-start):before,.rds-calendar-body-comparison-start:after,.rds-calendar-body-preview-start .rds-calendar-body-cell-preview{left:0;width:100%;border-top-left-radius:2px;border-bottom-left-radius:2px}[dir=rtl] .rds-calendar-body-range-start:not(.rds-calendar-body-in-comparison-range):before,[dir=rtl] .rds-calendar-body-range-start:after,[dir=rtl] .rds-calendar-body-comparison-start:not(.rds-calendar-body-comparison-bridge-start):before,[dir=rtl] .rds-calendar-body-comparison-start:after,[dir=rtl] .rds-calendar-body-preview-start .rds-calendar-body-cell-preview{left:0;border-radius:0 2px 2px 0}.rds-calendar-body-range-end:not(.rds-calendar-body-in-comparison-range):before,.rds-calendar-body-range-end:after,.rds-calendar-body-comparison-end:not(.rds-calendar-body-comparison-bridge-end):before,.rds-calendar-body-comparison-end:after,.rds-calendar-body-preview-end .rds-calendar-body-cell-preview{width:100%;border-top-right-radius:2px;border-bottom-right-radius:2px}[dir=rtl] .rds-calendar-body-range-end:not(.rds-calendar-body-in-comparison-range):before,[dir=rtl] .rds-calendar-body-range-end:after,[dir=rtl] .rds-calendar-body-comparison-end:not(.rds-calendar-body-comparison-bridge-end):before,[dir=rtl] .rds-calendar-body-comparison-end:after,[dir=rtl] .rds-calendar-body-preview-end .rds-calendar-body-cell-preview{left:0;border-radius:2px 0 0 2px}[dir=rtl] .rds-calendar-body-comparison-bridge-start.rds-calendar-body-range-end:after,[dir=rtl] .rds-calendar-body-comparison-bridge-end.rds-calendar-body-range-start:after{width:100%;border-top-right-radius:2px;border-bottom-right-radius:2px}.rds-calendar-body-comparison-start.rds-calendar-body-range-end:after,[dir=rtl] .rds-calendar-body-comparison-start.rds-calendar-body-range-end:after,.rds-calendar-body-comparison-end.rds-calendar-body-range-start:after,[dir=rtl] .rds-calendar-body-comparison-end.rds-calendar-body-range-start:after{width:100%}.rds-calendar-body-cell.rds-calendar-body-in-preview .rds-calendar-body-cell-preview,.rds-calendar-body-cell.rds-calendar-body-preview-start .rds-calendar-body-cell-preview,.rds-calendar-body-cell.rds-calendar-body-preview-end .rds-calendar-body-cell-preview{background:var(--rds-color-datepicker-item-bg-hover)}.rds-calendar-body-cell.rds-calendar-body-in-preview .rds-calendar-body-cell-content:not(.rds-calendar-body-selected),.rds-calendar-body-cell.rds-calendar-body-preview-start .rds-calendar-body-cell-content:not(.rds-calendar-body-selected),.rds-calendar-body-cell.rds-calendar-body-preview-end .rds-calendar-body-cell-content:not(.rds-calendar-body-selected){color:var(--rds-color-on-light-surface)}.rds-calendar-body-disabled{cursor:default}.rds-calendar-body-cell-content{font-size:18px;font-weight:200;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;top:4px;left:0;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%;color:var(--rds-color-high-contrast);line-height:1;border-color:transparent;border-width:2px;border-style:solid;border-radius:2px}.rds-calendar-body-cell-content.rds-focus-indicator{position:absolute}.rds-calendar-body-cell-content:hover:not(.rds-calendar-body-selected,.rds-calendar-body-cell-content-disabled){background:var(--rds-color-datepicker-item-bg-hover);border-color:var(--rds-color-datepicker-item-bg-hover);color:var(--rds-color-on-light-surface)}.rds-calendar-body-cell-content.rds-calendar-body-today:not(.rds-calendar-body-selected),.rds-calendar-body-cell-content:hover.rds-calendar-body-today:not(.rds-calendar-body-selected,.rds-calendar-body-cell-content-disabled){border:1px solid var(--rds-color-stroke-enabled)}.rds-calendar-body-cell-content.rds-calendar-body-selected{color:var(--rds-color-on-dark-surface);background:var(--rds-color-bg-informative);border-width:0}.rds-calendar-body-cell-content.rds-calendar-body-cell-content-disabled{color:var(--rds-color-disabled)}.rds-calendar-body-cell-prev-month .rds-calendar-body-cell-content,.rds-calendar-body-cell-next-month .rds-calendar-body-cell-content{color:var(--rds-color-low-contrast)}.rds-calendar-body-cell-prev-month .rds-calendar-body-cell-content.rds-calendar-body-selected,.rds-calendar-body-cell-next-month .rds-calendar-body-cell-content.rds-calendar-body-selected{color:var(--rds-color-on-dark-surface)}.rds-calendar-body-cell-prev-month .rds-calendar-body-cell-content.rds-calendar-body-cell-content-disabled,.rds-calendar-body-cell-next-month .rds-calendar-body-cell-content.rds-calendar-body-cell-content-disabled{color:var(--rds-color-disabled)}.rds-datepicker-dialog{width:unset!important;min-width:unset!important;max-width:unset!important}.rds-datepicker-dialog .rds-dialog-container{position:relative;overflow:visible}.cdk-keyboard-focused .rds-calendar-body-active>.rds-calendar-body-cell-content:not(.rds-calendar-body-selected),.cdk-program-focused .rds-calendar-body-active>.rds-calendar-body-cell-content:not(.rds-calendar-body-selected){border:2px solid var(--rds-color-stroke-active-focus)}[dir=rtl] .rds-calendar-body-label{text-align:right}@media (hover: none){.rds-calendar-body-cell:not(.rds-calendar-body-disabled):hover>.rds-calendar-body-cell-content:not(.rds-calendar-body-selected){background-color:transparent}}.rds-calendar-body-in-range:before{background:var(--rds-color-datepicker-item-bg-hover)}.rds-calendar-body-in-range .rds-calendar-body-cell-content:not(.rds-calendar-body-selected){color:var(--rds-color-on-light-surface)}.rds-calendar-body-comparison-identical,.rds-calendar-body-in-comparison-range:before{background:var(--rds-color-datepicker-item-bg-comparison)}.rds-calendar-body-comparison-identical .rds-calendar-body-cell-content,.rds-calendar-body-in-comparison-range .rds-calendar-body-cell-content{color:var(--rds-color-on-light-surface)}.rds-calendar-body-comparison-bridge-start:before,[dir=rtl] .rds-calendar-body-comparison-bridge-end:before{background:linear-gradient(to right,var(--rds-color-datepicker-item-bg-hover) 50%,var(--rds-color-datepicker-item-bg-comparison) 50%)}.rds-calendar-body-comparison-bridge-end:before,[dir=rtl] .rds-calendar-body-comparison-bridge-start:before{background:linear-gradient(to left,var(--rds-color-datepicker-item-bg-hover) 50%,var(--rds-color-datepicker-item-bg-comparison) 50%)}.rds-calendar-body-comparison-bridge-start,[dir=rtl] .rds-calendar-body-comparison-bridge-end,.rds-calendar-body-comparison-bridge-end,[dir=rtl] .rds-calendar-body-comparison-bridge-start{color:var(--rds-color-on-light-surface)}.rds-calendar-body-in-range>.rds-calendar-body-comparison-identical,.rds-calendar-body-in-comparison-range.rds-calendar-body-in-range:after{background:var(--rds-color-datepicker-item-bg-overlap)}.rds-calendar-body-in-range>.rds-calendar-body-comparison-identical .rds-calendar-body-cell-content:not(.rds-calendar-body-selected),.rds-calendar-body-in-comparison-range.rds-calendar-body-in-range .rds-calendar-body-cell-content:not(.rds-calendar-body-selected){color:var(--rds-color-on-light-surface)}.rds-calendar-body-comparison-identical.rds-calendar-body-selected,.rds-calendar-body-in-comparison-range>.rds-calendar-body-selected{background:var(--rds-color-datepicker-item-bg-overlap-selected);color:var(--rds-color-on-dark-surface)}\n"] }]
        }], ctorParameters: () => [], propDecorators: { class: [{
                type: HostBinding,
                args: ['class']
            }], role: [{
                type: HostBinding,
                args: ['attr.role']
            }], ariaReadonly: [{
                type: HostBinding,
                args: ['attr.aria-readonly']
            }], label: [{
                type: Input
            }], rows: [{
                type: Input
            }], todayValue: [{
                type: Input
            }], startValue: [{
                type: Input
            }], endValue: [{
                type: Input
            }], labelMinRequiredCells: [{
                type: Input
            }], numCols: [{
                type: Input
            }], activeCell: [{
                type: Input
            }], isRange: [{
                type: Input,
                args: [{ transform: booleanAttribute }]
            }], cellAspectRatio: [{
                type: Input
            }], comparisonStart: [{
                type: Input
            }], comparisonEnd: [{
                type: Input
            }], previewStart: [{
                type: Input
            }], previewEnd: [{
                type: Input
            }], selectedValueChange: [{
                type: Output
            }], previewChange: [{
                type: Output
            }] } });
function isTableCell(node) {
    return node.nodeName === 'TD';
}
function isStart(value, start, end) {
    return end !== null && start !== end && value < end && value === start;
}
function isEnd(value, start, end) {
    return start !== null && start !== end && value >= start && value === end;
}
function isInRange(value, start, end, rangeEnabled) {
    return (rangeEnabled &&
        start !== null &&
        end !== null &&
        start !== end &&
        value >= start &&
        value <= end);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXItYm9keS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL2FuZ3VsYXItY29tcG9uZW50cy9zcmMvbGliL2RhdGVwaWNrZXIvY2FsZW5kYXItYm9keS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL2FuZ3VsYXItY29tcG9uZW50cy9zcmMvbGliL2RhdGVwaWNrZXIvY2FsZW5kYXItYm9keS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsZ0JBQWdCLEVBQ2hCLHVCQUF1QixFQUN2QixTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixXQUFXLEVBQ1gsTUFBTSxFQUNOLEtBQUssRUFDTCxNQUFNLEVBR04sTUFBTSxFQUVOLGlCQUFpQixHQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7OztBQWN0QyxpRUFBaUU7QUFDakUsTUFBTSxPQUFPLGVBQWU7SUFDMUIsWUFDUyxLQUFhLEVBQ2IsWUFBb0IsRUFDcEIsU0FBaUIsRUFDakIsT0FBZ0IsRUFDaEIsYUFBd0MsRUFBRSxFQUMxQyxRQUFXLEVBQ1gsZUFBZSxLQUFLO1FBTnBCLFVBQUssR0FBTCxLQUFLLENBQVE7UUFDYixpQkFBWSxHQUFaLFlBQVksQ0FBUTtRQUNwQixjQUFTLEdBQVQsU0FBUyxDQUFRO1FBQ2pCLFlBQU8sR0FBUCxPQUFPLENBQVM7UUFDaEIsZUFBVSxHQUFWLFVBQVUsQ0FBZ0M7UUFDMUMsYUFBUSxHQUFSLFFBQVEsQ0FBRztRQUNYLGlCQUFZLEdBQVosWUFBWSxDQUFRO0lBQzFCLENBQUM7Q0FDTDtBQWVELE1BQU0sT0FBTyx3QkFBd0I7SUFxQ25DO1FBcENpQixlQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2hDLFdBQU0sR0FBRyxNQUFNLENBQUMs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QkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUNrQyxPQUFPO3NCQUE5QyxLQUFLO3VCQUFDLEVBQUUsU0FBUyxFQUFFLGdCQUFnQixFQUFFO2dCQUM3QixlQUFlO3NCQUF2QixLQUFLO2dCQUNHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBQ0csYUFBYTtzQkFBckIsS0FBSztnQkFDRyxZQUFZO3NCQUFwQixLQUFLO2dCQUNHLFVBQVU7c0JBQWxCLEtBQUs7Z0JBRWEsbUJBQW1CO3NCQUFyQyxNQUFNO2dCQUlHLGFBQWE7c0JBQXRCLE1BQU07O0FBK05ULFNBQVMsV0FBVyxDQUFDLElBQVU7SUFDN0IsT0FBTyxJQUFJLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQztBQUNoQyxDQUFDO0FBRUQsU0FBUyxPQUFPLENBQ2QsS0FBYSxFQUNiLEtBQW9CLEVBQ3BCLEdBQWtCO0lBRWxCLE9BQU8sR0FBRyxLQUFLLElBQUksSUFBSSxLQUFLLEtBQUssR0FBRyxJQUFJLEtBQUssR0FBRyxHQUFHLElBQUksS0FBSyxLQUFLLEtBQUssQ0FBQztBQUN6RSxDQUFDO0FBRUQsU0FBUyxLQUFLLENBQ1osS0FBYSxFQUNiLEtBQW9CLEVBQ3BCLEdBQWtCO0lBRWxCLE9BQU8sS0FBSyxLQUFLLElBQUksSUFBSSxLQUFLLEtBQUssR0FBRyxJQUFJLEtBQUssSUFBSSxLQUFLLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQztBQUM1RSxDQUFDO0FBRUQsU0FBUyxTQUFTLENBQ2hCLEtBQWEsRUFDYixLQUFvQixFQUNwQixHQUFrQixFQUNsQixZQUFxQjtJQUVyQixPQUFPLENBQ0wsWUFBWTtRQUNaLEtBQUssS0FBSyxJQUFJO1FBQ2QsR0FBRyxLQUFLLElBQUk7UUFDWixLQUFLLEtBQUssR0FBRztRQUNiLEtBQUssSUFBSSxLQUFLO1FBQ2QsS0FBSyxJQUFJLEdBQUcsQ0FDYixDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGJvb2xlYW5BdHRyaWJ1dGUsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSG9zdEJpbmRpbmcsXG4gIGluamVjdCxcbiAgSW5wdXQsXG4gIE5nWm9uZSxcbiAgT25DaGFuZ2VzLFxuICBPbkRlc3Ryb3ksXG4gIE91dHB1dCxcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgVmlld0VuY2Fwc3VsYXRpb24sXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgdGFrZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IFJkc0NhbGVuZGFyVmlldyB9IGZyb20gJy4vY2FsZW5kYXIudHlwZXMnO1xuXG5leHBvcnQgdHlwZSBSZHNDYWxlbmRhckNlbGxDc3NDbGFzc2VzID1cbiAgfCBzdHJpbmdcbiAgfCBzdHJpbmdbXVxuICB8IFNldDxzdHJpbmc+XG4gIHwgeyBba2V5OiBzdHJpbmddOiB1bmtub3duIH07XG5cbmV4cG9ydCB0eXBlIFJkc0NhbGVuZGFyQ2VsbENsYXNzRnVuY3Rpb248RD4gPSAoXG4gIGRhdGU6IEQsXG4gIHZpZXc6IFJkc0NhbGVuZGFyVmlldyxcbikgPT4gUmRzQ2FsZW5kYXJDZWxsQ3NzQ2xhc3NlcztcblxuLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbmV4cG9ydCBjbGFzcyBSZHNDYWxlbmRhckNlbGw8RCA9IGFueT4ge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgdmFsdWU6IG51bWJlcixcbiAgICBwdWJsaWMgZGlzcGxheVZhbHVlOiBzdHJpbmcsXG4gICAgcHVibGljIGFyaWFMYWJlbDogc3RyaW5nLFxuICAgIHB1YmxpYyBlbmFibGVkOiBib29sZWFuLFxuICAgIHB1YmxpYyBjc3NDbGFzc2VzOiBSZHNDYWxlbmRhckNlbGxDc3NDbGFzc2VzID0ge30sXG4gICAgcHVibGljIHJhd1ZhbHVlOiBELFxuICAgIHB1YmxpYyBjb21wYXJlVmFsdWUgPSB2YWx1ZSxcbiAgKSB7fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJkc0NhbGVuZGFyVXNlckV2ZW50PEQ+IHtcbiAgdmFsdWU6IEQ7XG4gIGV2ZW50OiBFdmVudDtcbn1cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnW3Jkc0NhbGVuZGFyQm9keV0sIFtyZHMtY2FsZW5kYXItYm9keV0nLFxuICB0ZW1wbGF0ZVVybDogJy4vY2FsZW5kYXItYm9keS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2NhbGVuZGFyLWJvZHkuY29tcG9uZW50LnNjc3MnXSxcbiAgZXhwb3J0QXM6ICdyZHNDYWxlbmRhckJvZHknLFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgUmRzQ2FsZW5kYXJCb2R5Q29tcG9uZW50PEQ+IGltcGxlbWVudHMgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xuICBwcml2YXRlIHJlYWRvbmx5IGVsZW1lbnRSZWYgPSBpbmplY3QoRWxlbWVudFJlZik7XG4gIHByaXZhdGUgcmVhZG9ubHkgbmdab25lID0gaW5qZWN0KE5nWm9uZSk7XG5cbiAgcHJpdmF0ZSBfc2tpcE5leHRGb2N1czogYm9vbGVhbiB8IG51bGwgPSBudWxsO1xuXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKSBjbGFzcyA9ICdyZHMtY2FsZW5kYXItYm9keSc7XG4gIEBIb3N0QmluZGluZygnYXR0ci5yb2xlJykgcm9sZSA9ICdncmlkJztcbiAgQEhvc3RCaW5kaW5nKCdhdHRyLmFyaWEtcmVhZG9ubHknKSBhcmlhUmVhZG9ubHkgPSAndHJ1ZSc7XG5cbiAgQElucHV0KCkgbGFiZWw6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBASW5wdXQoKSByb3dzOiBSZHNDYWxlbmRhckNlbGw8RD5bXVtdIHwgbnVsbCA9IG51bGw7XG4gIEBJbnB1dCgpIHRvZGF5VmFsdWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBASW5wdXQoKSBzdGFydFZhbHVlOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgQElucHV0KCkgZW5kVmFsdWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBASW5wdXQoKSBsYWJlbE1pblJlcXVpcmVkQ2VsbHM6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBASW5wdXQoKSBudW1Db2xzID0gNztcbiAgQElucHV0KCkgYWN0aXZlQ2VsbDogUmRzQ2FsZW5kYXJDZWxsPEQ+IHwgbnVsbCA9IG51bGw7XG4gIEBJbnB1dCh7IHRyYW5zZm9ybTogYm9vbGVhbkF0dHJpYnV0ZSB9KSBpc1JhbmdlID0gZmFsc2U7XG4gIEBJbnB1dCgpIGNlbGxBc3BlY3RSYXRpbyA9IDE7XG4gIEBJbnB1dCgpIGNvbXBhcmlzb25TdGFydDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIEBJbnB1dCgpIGNvbXBhcmlzb25FbmQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBASW5wdXQoKSBwcmV2aWV3U3RhcnQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBASW5wdXQoKSBwcmV2aWV3RW5kOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICBAT3V0cHV0KCkgcmVhZG9ubHkgc2VsZWN0ZWRWYWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8XG4gICAgUmRzQ2FsZW5kYXJVc2VyRXZlbnQ8UmRzQ2FsZW5kYXJDZWxsPEQ+PlxuICA+KCk7XG5cbiAgQE91dHB1dCgpIHByZXZpZXdDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFxuICAgIFJkc0NhbGVuZGFyVXNlckV2ZW50PFJkc0NhbGVuZGFyQ2VsbDxEPiB8IG51bGw+XG4gID4oKTtcblxuICBfZmlyc3RSb3dPZmZzZXQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBfY2VsbFBhZGRpbmc6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBfY2VsbFdpZHRoOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLl9lbnRlckhhbmRsZXIsIHRydWUpO1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2VudGVySGFuZGxlciwgdHJ1ZSk7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLl9sZWF2ZUhhbmRsZXIsIHRydWUpO1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5fbGVhdmVIYW5kbGVyLCB0cnVlKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9jZWxsQ2xpY2tlZChjZWxsOiBSZHNDYWxlbmRhckNlbGw8RD4sIGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgaWYgKGNlbGwuZW5hYmxlZCkge1xuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlQ2hhbmdlLmVtaXQoeyB2YWx1ZTogY2VsbCwgZXZlbnQgfSk7XG4gICAgfVxuICB9XG5cbiAgX2lzU2VsZWN0ZWQodmFsdWU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnN0YXJ0VmFsdWUgPT09IHZhbHVlIHx8IHRoaXMuZW5kVmFsdWUgPT09IHZhbHVlO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGNvbnN0IGNvbHVtbkNoYW5nZXMgPSBjaGFuZ2VzWydudW1Db2xzJ107XG4gICAgY29uc3QgeyByb3dzLCBudW1Db2xzIH0gPSB0aGlzO1xuXG4gICAgaWYgKGNoYW5nZXNbJ3Jvd3MnXSB8fCBjb2x1bW5DaGFuZ2VzKSB7XG4gICAgICB0aGlzLl9maXJzdFJvd09mZnNldCA9XG4gICAgICAgIHJvd3MgJiYgcm93cy5sZW5ndGggJiYgcm93c1swXS5sZW5ndGggPyBudW1Db2xzIC0gcm93c1swXS5sZW5ndGggOiAwO1xuICAgIH1cblxuICAgIGlmIChjaGFuZ2VzWydjZWxsQXNwZWN0UmF0aW8nXSB8fCBjb2x1bW5DaGFuZ2VzIHx8ICF0aGlzLl9jZWxsUGFkZGluZykge1xuICAgICAgdGhpcy5fY2VsbFBhZGRpbmcgPSBgJHsoNTAgKiB0aGlzLmNlbGxBc3BlY3RSYXRpbykgLyBudW1Db2xzfSVgO1xuICAgIH1cblxuICAgIGlmIChjb2x1bW5DaGFuZ2VzIHx8ICF0aGlzLl9jZWxsV2lkdGgpIHtcbiAgICAgIHRoaXMuX2NlbGxXaWR0aCA9IGAkezEwMCAvIG51bUNvbHN9JWA7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xuICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuX2VudGVySGFuZGxlciwgdHJ1ZSk7XG4gICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2VudGVySGFuZGxlciwgdHJ1ZSk7XG4gICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5fbGVhdmVIYW5kbGVyLCB0cnVlKTtcbiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9sZWF2ZUhhbmRsZXIsIHRydWUpO1xuICB9XG5cbiAgX2lzQWN0aXZlQ2VsbChpdGVtOiBSZHNDYWxlbmRhckNlbGw8RD4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVDZWxsID09PSBpdGVtO1xuICB9XG5cbiAgX2ZvY3VzQWN0aXZlQ2VsbChtb3ZlUHJldmlldyA9IHRydWUpOiB2b2lkIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLm5nWm9uZS5vblN0YWJsZS5waXBlKHRha2UoMSkpLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUNlbGw6IEhUTUxFbGVtZW50IHwgbnVsbCA9XG4gICAgICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICcucmRzLWNhbGVuZGFyLWJvZHktYWN0aXZlJyxcbiAgICAgICAgICApO1xuXG4gICAgICAgIGlmIChhY3RpdmVDZWxsKSB7XG4gICAgICAgICAgaWYgKCFtb3ZlUHJldmlldykge1xuICAgICAgICAgICAgdGhpcy5fc2tpcE5leHRGb2N1cyA9IHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYWN0aXZlQ2VsbC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9pc1JhbmdlU3RhcnQodmFsdWU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpc1N0YXJ0KHZhbHVlLCB0aGlzLnN0YXJ0VmFsdWUsIHRoaXMuZW5kVmFsdWUpO1xuICB9XG5cbiAgX2lzUmFuZ2VFbmQodmFsdWU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpc0VuZCh2YWx1ZSwgdGhpcy5zdGFydFZhbHVlLCB0aGlzLmVuZFZhbHVlKTtcbiAgfVxuXG4gIF9pc0luUmFuZ2UodmFsdWU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpc0luUmFuZ2UodmFsdWUsIHRoaXMuc3RhcnRWYWx1ZSwgdGhpcy5lbmRWYWx1ZSwgdGhpcy5pc1JhbmdlKTtcbiAgfVxuXG4gIF9pc0NvbXBhcmlzb25TdGFydCh2YWx1ZTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzU3RhcnQodmFsdWUsIHRoaXMuY29tcGFyaXNvblN0YXJ0LCB0aGlzLmNvbXBhcmlzb25FbmQpO1xuICB9XG5cbiAgX2lzQ29tcGFyaXNvbkJyaWRnZVN0YXJ0KFxuICAgIHZhbHVlOiBudW1iZXIsXG4gICAgcm93SW5kZXg6IG51bWJlcixcbiAgICBjb2xJbmRleDogbnVtYmVyLFxuICApOiBib29sZWFuIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5faXNDb21wYXJpc29uU3RhcnQodmFsdWUpIHx8XG4gICAgICB0aGlzLl9pc1JhbmdlU3RhcnQodmFsdWUpIHx8XG4gICAgICAhdGhpcy5faXNJblJhbmdlKHZhbHVlKVxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxldCBwcmV2aW91c0NlbGw6IFJkc0NhbGVuZGFyQ2VsbDxEPiB8IG51bGwgPSB0aGlzLnJvd3NcbiAgICAgID8gdGhpcy5yb3dzW3Jvd0luZGV4XVtjb2xJbmRleCAtIDFdXG4gICAgICA6IG51bGw7XG5cbiAgICBpZiAoIXByZXZpb3VzQ2VsbCAmJiB0aGlzLnJvd3MpIHtcbiAgICAgIGNvbnN0IHByZXZpb3VzUm93ID0gdGhpcy5yb3dzW3Jvd0luZGV4IC0gMV07XG4gICAgICBwcmV2aW91c0NlbGwgPSBwcmV2aW91c1JvdyAmJiBwcmV2aW91c1Jvd1twcmV2aW91c1Jvdy5sZW5ndGggLSAxXTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJldmlvdXNDZWxsID8gIXRoaXMuX2lzUmFuZ2VFbmQocHJldmlvdXNDZWxsLmNvbXBhcmVWYWx1ZSkgOiBmYWxzZTtcbiAgfVxuXG4gIF9pc0NvbXBhcmlzb25CcmlkZ2VFbmQoXG4gICAgdmFsdWU6IG51bWJlcixcbiAgICByb3dJbmRleDogbnVtYmVyLFxuICAgIGNvbEluZGV4OiBudW1iZXIsXG4gICk6IGJvb2xlYW4ge1xuICAgIGlmIChcbiAgICAgICF0aGlzLl9pc0NvbXBhcmlzb25FbmQodmFsdWUpIHx8XG4gICAgICB0aGlzLl9pc1JhbmdlRW5kKHZhbHVlKSB8fFxuICAgICAgIXRoaXMuX2lzSW5SYW5nZSh2YWx1ZSlcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgbmV4dENlbGw6IFJkc0NhbGVuZGFyQ2VsbDxEPiB8IG51bGwgPSB0aGlzLnJvd3NcbiAgICAgID8gdGhpcy5yb3dzW3Jvd0luZGV4XVtjb2xJbmRleCArIDFdXG4gICAgICA6IG51bGw7XG5cbiAgICBpZiAoIW5leHRDZWxsICYmIHRoaXMucm93cykge1xuICAgICAgY29uc3QgbmV4dFJvdyA9IHRoaXMucm93c1tyb3dJbmRleCArIDFdO1xuICAgICAgbmV4dENlbGwgPSBuZXh0Um93ICYmIG5leHRSb3dbMF07XG4gICAgfVxuXG4gICAgcmV0dXJuIG5leHRDZWxsID8gIXRoaXMuX2lzUmFuZ2VTdGFydChuZXh0Q2VsbC5jb21wYXJlVmFsdWUpIDogZmFsc2U7XG4gIH1cblxuICBfaXNDb21wYXJpc29uRW5kKHZhbHVlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaXNFbmQodmFsdWUsIHRoaXMuY29tcGFyaXNvblN0YXJ0LCB0aGlzLmNvbXBhcmlzb25FbmQpO1xuICB9XG5cbiAgX2lzSW5Db21wYXJpc29uUmFuZ2UodmFsdWU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpc0luUmFuZ2UoXG4gICAgICB2YWx1ZSxcbiAgICAgIHRoaXMuY29tcGFyaXNvblN0YXJ0LFxuICAgICAgdGhpcy5jb21wYXJpc29uRW5kLFxuICAgICAgdGhpcy5pc1JhbmdlLFxuICAgICk7XG4gIH1cblxuICBfaXNDb21wYXJpc29uSWRlbnRpY2FsKHZhbHVlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5jb21wYXJpc29uU3RhcnQgPT09IHRoaXMuY29tcGFyaXNvbkVuZCAmJlxuICAgICAgdmFsdWUgPT09IHRoaXMuY29tcGFyaXNvblN0YXJ0XG4gICAgKTtcbiAgfVxuXG4gIF9pc1ByZXZpZXdTdGFydCh2YWx1ZTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzU3RhcnQodmFsdWUsIHRoaXMucHJldmlld1N0YXJ0LCB0aGlzLnByZXZpZXdFbmQpO1xuICB9XG5cbiAgX2lzUHJldmlld0VuZCh2YWx1ZTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzRW5kKHZhbHVlLCB0aGlzLnByZXZpZXdTdGFydCwgdGhpcy5wcmV2aWV3RW5kKTtcbiAgfVxuXG4gIF9pc0luUHJldmlldyh2YWx1ZTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzSW5SYW5nZSh2YWx1ZSwgdGhpcy5wcmV2aWV3U3RhcnQsIHRoaXMucHJldmlld0VuZCwgdGhpcy5pc1JhbmdlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2VudGVySGFuZGxlciA9IChldmVudDogRXZlbnQpOiB2b2lkID0+IHtcbiAgICBpZiAodGhpcy5fc2tpcE5leHRGb2N1cyAmJiBldmVudC50eXBlID09PSAnZm9jdXMnKSB7XG4gICAgICB0aGlzLl9za2lwTmV4dEZvY3VzID0gZmFsc2U7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQudGFyZ2V0ICYmIHRoaXMuaXNSYW5nZSkge1xuICAgICAgY29uc3QgY2VsbCA9IHRoaXMuX2dldENlbGxGcm9tRWxlbWVudChldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpO1xuXG4gICAgICBpZiAoY2VsbCkge1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT5cbiAgICAgICAgICB0aGlzLnByZXZpZXdDaGFuZ2UuZW1pdCh7IHZhbHVlOiBjZWxsLmVuYWJsZWQgPyBjZWxsIDogbnVsbCwgZXZlbnQgfSksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgX2xlYXZlSGFuZGxlciA9IChldmVudDogRXZlbnQpOiB2b2lkID0+IHtcbiAgICBpZiAodGhpcy5wcmV2aWV3RW5kICE9PSBudWxsICYmIHRoaXMuaXNSYW5nZSkge1xuICAgICAgaWYgKGV2ZW50LnRhcmdldCAmJiBpc1RhYmxlQ2VsbChldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLnByZXZpZXdDaGFuZ2UuZW1pdCh7IHZhbHVlOiBudWxsLCBldmVudCB9KSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgX2dldENlbGxGcm9tRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCk6IFJkc0NhbGVuZGFyQ2VsbDxEPiB8IG51bGwge1xuICAgIGxldCBjZWxsOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcblxuICAgIGlmIChpc1RhYmxlQ2VsbChlbGVtZW50KSkge1xuICAgICAgY2VsbCA9IGVsZW1lbnQ7XG4gICAgfSBlbHNlIGlmIChpc1RhYmxlQ2VsbChlbGVtZW50LnBhcmVudE5vZGUgYXMgTm9kZSkpIHtcbiAgICAgIGNlbGwgPSBlbGVtZW50LnBhcmVudE5vZGUgYXMgSFRNTEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgaWYgKGNlbGwpIHtcbiAgICAgIGNvbnN0IHJvdyA9IGNlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLXJkcy1yb3cnKTtcbiAgICAgIGNvbnN0IGNvbCA9IGNlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLXJkcy1jb2wnKTtcblxuICAgICAgaWYgKHJvdyAmJiBjb2wgJiYgdGhpcy5yb3dzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvd3NbcGFyc2VJbnQocm93KV1bcGFyc2VJbnQoY29sKV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNUYWJsZUNlbGwobm9kZTogTm9kZSk6IG5vZGUgaXMgSFRNTFRhYmxlQ2VsbEVsZW1lbnQge1xuICByZXR1cm4gbm9kZS5ub2RlTmFtZSA9PT0gJ1REJztcbn1cblxuZnVuY3Rpb24gaXNTdGFydChcbiAgdmFsdWU6IG51bWJlcixcbiAgc3RhcnQ6IG51bWJlciB8IG51bGwsXG4gIGVuZDogbnVtYmVyIHwgbnVsbCxcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gZW5kICE9PSBudWxsICYmIHN0YXJ0ICE9PSBlbmQgJiYgdmFsdWUgPCBlbmQgJiYgdmFsdWUgPT09IHN0YXJ0O1xufVxuXG5mdW5jdGlvbiBpc0VuZChcbiAgdmFsdWU6IG51bWJlcixcbiAgc3RhcnQ6IG51bWJlciB8IG51bGwsXG4gIGVuZDogbnVtYmVyIHwgbnVsbCxcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gc3RhcnQgIT09IG51bGwgJiYgc3RhcnQgIT09IGVuZCAmJiB2YWx1ZSA+PSBzdGFydCAmJiB2YWx1ZSA9PT0gZW5kO1xufVxuXG5mdW5jdGlvbiBpc0luUmFuZ2UoXG4gIHZhbHVlOiBudW1iZXIsXG4gIHN0YXJ0OiBudW1iZXIgfCBudWxsLFxuICBlbmQ6IG51bWJlciB8IG51bGwsXG4gIHJhbmdlRW5hYmxlZDogYm9vbGVhbixcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIHJhbmdlRW5hYmxlZCAmJlxuICAgIHN0YXJ0ICE9PSBudWxsICYmXG4gICAgZW5kICE9PSBudWxsICYmXG4gICAgc3RhcnQgIT09IGVuZCAmJlxuICAgIHZhbHVlID49IHN0YXJ0ICYmXG4gICAgdmFsdWUgPD0gZW5kXG4gICk7XG59XG4iLCJAZm9yIChyb3cgb2Ygcm93czsgdHJhY2sgcm93OyBsZXQgcm93SW5kZXggPSAkaW5kZXgpIHtcbiAgPHRyIHJvbGU9XCJyb3dcIj5cbiAgICBAaWYgKHJvd0luZGV4ID09PSAwICYmIF9maXJzdFJvd09mZnNldCkge1xuICAgICAgPHRkXG4gICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgIGNsYXNzPVwicmRzLWNhbGVuZGFyLWJvZHktbGFiZWxcIlxuICAgICAgICBbYXR0ci5jb2xzcGFuXT1cIl9maXJzdFJvd09mZnNldFwiXG4gICAgICAgIFtzdHlsZS5wYWRkaW5nVG9wXT1cIl9jZWxsUGFkZGluZ1wiXG4gICAgICAgIFtzdHlsZS5wYWRkaW5nQm90dG9tXT1cIl9jZWxsUGFkZGluZ1wiXG4gICAgICA+PC90ZD5cbiAgICB9XG4gICAgQGZvciAoaXRlbSBvZiByb3c7IHRyYWNrIGl0ZW07IGxldCBjb2xJbmRleCA9ICRpbmRleCkge1xuICAgICAgPHRkXG4gICAgICAgIHJvbGU9XCJncmlkY2VsbFwiXG4gICAgICAgIGNsYXNzPVwicmRzLWNhbGVuZGFyLWJvZHktY2VsbFwiXG4gICAgICAgIFtuZ0NsYXNzXT1cIml0ZW0uY3NzQ2xhc3Nlc1wiXG4gICAgICAgIFt0YWJpbmRleF09XCJfaXNBY3RpdmVDZWxsKGl0ZW0pID8gMCA6IC0xXCJcbiAgICAgICAgW2F0dHIuZGF0YS1yZHMtcm93XT1cInJvd0luZGV4XCJcbiAgICAgICAgW2F0dHIuZGF0YS1yZHMtY29sXT1cImNvbEluZGV4XCJcbiAgICAgICAgW2NsYXNzLnJkcy1jYWxlbmRhci1ib2R5LWRpc2FibGVkXT1cIiFpdGVtLmVuYWJsZWRcIlxuICAgICAgICBbY2xhc3MucmRzLWNhbGVuZGFyLWJvZHktYWN0aXZlXT1cIl9pc0FjdGl2ZUNlbGwoaXRlbSlcIlxuICAgICAgICBbY2xhc3MucmRzLWNhbGVuZGFyLWJvZHktcmFuZ2Utc3RhcnRdPVwiX2lzUmFuZ2VTdGFydChpdGVtLmNvbXBhcmVWYWx1ZSlcIlxuICAgICAgICBbY2xhc3MucmRzLWNhbGVuZGFyLWJvZHktcmFuZ2UtZW5kXT1cIl9pc1JhbmdlRW5kKGl0ZW0uY29tcGFyZVZhbHVlKVwiXG4gICAgICAgIFtjbGFzcy5yZHMtY2FsZW5kYXItYm9keS1pbi1yYW5nZV09XCJfaXNJblJhbmdlKGl0ZW0uY29tcGFyZVZhbHVlKVwiXG4gICAgICAgIFtjbGFzcy5yZHMtY2FsZW5kYXItYm9keS1jb21wYXJpc29uLWJyaWRnZS1zdGFydF09XCJcbiAgICAgICAgICBfaXNDb21wYXJpc29uQnJpZGdlU3RhcnQoaXRlbS5jb21wYXJlVmFsdWUsIHJvd0luZGV4LCBjb2xJbmRleClcbiAgICAgICAgXCJcbiAgICAgICAgW2NsYXNzLnJkcy1jYWxlbmRhci1ib2R5LWNvbXBhcmlzb24tYnJpZGdlLWVuZF09XCJcbiAgICAgICAgICBfaXNDb21wYXJpc29uQnJpZGdlRW5kKGl0ZW0uY29tcGFyZVZhbHVlLCByb3dJbmRleCwgY29sSW5kZXgpXG4gICAgICAgIFwiXG4gICAgICAgIFtjbGFzcy5yZHMtY2FsZW5kYXItYm9keS1jb21wYXJpc29uLXN0YXJ0XT1cIlxuICAgICAgICAgIF9pc0NvbXBhcmlzb25TdGFydChpdGVtLmNvbXBhcmVWYWx1ZSlcbiAgICAgICAgXCJcbiAgICAgICAgW2NsYXNzLnJkcy1jYWxlbmRhci1ib2R5LWNvbXBhcmlzb24tZW5kXT1cIlxuICAgICAgICAgIF9pc0NvbXBhcmlzb25FbmQoaXRlbS5jb21wYXJlVmFsdWUpXG4gICAgICAgIFwiXG4gICAgICAgIFtjbGFzcy5yZHMtY2FsZW5kYXItYm9keS1pbi1jb21wYXJpc29uLXJhbmdlXT1cIlxuICAgICAgICAgIF9pc0luQ29tcGFyaXNvblJhbmdlKGl0ZW0uY29tcGFyZVZhbHVlKVxuICAgICAgICBcIlxuICAgICAgICBbY2xhc3MucmRzLWNhbGVuZGFyLWJvZHktcHJldmlldy1zdGFydF09XCJcbiAgICAgICAgICBfaXNQcmV2aWV3U3RhcnQoaXRlbS5jb21wYXJlVmFsdWUpXG4gICAgICAgIFwiXG4gICAgICAgIFtjbGFzcy5yZHMtY2FsZW5kYXItYm9keS1wcmV2aWV3LWVuZF09XCJfaXNQcmV2aWV3RW5kKGl0ZW0uY29tcGFyZVZhbHVlKVwiXG4gICAgICAgIFtjbGFzcy5yZHMtY2FsZW5kYXItYm9keS1pbi1wcmV2aWV3XT1cIl9pc0luUHJldmlldyhpdGVtLmNvbXBhcmVWYWx1ZSlcIlxuICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cIml0ZW0uYXJpYUxhYmVsXCJcbiAgICAgICAgW2F0dHIuYXJpYS1kaXNhYmxlZF09XCIhaXRlbS5lbmFibGVkIHx8IG51bGxcIlxuICAgICAgICBbYXR0ci5hcmlhLXNlbGVjdGVkXT1cIl9pc1NlbGVjdGVkKGl0ZW0uY29tcGFyZVZhbHVlKVwiXG4gICAgICAgIChjbGljayk9XCJfY2VsbENsaWNrZWQoaXRlbSwgJGV2ZW50KVwiXG4gICAgICAgIFtzdHlsZS5wYWRkaW5nVG9wXT1cIl9jZWxsUGFkZGluZ1wiXG4gICAgICAgIFtzdHlsZS5wYWRkaW5nQm90dG9tXT1cIl9jZWxsUGFkZGluZ1wiXG4gICAgICA+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cInJkcy1jYWxlbmRhci1ib2R5LWNlbGwtY29udGVudCByZHMtZm9jdXMtaW5kaWNhdG9yXCJcbiAgICAgICAgICBbY2xhc3MucmRzLWNhbGVuZGFyLWJvZHktY2VsbC1jb250ZW50LWRpc2FibGVkXT1cIiFpdGVtLmVuYWJsZWRcIlxuICAgICAgICAgIFtjbGFzcy5yZHMtY2FsZW5kYXItYm9keS1zZWxlY3RlZF09XCJfaXNTZWxlY3RlZChpdGVtLmNvbXBhcmVWYWx1ZSlcIlxuICAgICAgICAgIFtjbGFzcy5yZHMtY2FsZW5kYXItYm9keS1jb21wYXJpc29uLWlkZW50aWNhbF09XCJcbiAgICAgICAgICAgIF9pc0NvbXBhcmlzb25JZGVudGljYWwoaXRlbS5jb21wYXJlVmFsdWUpXG4gICAgICAgICAgXCJcbiAgICAgICAgICBbY2xhc3MucmRzLWNhbGVuZGFyLWJvZHktdG9kYXldPVwidG9kYXlWYWx1ZSA9PT0gaXRlbS5jb21wYXJlVmFsdWVcIlxuICAgICAgICA+XG4gICAgICAgICAge3sgaXRlbS5kaXNwbGF5VmFsdWUgfX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZHMtY2FsZW5kYXItYm9keS1jZWxsLXByZXZpZXdcIj48L2Rpdj5cbiAgICAgIDwvdGQ+XG4gICAgfVxuICA8L3RyPlxufVxuIl19