import { ComponentPortal } from '@angular/cdk/portal';
import { booleanAttribute, ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, forwardRef, HostBinding, inject, Input, isDevMode, Output, ViewChild, ViewEncapsulation, } from '@angular/core';
import { DateAdapter, RDS_DATE_FORMATS } from './adapter';
import { Subject } from 'rxjs';
import { createMissingDateImplError } from './datepicker-errors';
import { RdsDatepickerIntl } from './datepicker.intl';
import { RdsMonthViewComponent } from './month-view.component';
import { getActiveOffset, isSameMultiYearView, RdsMultiYearViewComponent, yearsPerPage, } from './multi-year-view.component';
import { RdsYearViewComponent } from './year-view.component';
import { DateRange, RDS_SINGLE_DATE_SELECTION_MODEL_PROVIDER, } from './date-selection.model';
import * as i0 from "@angular/core";
import * as i1 from "@angular/cdk/a11y";
import * as i2 from "@angular/cdk/portal";
import * as i3 from "./month-view.component";
import * as i4 from "./year-view.component";
import * as i5 from "./multi-year-view.component";
import * as i6 from "../button/icon-button.component";
import * as i7 from "../icons/icon.component";
import * as i8 from "../toggle-button/toggle-button.component";
import * as i9 from "../toggle-button/toggle.directive";
let uniqueId = 0;
export class RdsCalendarComponent {
    get startAt() {
        return this._startAt;
    }
    set startAt(value) {
        this._startAt = this.dateAdapter.getValidDateOrNull(this.dateAdapter.deserialize(value));
    }
    get selected() {
        return this._selected;
    }
    set selected(value) {
        if (value instanceof DateRange) {
            this._selected = value;
        }
        else {
            this._selected = this.dateAdapter.getValidDateOrNull(this.dateAdapter.deserialize(value));
        }
    }
    get minDate() {
        return this._minDate;
    }
    set minDate(value) {
        this._minDate = this.dateAdapter.getValidDateOrNull(this.dateAdapter.deserialize(value));
    }
    get maxDate() {
        return this._maxDate;
    }
    set maxDate(value) {
        this._maxDate = this.dateAdapter.getValidDateOrNull(this.dateAdapter.deserialize(value));
    }
    set showToggle(value) {
        const newValue = booleanAttribute(value);
        if (this._showToggle !== newValue) {
            this._showToggle = newValue;
            this.stateChanges.next();
            this.cdr.markForCheck();
        }
    }
    get showToggle() {
        return this._showToggle;
    }
    get activeDate() {
        return this._clampedActiveDate;
    }
    set activeDate(value) {
        this._clampedActiveDate = this.dateAdapter.clampDate(value, this.minDate, this.maxDate);
        this.stateChanges.next();
        this.cdr.markForCheck();
    }
    get currentView() {
        return this._currentView;
    }
    set currentView(value) {
        const viewChangedResult = this._currentView !== value ? value : null;
        this._currentView = value;
        this._moveFocusOnNextTick = true;
        this.cdr.markForCheck();
        if (viewChangedResult) {
            this.viewChanged.emit(viewChangedResult);
        }
    }
    get availableViews() {
        return this._availableViews;
    }
    set availableViews(value) {
        this._availableViews = value;
        this._moveFocusOnNextTick = true;
        this.cdr.markForCheck();
    }
    constructor() {
        this.intl = inject(RdsDatepickerIntl);
        this.cdr = inject(ChangeDetectorRef);
        this.dateAdapter = inject(DateAdapter, {
            optional: true,
        });
        this.dateFormats = inject(RDS_DATE_FORMATS, {
            optional: true,
        });
        this.class = 'rds-calendar';
        this.headerComponent = null;
        this._calendarHeaderPortal = null;
        this._moveFocusOnNextTick = false;
        this._startAt = null;
        this.startView = 'month';
        this._selected = null;
        this._minDate = null;
        this._maxDate = null;
        this.dateFilter = null;
        this.dateClass = null;
        this.comparisonStart = null;
        this.comparisonEnd = null;
        this.isMonthDisabled = false;
        this.isMultiYearDisabled = false;
        this.isYearDisabled = false;
        this.selectedChange = new EventEmitter();
        this.yearSelected = new EventEmitter();
        this.monthSelected = new EventEmitter();
        this.viewChanged = new EventEmitter(true);
        this._userSelection = new EventEmitter();
        this.monthView = null;
        this.yearView = null;
        this.multiYearView = null;
        this._clampedActiveDate = null;
        this._currentView = null;
        this._availableViews = ['month', 'year', 'multi-year'];
        this._showToggle = null;
        this.stateChanges = new Subject();
        if (!this.dateAdapter && isDevMode()) {
            throw createMissingDateImplError('DateAdapter');
        }
        if (!this.dateFormats && isDevMode()) {
            throw createMissingDateImplError('RDS_DATE_FORMATS');
        }
        this._intlChanges = this.intl.changes.subscribe(() => {
            this.cdr.markForCheck();
            this.stateChanges.next();
        });
    }
    ngAfterContentInit() {
        this._calendarHeaderPortal = new ComponentPortal(this.headerComponent || RdsCalendarHeaderComponent);
        this.activeDate = this.startAt || this.dateAdapter.today();
        this._currentView = this.startView;
    }
    ngAfterViewChecked() {
        if (this._moveFocusOnNextTick) {
            this._moveFocusOnNextTick = false;
            this.focusActiveCell();
        }
    }
    ngOnDestroy() {
        this._intlChanges.unsubscribe();
        this.stateChanges.complete();
    }
    ngOnChanges(changes) {
        const change = changes['minDate'] || changes['maxDate'] || changes['dateFilter'];
        if (change && !change.firstChange) {
            const view = this._getCurrentViewComponent();
            if (view) {
                this.cdr.detectChanges();
                view._init();
            }
        }
        this.stateChanges.next();
    }
    focusActiveCell() {
        this._getCurrentViewComponent()?._focusActiveCell(false);
    }
    updateTodaysDate() {
        const currentView = this.currentView;
        let view;
        if (currentView === 'month') {
            view = this.monthView;
        }
        else if (currentView === 'year') {
            view = this.yearView;
        }
        else {
            view = this.multiYearView;
        }
        view?._init();
    }
    _dateSelected(event) {
        const date = event.value;
        if (date &&
            !this.dateAdapter.sameDate(this.activeDate, date, 'month') &&
            !(this.selected instanceof DateRange)) {
            this.activeDate = date;
        }
        if (this.selected instanceof DateRange ||
            (date && !this.dateAdapter.sameDate(date, this.selected))) {
            this.selectedChange.emit(date);
        }
        this._userSelection.emit(event);
    }
    _yearSelectedInMultiYearView(event) {
        const normalizedYear = this.dateAdapter.createDate(this.dateAdapter.getYear(event.value), 0, 1);
        this.yearSelected.emit(normalizedYear);
        this._goToDateInViewIfAvailable(event, normalizedYear, 'year');
    }
    _monthSelectedInYearView(event) {
        const normalizedMonth = this.dateAdapter.createDate(this.dateAdapter.getYear(event.value), this.dateAdapter.getMonth(event.value), 1);
        this.monthSelected.emit(normalizedMonth);
        this._goToDateInViewIfAvailable(event, normalizedMonth, 'month');
    }
    _goToDateInViewIfAvailable(event, normalizedDate, view) {
        this.activeDate = event.value;
        if (view && this.availableViews.includes(view)) {
            this.currentView = view;
        }
        else {
            this._dateSelected({
                value: this.dateAdapter.clone(normalizedDate),
                event: event.event,
            });
        }
    }
    _getCurrentViewComponent() {
        return this.monthView || this.yearView || this.multiYearView;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsCalendarComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.1", type: RdsCalendarComponent, selector: "rds-calendar", inputs: { headerComponent: "headerComponent", startAt: "startAt", startView: "startView", selected: "selected", minDate: "minDate", maxDate: "maxDate", dateFilter: "dateFilter", dateClass: "dateClass", comparisonStart: "comparisonStart", comparisonEnd: "comparisonEnd", isMonthDisabled: ["isMonthDisabled", "isMonthDisabled", booleanAttribute], isMultiYearDisabled: ["isMultiYearDisabled", "isMultiYearDisabled", booleanAttribute], isYearDisabled: ["isYearDisabled", "isYearDisabled", booleanAttribute], showToggle: "showToggle", availableViews: "availableViews" }, outputs: { selectedChange: "selectedChange", yearSelected: "yearSelected", monthSelected: "monthSelected", viewChanged: "viewChanged", _userSelection: "_userSelection" }, host: { properties: { "class": "this.class" } }, providers: [RDS_SINGLE_DATE_SELECTION_MODEL_PROVIDER], viewQueries: [{ propertyName: "monthView", first: true, predicate: RdsMonthViewComponent, descendants: true }, { propertyName: "yearView", first: true, predicate: RdsYearViewComponent, descendants: true }, { propertyName: "multiYearView", first: true, predicate: RdsMultiYearViewComponent, descendants: true }], exportAs: ["rdsCalendar"], usesOnChanges: true, ngImport: i0, template: "<ng-template [cdkPortalOutlet]=\"_calendarHeaderPortal\" />\n\n<div class=\"rds-calendar-content\" cdkMonitorSubtreeFocus tabindex=\"-1\">\n  @switch (currentView) {\n    @case ('month') {\n      <rds-month-view\n        [(activeDate)]=\"activeDate\"\n        [selected]=\"selected\"\n        [dateFilter]=\"dateFilter\"\n        [maxDate]=\"maxDate\"\n        [minDate]=\"minDate\"\n        [dateClass]=\"dateClass\"\n        [comparisonStart]=\"comparisonStart\"\n        [comparisonEnd]=\"comparisonEnd\"\n        (_userSelection)=\"_dateSelected($event)\"\n      />\n    }\n    @case ('year') {\n      <rds-year-view\n        [(activeDate)]=\"activeDate\"\n        [selected]=\"selected\"\n        [dateFilter]=\"dateFilter\"\n        [maxDate]=\"maxDate\"\n        [minDate]=\"minDate\"\n        [dateClass]=\"dateClass\"\n        (monthSelected)=\"_monthSelectedInYearView($event)\"\n      />\n    }\n    @case ('multi-year') {\n      <rds-multi-year-view\n        [(activeDate)]=\"activeDate\"\n        [selected]=\"selected\"\n        [dateFilter]=\"dateFilter\"\n        [maxDate]=\"maxDate\"\n        [minDate]=\"minDate\"\n        [dateClass]=\"dateClass\"\n        (yearSelected)=\"_yearSelectedInMultiYearView($event)\"\n      />\n    }\n  }\n</div>\n", styles: [".rds-calendar{display:block;background:var(--rds-color-bg-base-box)}.rds-calendar-header{padding:16px 16px 0;border-bottom:1px solid var(--rds-color-grey-2);margin-bottom:12px}.rds-calendar-header .rds-calendar-controls-button-wrapper{display:inline-flex}.rds-calendar-content{padding:0 16px;outline:none}.rds-calendar-controls{display:flex;justify-content:flex-start;margin-bottom:16px;align-items:center}.rds-calendar-controls.rds-calendar-view-mode{justify-content:flex-start;margin-top:0}.rds-calendar-controls.rds-calendar-period-arrows{display:flex;justify-content:space-between}.rds-calendar-spacer{flex:1 1 auto}.rds-calendar-period-button{min-width:0}.rds-calendar-period-button-text{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-calendar-arrow{display:inline-block;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top-width:5px;border-top-style:solid;margin:0 0 0 5px;vertical-align:middle}.rds-calendar-arrow.rds-calendar-invert{transform:rotate(180deg)}[dir=rtl] .rds-calendar-arrow{margin:0 5px 0 0}.rds-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.rds-calendar-table-header th{font-size:14px;font-weight:400;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:var(--rds-color-low-contrast);text-align:center;padding:0;height:40px}.rds-calendar-table-header th.rds-calendar-table-header-divider{position:relative;height:0}.rds-calendar-table-header th.rds-calendar-table-header-divider:after{content:\"\";position:absolute;top:0;left:-16px;right:-16px;height:0}.rds-calendar-previous-button{margin-right:12px}\n"], dependencies: [{ kind: "directive", type: i1.CdkMonitorFocus, selector: "[cdkMonitorElementFocus], [cdkMonitorSubtreeFocus]", outputs: ["cdkFocusChange"], exportAs: ["cdkMonitorFocus"] }, { kind: "directive", type: i2.CdkPortalOutlet, selector: "[cdkPortalOutlet]", inputs: ["cdkPortalOutlet"], outputs: ["attached"], exportAs: ["cdkPortalOutlet"] }, { kind: "component", type: i3.RdsMonthViewComponent, selector: "rds-month-view", inputs: ["activeDate", "selected", "minDate", "maxDate", "dateFilter", "dateClass", "comparisonStart", "comparisonEnd"], outputs: ["selectedChange", "_userSelection", "activeDateChange"], exportAs: ["rdsMonthView"] }, { kind: "component", type: i4.RdsYearViewComponent, selector: "rds-year-view", inputs: ["activeDate", "selected", "minDate", "maxDate", "dateFilter", "dateClass"], outputs: ["selectedChange", "monthSelected", "activeDateChange"], exportAs: ["rdsYearView"] }, { kind: "component", type: i5.RdsMultiYearViewComponent, selector: "rds-multi-year-view", inputs: ["activeDate", "selected", "minDate", "maxDate", "dateFilter", "dateClass"], outputs: ["selectedChange", "yearSelected", "activeDateChange"], exportAs: ["rdsMultiYearView"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsCalendarComponent, decorators: [{
            type: Component,
            args: [{ selector: 'rds-calendar', exportAs: 'rdsCalendar', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, providers: [RDS_SINGLE_DATE_SELECTION_MODEL_PROVIDER], template: "<ng-template [cdkPortalOutlet]=\"_calendarHeaderPortal\" />\n\n<div class=\"rds-calendar-content\" cdkMonitorSubtreeFocus tabindex=\"-1\">\n  @switch (currentView) {\n    @case ('month') {\n      <rds-month-view\n        [(activeDate)]=\"activeDate\"\n        [selected]=\"selected\"\n        [dateFilter]=\"dateFilter\"\n        [maxDate]=\"maxDate\"\n        [minDate]=\"minDate\"\n        [dateClass]=\"dateClass\"\n        [comparisonStart]=\"comparisonStart\"\n        [comparisonEnd]=\"comparisonEnd\"\n        (_userSelection)=\"_dateSelected($event)\"\n      />\n    }\n    @case ('year') {\n      <rds-year-view\n        [(activeDate)]=\"activeDate\"\n        [selected]=\"selected\"\n        [dateFilter]=\"dateFilter\"\n        [maxDate]=\"maxDate\"\n        [minDate]=\"minDate\"\n        [dateClass]=\"dateClass\"\n        (monthSelected)=\"_monthSelectedInYearView($event)\"\n      />\n    }\n    @case ('multi-year') {\n      <rds-multi-year-view\n        [(activeDate)]=\"activeDate\"\n        [selected]=\"selected\"\n        [dateFilter]=\"dateFilter\"\n        [maxDate]=\"maxDate\"\n        [minDate]=\"minDate\"\n        [dateClass]=\"dateClass\"\n        (yearSelected)=\"_yearSelectedInMultiYearView($event)\"\n      />\n    }\n  }\n</div>\n", styles: [".rds-calendar{display:block;background:var(--rds-color-bg-base-box)}.rds-calendar-header{padding:16px 16px 0;border-bottom:1px solid var(--rds-color-grey-2);margin-bottom:12px}.rds-calendar-header .rds-calendar-controls-button-wrapper{display:inline-flex}.rds-calendar-content{padding:0 16px;outline:none}.rds-calendar-controls{display:flex;justify-content:flex-start;margin-bottom:16px;align-items:center}.rds-calendar-controls.rds-calendar-view-mode{justify-content:flex-start;margin-top:0}.rds-calendar-controls.rds-calendar-period-arrows{display:flex;justify-content:space-between}.rds-calendar-spacer{flex:1 1 auto}.rds-calendar-period-button{min-width:0}.rds-calendar-period-button-text{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-calendar-arrow{display:inline-block;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top-width:5px;border-top-style:solid;margin:0 0 0 5px;vertical-align:middle}.rds-calendar-arrow.rds-calendar-invert{transform:rotate(180deg)}[dir=rtl] .rds-calendar-arrow{margin:0 5px 0 0}.rds-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.rds-calendar-table-header th{font-size:14px;font-weight:400;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:var(--rds-color-low-contrast);text-align:center;padding:0;height:40px}.rds-calendar-table-header th.rds-calendar-table-header-divider{position:relative;height:0}.rds-calendar-table-header th.rds-calendar-table-header-divider:after{content:\"\";position:absolute;top:0;left:-16px;right:-16px;height:0}.rds-calendar-previous-button{margin-right:12px}\n"] }]
        }], ctorParameters: () => [], propDecorators: { class: [{
                type: HostBinding,
                args: ['class']
            }], headerComponent: [{
                type: Input
            }], startAt: [{
                type: Input
            }], startView: [{
                type: Input
            }], selected: [{
                type: Input
            }], minDate: [{
                type: Input
            }], maxDate: [{
                type: Input
            }], dateFilter: [{
                type: Input
            }], dateClass: [{
                type: Input
            }], comparisonStart: [{
                type: Input
            }], comparisonEnd: [{
                type: Input
            }], isMonthDisabled: [{
                type: Input,
                args: [{ transform: booleanAttribute }]
            }], isMultiYearDisabled: [{
                type: Input,
                args: [{ transform: booleanAttribute }]
            }], isYearDisabled: [{
                type: Input,
                args: [{ transform: booleanAttribute }]
            }], showToggle: [{
                type: Input
            }], selectedChange: [{
                type: Output
            }], yearSelected: [{
                type: Output
            }], monthSelected: [{
                type: Output
            }], viewChanged: [{
                type: Output
            }], _userSelection: [{
                type: Output
            }], monthView: [{
                type: ViewChild,
                args: [RdsMonthViewComponent]
            }], yearView: [{
                type: ViewChild,
                args: [RdsYearViewComponent]
            }], multiYearView: [{
                type: ViewChild,
                args: [RdsMultiYearViewComponent]
            }], availableViews: [{
                type: Input
            }] } });
export class RdsCalendarHeaderComponent {
    constructor() {
        this.cdr = inject(ChangeDetectorRef);
        this.intl = inject(RdsDatepickerIntl);
        this.calendar = inject(forwardRef(() => RdsCalendarComponent));
        this.dateAdapter = inject(DateAdapter);
        this.dateFormats = inject(RDS_DATE_FORMATS);
        this._buttonDescriptionId = `rds-calendar-button-${uniqueId++}`;
        this.calendar.stateChanges.subscribe(() => this.cdr.markForCheck());
    }
    get periodButtonText() {
        if (this.calendar.currentView === 'month') {
            return this.dateAdapter.format(this.calendar.activeDate, this.dateFormats.display.monthYearLabel);
        }
        if (this.calendar.currentView === 'year') {
            return this.dateAdapter.getYearName(this.calendar.activeDate);
        }
        const activeYear = this.dateAdapter.getYear(this.calendar.activeDate);
        const minYearOfPage = activeYear -
            getActiveOffset(this.dateAdapter, this.calendar.activeDate, this.calendar.minDate, this.calendar.maxDate);
        const maxYearOfPage = minYearOfPage + yearsPerPage - 1;
        const minYearName = this.dateAdapter.getYearName(this.dateAdapter.createDate(minYearOfPage, 0, 1));
        const maxYearName = this.dateAdapter.getYearName(this.dateAdapter.createDate(maxYearOfPage, 0, 1));
        return this.intl.formatYearRange(minYearName, maxYearName);
    }
    get periodButtonLabel() {
        return this.calendar.currentView === 'month'
            ? this.intl.switchToMultiYearViewLabel
            : this.intl.switchToMonthViewLabel;
    }
    get prevButtonLabel() {
        return {
            month: this.intl.prevMonthLabel,
            year: this.intl.prevYearLabel,
            'multi-year': this.intl.prevMultiYearLabel,
        }[this.calendar.currentView];
    }
    get nextButtonLabel() {
        return {
            month: this.intl.nextMonthLabel,
            year: this.intl.nextYearLabel,
            'multi-year': this.intl.nextMultiYearLabel,
        }[this.calendar.currentView];
    }
    currentPeriodClicked() {
        this.calendar.currentView =
            this.calendar.currentView == 'month' ? 'multi-year' : 'month';
    }
    previousClicked() {
        this.calendar.activeDate =
            this.calendar.currentView === 'month'
                ? this.dateAdapter.addCalendarMonths(this.calendar.activeDate, -1)
                : this.dateAdapter.addCalendarYears(this.calendar.activeDate, this.calendar.currentView === 'year' ? -1 : -yearsPerPage);
    }
    nextClicked() {
        this.calendar.activeDate =
            this.calendar.currentView === 'month'
                ? this.dateAdapter.addCalendarMonths(this.calendar.activeDate, 1)
                : this.dateAdapter.addCalendarYears(this.calendar.activeDate, this.calendar.currentView === 'year' ? 1 : yearsPerPage);
    }
    previousEnabled() {
        if (!this.calendar.minDate) {
            return true;
        }
        return (!this.calendar.minDate ||
            !this._isSameView(this.calendar.activeDate, this.calendar.minDate));
    }
    nextEnabled() {
        return (!this.calendar.maxDate ||
            !this._isSameView(this.calendar.activeDate, this.calendar.maxDate));
    }
    _isSameView(date1, date2) {
        if (this.calendar.currentView === 'month') {
            return (this.dateAdapter.getYear(date1) === this.dateAdapter.getYear(date2) &&
                this.dateAdapter.getMonth(date1) === this.dateAdapter.getMonth(date2));
        }
        if (this.calendar.currentView === 'year') {
            return (this.dateAdapter.getYear(date1) === this.dateAdapter.getYear(date2));
        }
        return isSameMultiYearView(this.dateAdapter, date1, date2, this.calendar.minDate, this.calendar.maxDate);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsCalendarHeaderComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.1", type: RdsCalendarHeaderComponent, selector: "rds-calendar-header", exportAs: ["rdsCalendarHeader"], ngImport: i0, template: "<div class=\"rds-calendar-header\">\n  @if (calendar.showToggle) {\n    <div class=\"rds-calendar-controls rds-calendar-view-mode\">\n      <rds-toggle\n        [(value)]=\"calendar.currentView\"\n        [attr.aria-label]=\"periodButtonLabel\"\n        [attr.aria-describedby]=\"_buttonDescriptionId\"\n        [attr.id]=\"_buttonDescriptionId\"\n        type=\"outlined\"\n        cdkAriaLive=\"polite\"\n      >\n        @if (calendar.availableViews.includes('month')) {\n          <rds-toggle-button [disabled]=\"calendar.isMonthDisabled\" value=\"month\"\n            >{{ intl.monthLabel }}\n          </rds-toggle-button>\n        }\n        @if (calendar.availableViews.includes('year')) {\n          <rds-toggle-button [disabled]=\"calendar.isYearDisabled\" value=\"year\"\n            >{{ intl.yearLabel }}\n          </rds-toggle-button>\n        }\n        @if (calendar.availableViews.includes('multi-year')) {\n          <rds-toggle-button\n            [disabled]=\"calendar.isMultiYearDisabled\"\n            value=\"multi-year\"\n            >{{ intl.multiYearLabel }}\n          </rds-toggle-button>\n        }\n      </rds-toggle>\n    </div>\n  }\n  <div class=\"rds-calendar-controls rds-calendar-period-arrows\">\n    <span\n      [attr.id]=\"_buttonDescriptionId\"\n      class=\"rds-calendar-period-button-text\"\n      >{{ periodButtonText }}</span\n    >\n    <div class=\"rds-calendar-controls-button-wrapper\">\n      <button\n        rds-icon-button\n        size=\"m\"\n        type=\"button\"\n        [attr.aria-label]=\"prevButtonLabel\"\n        [disabled]=\"!previousEnabled()\"\n        (click)=\"previousClicked()\"\n        class=\"rds-calendar-previous-button\"\n      >\n        <rds-icon icon=\"chevron_left\" namespace=\"filled\" />\n      </button>\n      <button\n        rds-icon-button\n        size=\"m\"\n        type=\"button\"\n        [attr.aria-label]=\"nextButtonLabel\"\n        [disabled]=\"!nextEnabled()\"\n        (click)=\"nextClicked()\"\n        class=\"rds-calendar-next-button\"\n      >\n        <rds-icon icon=\"chevron_right\" namespace=\"filled\" />\n      </button>\n    </div>\n    <ng-content />\n  </div>\n</div>\n", dependencies: [{ kind: "component", type: i6.RdsIconButtonComponent, selector: "\n    button[rds-icon-button],\n    button[rdsIconButton],\n    button[rds-icon-warning-button],\n    button[rdsIconWarningButton],\n  ", inputs: ["size"] }, { kind: "directive", type: i1.CdkAriaLive, selector: "[cdkAriaLive]", inputs: ["cdkAriaLive", "cdkAriaLiveDuration"], exportAs: ["cdkAriaLive"] }, { kind: "component", type: i7.RdsIconComponent, selector: "rds-icon", inputs: ["namespace", "icon"] }, { kind: "component", type: i8.RdsToggleButtonComponent, selector: "rds-toggle-button", inputs: ["aria-label", "aria-labelledby", "value", "checked", "disabled"], outputs: ["changed"] }, { kind: "directive", type: i9.RdsToggleDirective, selector: "rds-toggle", inputs: ["type", "disabled", "value"], outputs: ["valueChange"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsCalendarHeaderComponent, decorators: [{
            type: Component,
            args: [{ selector: 'rds-calendar-header', exportAs: 'rdsCalendarHeader', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, template: "<div class=\"rds-calendar-header\">\n  @if (calendar.showToggle) {\n    <div class=\"rds-calendar-controls rds-calendar-view-mode\">\n      <rds-toggle\n        [(value)]=\"calendar.currentView\"\n        [attr.aria-label]=\"periodButtonLabel\"\n        [attr.aria-describedby]=\"_buttonDescriptionId\"\n        [attr.id]=\"_buttonDescriptionId\"\n        type=\"outlined\"\n        cdkAriaLive=\"polite\"\n      >\n        @if (calendar.availableViews.includes('month')) {\n          <rds-toggle-button [disabled]=\"calendar.isMonthDisabled\" value=\"month\"\n            >{{ intl.monthLabel }}\n          </rds-toggle-button>\n        }\n        @if (calendar.availableViews.includes('year')) {\n          <rds-toggle-button [disabled]=\"calendar.isYearDisabled\" value=\"year\"\n            >{{ intl.yearLabel }}\n          </rds-toggle-button>\n        }\n        @if (calendar.availableViews.includes('multi-year')) {\n          <rds-toggle-button\n            [disabled]=\"calendar.isMultiYearDisabled\"\n            value=\"multi-year\"\n            >{{ intl.multiYearLabel }}\n          </rds-toggle-button>\n        }\n      </rds-toggle>\n    </div>\n  }\n  <div class=\"rds-calendar-controls rds-calendar-period-arrows\">\n    <span\n      [attr.id]=\"_buttonDescriptionId\"\n      class=\"rds-calendar-period-button-text\"\n      >{{ periodButtonText }}</span\n    >\n    <div class=\"rds-calendar-controls-button-wrapper\">\n      <button\n        rds-icon-button\n        size=\"m\"\n        type=\"button\"\n        [attr.aria-label]=\"prevButtonLabel\"\n        [disabled]=\"!previousEnabled()\"\n        (click)=\"previousClicked()\"\n        class=\"rds-calendar-previous-button\"\n      >\n        <rds-icon icon=\"chevron_left\" namespace=\"filled\" />\n      </button>\n      <button\n        rds-icon-button\n        size=\"m\"\n        type=\"button\"\n        [attr.aria-label]=\"nextButtonLabel\"\n        [disabled]=\"!nextEnabled()\"\n        (click)=\"nextClicked()\"\n        class=\"rds-calendar-next-button\"\n      >\n        <rds-icon icon=\"chevron_right\" namespace=\"filled\" />\n      </button>\n    </div>\n    <ng-content />\n  </div>\n</div>\n" }]
        }], ctorParameters: () => [] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9hbmd1bGFyLWNvbXBvbmVudHMvc3JjL2xpYi9kYXRlcGlja2VyL2NhbGVuZGFyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvYW5ndWxhci1jb21wb25lbnRzL3NyYy9saWIvZGF0ZXBpY2tlci9jYWxlbmRhci5jb21wb25lbnQuaHRtbCIsIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvYW5ndWxhci1jb21wb25lbnRzL3NyYy9saWIvZGF0ZXBpY2tlci9jYWxlbmRhci1oZWFkZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGVBQWUsRUFBeUIsTUFBTSxxQkFBcUIsQ0FBQztBQUM3RSxPQUFPLEVBR0wsZ0JBQWdCLEVBQ2hCLHVCQUF1QixFQUN2QixpQkFBaUIsRUFDakIsU0FBUyxFQUNULFlBQVksRUFDWixVQUFVLEVBQ1YsV0FBVyxFQUNYLE1BQU0sRUFDTixLQUFLLEVBQ0wsU0FBUyxFQUdULE1BQU0sRUFFTixTQUFTLEVBQ1QsaUJBQWlCLEdBQ2xCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxXQUFXLEVBQUUsZ0JBQWdCLEVBQWtCLE1BQU0sV0FBVyxDQUFDO0FBQzFFLE9BQU8sRUFBRSxPQUFPLEVBQWdCLE1BQU0sTUFBTSxDQUFDO0FBSzdDLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2pFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQy9ELE9BQU8sRUFDTCxlQUFlLEVBQ2YsbUJBQW1CLEVBQ25CLHlCQUF5QixFQUN6QixZQUFZLEdBQ2IsTUFBTSw2QkFBNkIsQ0FBQztBQUNyQyxPQUFPLEVB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ZSwgUG9ydGFsIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL3BvcnRhbCc7XG5pbXBvcnQge1xuICBBZnRlckNvbnRlbnRJbml0LFxuICBBZnRlclZpZXdDaGVja2VkLFxuICBib29sZWFuQXR0cmlidXRlLFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgRXZlbnRFbWl0dGVyLFxuICBmb3J3YXJkUmVmLFxuICBIb3N0QmluZGluZyxcbiAgaW5qZWN0LFxuICBJbnB1dCxcbiAgaXNEZXZNb2RlLFxuICBPbkNoYW5nZXMsXG4gIE9uRGVzdHJveSxcbiAgT3V0cHV0LFxuICBTaW1wbGVDaGFuZ2VzLFxuICBWaWV3Q2hpbGQsXG4gIFZpZXdFbmNhcHN1bGF0aW9uLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERhdGVBZGFwdGVyLCBSRFNfREFURV9GT1JNQVRTLCBSZHNEYXRlRm9ybWF0cyB9IGZyb20gJy4vYWRhcHRlcic7XG5pbXBvcnQgeyBTdWJqZWN0LCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7XG4gIFJkc0NhbGVuZGFyQ2VsbENsYXNzRnVuY3Rpb24sXG4gIFJkc0NhbGVuZGFyVXNlckV2ZW50LFxufSBmcm9tICcuL2NhbGVuZGFyLWJvZHkuY29tcG9uZW50JztcbmltcG9ydCB7IGNyZWF0ZU1pc3NpbmdEYXRlSW1wbEVycm9yIH0gZnJvbSAnLi9kYXRlcGlja2VyLWVycm9ycyc7XG5pbXBvcnQgeyBSZHNEYXRlcGlja2VySW50bCB9IGZyb20gJy4vZGF0ZXBpY2tlci5pbnRsJztcbmltcG9ydCB7IFJkc01vbnRoVmlld0NvbXBvbmVudCB9IGZyb20gJy4vbW9udGgtdmlldy5jb21wb25lbnQnO1xuaW1wb3J0IHtcbiAgZ2V0QWN0aXZlT2Zmc2V0LFxuICBpc1NhbWVNdWx0aVllYXJWaWV3LFxuICBSZHNNdWx0aVllYXJWaWV3Q29tcG9uZW50LFxuICB5ZWFyc1BlclBhZ2UsXG59IGZyb20gJy4vbXVsdGkteWVhci12aWV3LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZHNZZWFyVmlld0NvbXBvbmVudCB9IGZyb20gJy4veWVhci12aWV3LmNvbXBvbmVudCc7XG5pbXBvcnQge1xuICBEYXRlUmFuZ2UsXG4gIFJEU19TSU5HTEVfREFURV9TRUxFQ1RJT05fTU9ERUxfUFJPVklERVIsXG59IGZyb20gJy4vZGF0ZS1zZWxlY3Rpb24ubW9kZWwnO1xuaW1wb3J0IHsgUmRzQ2FsZW5kYXJWaWV3IH0gZnJvbSAnLi9jYWxlbmRhci50eXBlcyc7XG5pbXBvcnQgeyBCb29sZWFuSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jZGsvY29lcmNpb24nO1xuXG5sZXQgdW5pcXVlSWQgPSAwO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdyZHMtY2FsZW5kYXInLFxuICB0ZW1wbGF0ZVVybDogJy4vY2FsZW5kYXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9jYWxlbmRhci5jb21wb25lbnQuc2NzcyddLFxuICBleHBvcnRBczogJ3Jkc0NhbGVuZGFyJyxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHByb3ZpZGVyczogW1JEU19TSU5HTEVfREFURV9TRUxFQ1RJT05fTU9ERUxfUFJPVklERVJdLFxufSlcbmV4cG9ydCBjbGFzcyBSZHNDYWxlbmRhckNvbXBvbmVudDxEPlxuICBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQsIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveSwgT25DaGFuZ2VzXG57XG4gIHByaXZhdGUgcmVhZG9ubHkgaW50bCA9IGluamVjdChSZHNEYXRlcGlja2VySW50bCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgY2RyID0gaW5qZWN0KENoYW5nZURldGVjdG9yUmVmKTtcbiAgcHJpdmF0ZSByZWFkb25seSBkYXRlQWRhcHRlciA9IGluamVjdChEYXRlQWRhcHRlciwge1xuICAgIG9wdGlvbmFsOiB0cnVlLFxuICB9KSBhcyBEYXRlQWRhcHRlcjxEPjtcbiAgcHJpdmF0ZSByZWFkb25seSBkYXRlRm9ybWF0cyA9IGluamVjdChSRFNfREFURV9GT1JNQVRTLCB7XG4gICAgb3B0aW9uYWw6IHRydWUsXG4gIH0pIGFzIFJkc0RhdGVGb3JtYXRzO1xuXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKSBjbGFzcyA9ICdyZHMtY2FsZW5kYXInO1xuXG4gIEBJbnB1dCgpIGhlYWRlckNvbXBvbmVudDogQ29tcG9uZW50VHlwZTx1bmtub3duPiB8IG51bGwgPSBudWxsO1xuXG4gIF9jYWxlbmRhckhlYWRlclBvcnRhbDogUG9ydGFsPHVua25vd24+IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBfaW50bENoYW5nZXM6IFN1YnNjcmlwdGlvbjtcblxuICBwcml2YXRlIF9tb3ZlRm9jdXNPbk5leHRUaWNrID0gZmFsc2U7XG5cbiAgQElucHV0KClcbiAgZ2V0IHN0YXJ0QXQoKTogRCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLl9zdGFydEF0O1xuICB9XG5cbiAgc2V0IHN0YXJ0QXQodmFsdWU6IEQgfCBudWxsKSB7XG4gICAgdGhpcy5fc3RhcnRBdCA9IHRoaXMuZGF0ZUFkYXB0ZXIuZ2V0VmFsaWREYXRlT3JOdWxsKFxuICAgICAgdGhpcy5kYXRlQWRhcHRlci5kZXNlcmlhbGl6ZSh2YWx1ZSksXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX3N0YXJ0QXQ6IEQgfCBudWxsID0gbnVsbDtcblxuICBASW5wdXQoKSBzdGFydFZpZXc6IFJkc0NhbGVuZGFyVmlldyA9ICdtb250aCc7XG5cbiAgQElucHV0KClcbiAgZ2V0IHNlbGVjdGVkKCk6IERhdGVSYW5nZTxEPiB8IEQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWQ7XG4gIH1cblxuICBzZXQgc2VsZWN0ZWQodmFsdWU6IERhdGVSYW5nZTxEPiB8IEQgfCBudWxsKSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZVJhbmdlKSB7XG4gICAgICB0aGlzLl9zZWxlY3RlZCA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zZWxlY3RlZCA9IHRoaXMuZGF0ZUFkYXB0ZXIuZ2V0VmFsaWREYXRlT3JOdWxsKFxuICAgICAgICB0aGlzLmRhdGVBZGFwdGVyLmRlc2VyaWFsaXplKHZhbHVlKSxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfc2VsZWN0ZWQ6IERhdGVSYW5nZTxEPiB8IEQgfCBudWxsID0gbnVsbDtcblxuICBASW5wdXQoKVxuICBnZXQgbWluRGF0ZSgpOiBEIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuX21pbkRhdGU7XG4gIH1cblxuICBzZXQgbWluRGF0ZSh2YWx1ZTogRCB8IG51bGwpIHtcbiAgICB0aGlzLl9taW5EYXRlID0gdGhpcy5kYXRlQWRhcHRlci5nZXRWYWxpZERhdGVPck51bGwoXG4gICAgICB0aGlzLmRhdGVBZGFwdGVyLmRlc2VyaWFsaXplKHZhbHVlKSxcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBfbWluRGF0ZTogRCB8IG51bGwgPSBudWxsO1xuXG4gIEBJbnB1dCgpXG4gIGdldCBtYXhEYXRlKCk6IEQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fbWF4RGF0ZTtcbiAgfVxuXG4gIHNldCBtYXhEYXRlKHZhbHVlOiBEIHwgbnVsbCkge1xuICAgIHRoaXMuX21heERhdGUgPSB0aGlzLmRhdGVBZGFwdGVyLmdldFZhbGlkRGF0ZU9yTnVsbChcbiAgICAgIHRoaXMuZGF0ZUFkYXB0ZXIuZGVzZXJpYWxpemUodmFsdWUpLFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9tYXhEYXRlOiBEIHwgbnVsbCA9IG51bGw7XG5cbiAgQElucHV0KCkgZGF0ZUZpbHRlcjogKChkYXRlOiBEKSA9PiBib29sZWFuKSB8IG51bGwgPSBudWxsO1xuXG4gIEBJbnB1dCgpIGRhdGVDbGFzczogUmRzQ2FsZW5kYXJDZWxsQ2xhc3NGdW5jdGlvbjxEPiB8IG51bGwgPSBudWxsO1xuXG4gIEBJbnB1dCgpIGNvbXBhcmlzb25TdGFydDogRCB8IG51bGwgPSBudWxsO1xuXG4gIEBJbnB1dCgpIGNvbXBhcmlzb25FbmQ6IEQgfCBudWxsID0gbnVsbDtcblxuICBASW5wdXQoeyB0cmFuc2Zvcm06IGJvb2xlYW5BdHRyaWJ1dGUgfSkgaXNNb250aERpc2FibGVkID0gZmFsc2U7XG5cbiAgQElucHV0KHsgdHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlIH0pIGlzTXVsdGlZZWFyRGlzYWJsZWQgPSBmYWxzZTtcblxuICBASW5wdXQoeyB0cmFuc2Zvcm06IGJvb2xlYW5BdHRyaWJ1dGUgfSkgaXNZZWFyRGlzYWJsZWQgPSBmYWxzZTtcblxuICBASW5wdXQoKVxuICBzZXQgc2hvd1RvZ2dsZSh2YWx1ZTogQm9vbGVhbklucHV0IHwgbnVsbCkge1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gYm9vbGVhbkF0dHJpYnV0ZSh2YWx1ZSk7XG5cbiAgICBpZiAodGhpcy5fc2hvd1RvZ2dsZSAhPT0gbmV3VmFsdWUpIHtcbiAgICAgIHRoaXMuX3Nob3dUb2dnbGUgPSBuZXdWYWx1ZTtcbiAgICAgIHRoaXMuc3RhdGVDaGFuZ2VzLm5leHQoKTtcbiAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzaG93VG9nZ2xlKCk6IGJvb2xlYW4gfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fc2hvd1RvZ2dsZTtcbiAgfVxuXG4gIEBPdXRwdXQoKSByZWFkb25seSBzZWxlY3RlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8RCB8IG51bGw+KCk7XG5cbiAgQE91dHB1dCgpIHJlYWRvbmx5IHllYXJTZWxlY3RlZCA9IG5ldyBFdmVudEVtaXR0ZXI8RD4oKTtcblxuICBAT3V0cHV0KCkgcmVhZG9ubHkgbW9udGhTZWxlY3RlZCA9IG5ldyBFdmVudEVtaXR0ZXI8RD4oKTtcblxuICBAT3V0cHV0KCkgcmVhZG9ubHkgdmlld0NoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyPFJkc0NhbGVuZGFyVmlldz4odHJ1ZSk7XG5cbiAgQE91dHB1dCgpIHJlYWRvbmx5IF91c2VyU2VsZWN0aW9uID0gbmV3IEV2ZW50RW1pdHRlcjxcbiAgICBSZHNDYWxlbmRhclVzZXJFdmVudDxEIHwgbnVsbD5cbiAgPigpO1xuXG4gIEBWaWV3Q2hpbGQoUmRzTW9udGhWaWV3Q29tcG9uZW50KSBtb250aFZpZXc6IFJkc01vbnRoVmlld0NvbXBvbmVudDxEPiB8IG51bGwgPVxuICAgIG51bGw7XG5cbiAgQFZpZXdDaGlsZChSZHNZZWFyVmlld0NvbXBvbmVudCkgeWVhclZpZXc6IFJkc1llYXJWaWV3Q29tcG9uZW50PEQ+IHwgbnVsbCA9XG4gICAgbnVsbDtcblxuICBAVmlld0NoaWxkKFJkc011bHRpWWVhclZpZXdDb21wb25lbnQpXG4gIG11bHRpWWVhclZpZXc6IFJkc011bHRpWWVhclZpZXdDb21wb25lbnQ8RD4gfCBudWxsID0gbnVsbDtcblxuICBnZXQgYWN0aXZlRGF0ZSgpOiBEIHtcbiAgICByZXR1cm4gdGhpcy5fY2xhbXBlZEFjdGl2ZURhdGUgYXMgRDtcbiAgfVxuXG4gIHNldCBhY3RpdmVEYXRlKHZhbHVlOiBEKSB7XG4gICAgdGhpcy5fY2xhbXBlZEFjdGl2ZURhdGUgPSB0aGlzLmRhdGVBZGFwdGVyLmNsYW1wRGF0ZShcbiAgICAgIHZhbHVlLFxuICAgICAgdGhpcy5taW5EYXRlLFxuICAgICAgdGhpcy5tYXhEYXRlLFxuICAgICk7XG4gICAgdGhpcy5zdGF0ZUNoYW5nZXMubmV4dCgpO1xuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xhbXBlZEFjdGl2ZURhdGU6IEQgfCBudWxsID0gbnVsbDtcblxuICBnZXQgY3VycmVudFZpZXcoKTogUmRzQ2FsZW5kYXJWaWV3IHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFZpZXcgYXMgUmRzQ2FsZW5kYXJWaWV3O1xuICB9XG5cbiAgc2V0IGN1cnJlbnRWaWV3KHZhbHVlOiBSZHNDYWxlbmRhclZpZXcpIHtcbiAgICBjb25zdCB2aWV3Q2hhbmdlZFJlc3VsdCA9IHRoaXMuX2N1cnJlbnRWaWV3ICE9PSB2YWx1ZSA/IHZhbHVlIDogbnVsbDtcbiAgICB0aGlzLl9jdXJyZW50VmlldyA9IHZhbHVlO1xuICAgIHRoaXMuX21vdmVGb2N1c09uTmV4dFRpY2sgPSB0cnVlO1xuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuXG4gICAgaWYgKHZpZXdDaGFuZ2VkUmVzdWx0KSB7XG4gICAgICB0aGlzLnZpZXdDaGFuZ2VkLmVtaXQodmlld0NoYW5nZWRSZXN1bHQpO1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGdldCBhdmFpbGFibGVWaWV3cygpOiBSZHNDYWxlbmRhclZpZXdbXSB7XG4gICAgcmV0dXJuIHRoaXMuX2F2YWlsYWJsZVZpZXdzO1xuICB9XG5cbiAgc2V0IGF2YWlsYWJsZVZpZXdzKHZhbHVlOiBSZHNDYWxlbmRhclZpZXdbXSkge1xuICAgIHRoaXMuX2F2YWlsYWJsZVZpZXdzID0gdmFsdWU7XG4gICAgdGhpcy5fbW92ZUZvY3VzT25OZXh0VGljayA9IHRydWU7XG4gICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICBwcml2YXRlIF9jdXJyZW50VmlldzogUmRzQ2FsZW5kYXJWaWV3IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX2F2YWlsYWJsZVZpZXdzOiBSZHNDYWxlbmRhclZpZXdbXSA9IFsnbW9udGgnLCAneWVhcicsICdtdWx0aS15ZWFyJ107XG4gIHByaXZhdGUgX3Nob3dUb2dnbGU6IGJvb2xlYW4gfCBudWxsID0gbnVsbDtcblxuICBzdGF0ZUNoYW5nZXMgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmICghdGhpcy5kYXRlQWRhcHRlciAmJiBpc0Rldk1vZGUoKSkge1xuICAgICAgdGhyb3cgY3JlYXRlTWlzc2luZ0RhdGVJbXBsRXJyb3IoJ0RhdGVBZGFwdGVyJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmRhdGVGb3JtYXRzICYmIGlzRGV2TW9kZSgpKSB7XG4gICAgICB0aHJvdyBjcmVhdGVNaXNzaW5nRGF0ZUltcGxFcnJvcignUkRTX0RBVEVfRk9STUFUUycpO1xuICAgIH1cblxuICAgIHRoaXMuX2ludGxDaGFuZ2VzID0gdGhpcy5pbnRsLmNoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgICAgdGhpcy5zdGF0ZUNoYW5nZXMubmV4dCgpO1xuICAgIH0pO1xuICB9XG5cbiAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQge1xuICAgIHRoaXMuX2NhbGVuZGFySGVhZGVyUG9ydGFsID0gbmV3IENvbXBvbmVudFBvcnRhbChcbiAgICAgIHRoaXMuaGVhZGVyQ29tcG9uZW50IHx8IFJkc0NhbGVuZGFySGVhZGVyQ29tcG9uZW50LFxuICAgICk7XG4gICAgdGhpcy5hY3RpdmVEYXRlID0gdGhpcy5zdGFydEF0IHx8IHRoaXMuZGF0ZUFkYXB0ZXIudG9kYXkoKTtcbiAgICB0aGlzLl9jdXJyZW50VmlldyA9IHRoaXMuc3RhcnRWaWV3O1xuICB9XG5cbiAgbmdBZnRlclZpZXdDaGVja2VkKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9tb3ZlRm9jdXNPbk5leHRUaWNrKSB7XG4gICAgICB0aGlzLl9tb3ZlRm9jdXNPbk5leHRUaWNrID0gZmFsc2U7XG4gICAgICB0aGlzLmZvY3VzQWN0aXZlQ2VsbCgpO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuX2ludGxDaGFuZ2VzLnVuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy5zdGF0ZUNoYW5nZXMuY29tcGxldGUoKTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICBjb25zdCBjaGFuZ2UgPVxuICAgICAgY2hhbmdlc1snbWluRGF0ZSddIHx8IGNoYW5nZXNbJ21heERhdGUnXSB8fCBjaGFuZ2VzWydkYXRlRmlsdGVyJ107XG5cbiAgICBpZiAoY2hhbmdlICYmICFjaGFuZ2UuZmlyc3RDaGFuZ2UpIHtcbiAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLl9nZXRDdXJyZW50Vmlld0NvbXBvbmVudCgpO1xuXG4gICAgICBpZiAodmlldykge1xuICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIHZpZXcuX2luaXQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlQ2hhbmdlcy5uZXh0KCk7XG4gIH1cblxuICBmb2N1c0FjdGl2ZUNlbGwoKTogdm9pZCB7XG4gICAgdGhpcy5fZ2V0Q3VycmVudFZpZXdDb21wb25lbnQoKT8uX2ZvY3VzQWN0aXZlQ2VsbChmYWxzZSk7XG4gIH1cblxuICB1cGRhdGVUb2RheXNEYXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnRWaWV3ID0gdGhpcy5jdXJyZW50VmlldztcbiAgICBsZXQgdmlldzpcbiAgICAgIHwgUmRzTW9udGhWaWV3Q29tcG9uZW50PEQ+XG4gICAgICB8IFJkc1llYXJWaWV3Q29tcG9uZW50PEQ+XG4gICAgICB8IFJkc011bHRpWWVhclZpZXdDb21wb25lbnQ8RD5cbiAgICAgIHwgbnVsbDtcblxuICAgIGlmIChjdXJyZW50VmlldyA9PT0gJ21vbnRoJykge1xuICAgICAgdmlldyA9IHRoaXMubW9udGhWaWV3O1xuICAgIH0gZWxzZSBpZiAoY3VycmVudFZpZXcgPT09ICd5ZWFyJykge1xuICAgICAgdmlldyA9IHRoaXMueWVhclZpZXc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZXcgPSB0aGlzLm11bHRpWWVhclZpZXc7XG4gICAgfVxuXG4gICAgdmlldz8uX2luaXQoKTtcbiAgfVxuXG4gIF9kYXRlU2VsZWN0ZWQoZXZlbnQ6IFJkc0NhbGVuZGFyVXNlckV2ZW50PEQgfCBudWxsPik6IHZvaWQge1xuICAgIGNvbnN0IGRhdGUgPSBldmVudC52YWx1ZTtcblxuICAgIGlmIChcbiAgICAgIGRhdGUgJiZcbiAgICAgICF0aGlzLmRhdGVBZGFwdGVyLnNhbWVEYXRlKHRoaXMuYWN0aXZlRGF0ZSwgZGF0ZSwgJ21vbnRoJykgJiZcbiAgICAgICEodGhpcy5zZWxlY3RlZCBpbnN0YW5jZW9mIERhdGVSYW5nZSlcbiAgICApIHtcbiAgICAgIHRoaXMuYWN0aXZlRGF0ZSA9IGRhdGU7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5zZWxlY3RlZCBpbnN0YW5jZW9mIERhdGVSYW5nZSB8fFxuICAgICAgKGRhdGUgJiYgIXRoaXMuZGF0ZUFkYXB0ZXIuc2FtZURhdGUoZGF0ZSwgdGhpcy5zZWxlY3RlZCkpXG4gICAgKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkQ2hhbmdlLmVtaXQoZGF0ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5fdXNlclNlbGVjdGlvbi5lbWl0KGV2ZW50KTtcbiAgfVxuXG4gIF95ZWFyU2VsZWN0ZWRJbk11bHRpWWVhclZpZXcoZXZlbnQ6IFJkc0NhbGVuZGFyVXNlckV2ZW50PEQ+KTogdm9pZCB7XG4gICAgY29uc3Qgbm9ybWFsaXplZFllYXIgPSB0aGlzLmRhdGVBZGFwdGVyLmNyZWF0ZURhdGUoXG4gICAgICB0aGlzLmRhdGVBZGFwdGVyLmdldFllYXIoZXZlbnQudmFsdWUpLFxuICAgICAgMCxcbiAgICAgIDEsXG4gICAgKTtcbiAgICB0aGlzLnllYXJTZWxlY3RlZC5lbWl0KG5vcm1hbGl6ZWRZZWFyKTtcbiAgICB0aGlzLl9nb1RvRGF0ZUluVmlld0lmQXZhaWxhYmxlKGV2ZW50LCBub3JtYWxpemVkWWVhciwgJ3llYXInKTtcbiAgfVxuXG4gIF9tb250aFNlbGVjdGVkSW5ZZWFyVmlldyhldmVudDogUmRzQ2FsZW5kYXJVc2VyRXZlbnQ8RD4pOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkTW9udGggPSB0aGlzLmRhdGVBZGFwdGVyLmNyZWF0ZURhdGUoXG4gICAgICB0aGlzLmRhdGVBZGFwdGVyLmdldFllYXIoZXZlbnQudmFsdWUpLFxuICAgICAgdGhpcy5kYXRlQWRhcHRlci5nZXRNb250aChldmVudC52YWx1ZSksXG4gICAgICAxLFxuICAgICk7XG4gICAgdGhpcy5tb250aFNlbGVjdGVkLmVtaXQobm9ybWFsaXplZE1vbnRoKTtcbiAgICB0aGlzLl9nb1RvRGF0ZUluVmlld0lmQXZhaWxhYmxlKGV2ZW50LCBub3JtYWxpemVkTW9udGgsICdtb250aCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ29Ub0RhdGVJblZpZXdJZkF2YWlsYWJsZShcbiAgICBldmVudDogUmRzQ2FsZW5kYXJVc2VyRXZlbnQ8RD4sXG4gICAgbm9ybWFsaXplZERhdGU6IEQsXG4gICAgdmlldz86IFJkc0NhbGVuZGFyVmlldyxcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5hY3RpdmVEYXRlID0gZXZlbnQudmFsdWU7XG5cbiAgICBpZiAodmlldyAmJiB0aGlzLmF2YWlsYWJsZVZpZXdzLmluY2x1ZGVzKHZpZXcpKSB7XG4gICAgICB0aGlzLmN1cnJlbnRWaWV3ID0gdmlldztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGF0ZVNlbGVjdGVkKHtcbiAgICAgICAgdmFsdWU6IHRoaXMuZGF0ZUFkYXB0ZXIuY2xvbmUobm9ybWFsaXplZERhdGUpLFxuICAgICAgICBldmVudDogZXZlbnQuZXZlbnQsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9nZXRDdXJyZW50Vmlld0NvbXBvbmVudCgpOlxuICAgIHwgUmRzTW9udGhWaWV3Q29tcG9uZW50PEQ+XG4gICAgfCBSZHNZZWFyVmlld0NvbXBvbmVudDxEPlxuICAgIHwgUmRzTXVsdGlZZWFyVmlld0NvbXBvbmVudDxEPlxuICAgIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMubW9udGhWaWV3IHx8IHRoaXMueWVhclZpZXcgfHwgdGhpcy5tdWx0aVllYXJWaWV3O1xuICB9XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3Jkcy1jYWxlbmRhci1oZWFkZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vY2FsZW5kYXItaGVhZGVyLmNvbXBvbmVudC5odG1sJyxcbiAgZXhwb3J0QXM6ICdyZHNDYWxlbmRhckhlYWRlcicsXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBSZHNDYWxlbmRhckhlYWRlckNvbXBvbmVudDxEPiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgY2RyID0gaW5qZWN0KENoYW5nZURldGVjdG9yUmVmKTtcbiAgcHVibGljIHJlYWRvbmx5IGludGwgPSBpbmplY3QoUmRzRGF0ZXBpY2tlckludGwpO1xuICBwdWJsaWMgcmVhZG9ubHkgY2FsZW5kYXIgPSBpbmplY3Q8UmRzQ2FsZW5kYXJDb21wb25lbnQ8RD4+KFxuICAgIGZvcndhcmRSZWYoKCkgPT4gUmRzQ2FsZW5kYXJDb21wb25lbnQpLFxuICApO1xuICBwcml2YXRlIHJlYWRvbmx5IGRhdGVBZGFwdGVyID0gaW5qZWN0PERhdGVBZGFwdGVyPEQ+PihEYXRlQWRhcHRlcik7XG4gIHByaXZhdGUgcmVhZG9ubHkgZGF0ZUZvcm1hdHMgPSBpbmplY3QoUkRTX0RBVEVfRk9STUFUUyk7XG5cbiAgX2J1dHRvbkRlc2NyaXB0aW9uSWQgPSBgcmRzLWNhbGVuZGFyLWJ1dHRvbi0ke3VuaXF1ZUlkKyt9YDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNhbGVuZGFyLnN0YXRlQ2hhbmdlcy5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jZHIubWFya0ZvckNoZWNrKCkpO1xuICB9XG5cbiAgZ2V0IHBlcmlvZEJ1dHRvblRleHQoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5jYWxlbmRhci5jdXJyZW50VmlldyA9PT0gJ21vbnRoJykge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0ZUFkYXB0ZXIuZm9ybWF0KFxuICAgICAgICB0aGlzLmNhbGVuZGFyLmFjdGl2ZURhdGUsXG4gICAgICAgIHRoaXMuZGF0ZUZvcm1hdHMuZGlzcGxheS5tb250aFllYXJMYWJlbCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2FsZW5kYXIuY3VycmVudFZpZXcgPT09ICd5ZWFyJykge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0ZUFkYXB0ZXIuZ2V0WWVhck5hbWUodGhpcy5jYWxlbmRhci5hY3RpdmVEYXRlKTtcbiAgICB9XG5cbiAgICBjb25zdCBhY3RpdmVZZWFyID0gdGhpcy5kYXRlQWRhcHRlci5nZXRZZWFyKHRoaXMuY2FsZW5kYXIuYWN0aXZlRGF0ZSk7XG4gICAgY29uc3QgbWluWWVhck9mUGFnZSA9XG4gICAgICBhY3RpdmVZZWFyIC1cbiAgICAgIGdldEFjdGl2ZU9mZnNldChcbiAgICAgICAgdGhpcy5kYXRlQWRhcHRlcixcbiAgICAgICAgdGhpcy5jYWxlbmRhci5hY3RpdmVEYXRlLFxuICAgICAgICB0aGlzLmNhbGVuZGFyLm1pbkRhdGUsXG4gICAgICAgIHRoaXMuY2FsZW5kYXIubWF4RGF0ZSxcbiAgICAgICk7XG4gICAgY29uc3QgbWF4WWVhck9mUGFnZSA9IG1pblllYXJPZlBhZ2UgKyB5ZWFyc1BlclBhZ2UgLSAxO1xuICAgIGNvbnN0IG1pblllYXJOYW1lID0gdGhpcy5kYXRlQWRhcHRlci5nZXRZZWFyTmFtZShcbiAgICAgIHRoaXMuZGF0ZUFkYXB0ZXIuY3JlYXRlRGF0ZShtaW5ZZWFyT2ZQYWdlLCAwLCAxKSxcbiAgICApO1xuICAgIGNvbnN0IG1heFllYXJOYW1lID0gdGhpcy5kYXRlQWRhcHRlci5nZXRZZWFyTmFtZShcbiAgICAgIHRoaXMuZGF0ZUFkYXB0ZXIuY3JlYXRlRGF0ZShtYXhZZWFyT2ZQYWdlLCAwLCAxKSxcbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMuaW50bC5mb3JtYXRZZWFyUmFuZ2UobWluWWVhck5hbWUsIG1heFllYXJOYW1lKTtcbiAgfVxuXG4gIGdldCBwZXJpb2RCdXR0b25MYWJlbCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNhbGVuZGFyLmN1cnJlbnRWaWV3ID09PSAnbW9udGgnXG4gICAgICA/IHRoaXMuaW50bC5zd2l0Y2hUb011bHRpWWVhclZpZXdMYWJlbFxuICAgICAgOiB0aGlzLmludGwuc3dpdGNoVG9Nb250aFZpZXdMYWJlbDtcbiAgfVxuXG4gIGdldCBwcmV2QnV0dG9uTGFiZWwoKTogc3RyaW5nIHtcbiAgICByZXR1cm4ge1xuICAgICAgbW9udGg6IHRoaXMuaW50bC5wcmV2TW9udGhMYWJlbCxcbiAgICAgIHllYXI6IHRoaXMuaW50bC5wcmV2WWVhckxhYmVsLFxuICAgICAgJ211bHRpLXllYXInOiB0aGlzLmludGwucHJldk11bHRpWWVhckxhYmVsLFxuICAgIH1bdGhpcy5jYWxlbmRhci5jdXJyZW50Vmlld107XG4gIH1cblxuICBnZXQgbmV4dEJ1dHRvbkxhYmVsKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1vbnRoOiB0aGlzLmludGwubmV4dE1vbnRoTGFiZWwsXG4gICAgICB5ZWFyOiB0aGlzLmludGwubmV4dFllYXJMYWJlbCxcbiAgICAgICdtdWx0aS15ZWFyJzogdGhpcy5pbnRsLm5leHRNdWx0aVllYXJMYWJlbCxcbiAgICB9W3RoaXMuY2FsZW5kYXIuY3VycmVudFZpZXddO1xuICB9XG5cbiAgY3VycmVudFBlcmlvZENsaWNrZWQoKTogdm9pZCB7XG4gICAgdGhpcy5jYWxlbmRhci5jdXJyZW50VmlldyA9XG4gICAgICB0aGlzLmNhbGVuZGFyLmN1cnJlbnRWaWV3ID09ICdtb250aCcgPyAnbXVsdGkteWVhcicgOiAnbW9udGgnO1xuICB9XG5cbiAgcHJldmlvdXNDbGlja2VkKCk6IHZvaWQge1xuICAgIHRoaXMuY2FsZW5kYXIuYWN0aXZlRGF0ZSA9XG4gICAgICB0aGlzLmNhbGVuZGFyLmN1cnJlbnRWaWV3ID09PSAnbW9udGgnXG4gICAgICAgID8gdGhpcy5kYXRlQWRhcHRlci5hZGRDYWxlbmRhck1vbnRocyh0aGlzLmNhbGVuZGFyLmFjdGl2ZURhdGUsIC0xKVxuICAgICAgICA6IHRoaXMuZGF0ZUFkYXB0ZXIuYWRkQ2FsZW5kYXJZZWFycyhcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXIuYWN0aXZlRGF0ZSxcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXIuY3VycmVudFZpZXcgPT09ICd5ZWFyJyA/IC0xIDogLXllYXJzUGVyUGFnZSxcbiAgICAgICAgICApO1xuICB9XG5cbiAgbmV4dENsaWNrZWQoKTogdm9pZCB7XG4gICAgdGhpcy5jYWxlbmRhci5hY3RpdmVEYXRlID1cbiAgICAgIHRoaXMuY2FsZW5kYXIuY3VycmVudFZpZXcgPT09ICdtb250aCdcbiAgICAgICAgPyB0aGlzLmRhdGVBZGFwdGVyLmFkZENhbGVuZGFyTW9udGhzKHRoaXMuY2FsZW5kYXIuYWN0aXZlRGF0ZSwgMSlcbiAgICAgICAgOiB0aGlzLmRhdGVBZGFwdGVyLmFkZENhbGVuZGFyWWVhcnMoXG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyLmFjdGl2ZURhdGUsXG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyLmN1cnJlbnRWaWV3ID09PSAneWVhcicgPyAxIDogeWVhcnNQZXJQYWdlLFxuICAgICAgICAgICk7XG4gIH1cblxuICBwcmV2aW91c0VuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmNhbGVuZGFyLm1pbkRhdGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAhdGhpcy5jYWxlbmRhci5taW5EYXRlIHx8XG4gICAgICAhdGhpcy5faXNTYW1lVmlldyh0aGlzLmNhbGVuZGFyLmFjdGl2ZURhdGUsIHRoaXMuY2FsZW5kYXIubWluRGF0ZSlcbiAgICApO1xuICB9XG5cbiAgbmV4dEVuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgICF0aGlzLmNhbGVuZGFyLm1heERhdGUgfHxcbiAgICAgICF0aGlzLl9pc1NhbWVWaWV3KHRoaXMuY2FsZW5kYXIuYWN0aXZlRGF0ZSwgdGhpcy5jYWxlbmRhci5tYXhEYXRlKVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9pc1NhbWVWaWV3KGRhdGUxOiBELCBkYXRlMjogRCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLmNhbGVuZGFyLmN1cnJlbnRWaWV3ID09PSAnbW9udGgnKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLmRhdGVBZGFwdGVyLmdldFllYXIoZGF0ZTEpID09PSB0aGlzLmRhdGVBZGFwdGVyLmdldFllYXIoZGF0ZTIpICYmXG4gICAgICAgIHRoaXMuZGF0ZUFkYXB0ZXIuZ2V0TW9udGgoZGF0ZTEpID09PSB0aGlzLmRhdGVBZGFwdGVyLmdldE1vbnRoKGRhdGUyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jYWxlbmRhci5jdXJyZW50VmlldyA9PT0gJ3llYXInKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLmRhdGVBZGFwdGVyLmdldFllYXIoZGF0ZTEpID09PSB0aGlzLmRhdGVBZGFwdGVyLmdldFllYXIoZGF0ZTIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBpc1NhbWVNdWx0aVllYXJWaWV3KFxuICAgICAgdGhpcy5kYXRlQWRhcHRlcixcbiAgICAgIGRhdGUxLFxuICAgICAgZGF0ZTIsXG4gICAgICB0aGlzLmNhbGVuZGFyLm1pbkRhdGUsXG4gICAgICB0aGlzLmNhbGVuZGFyLm1heERhdGUsXG4gICAgKTtcbiAgfVxufVxuIiwiPG5nLXRlbXBsYXRlIFtjZGtQb3J0YWxPdXRsZXRdPVwiX2NhbGVuZGFySGVhZGVyUG9ydGFsXCIgLz5cblxuPGRpdiBjbGFzcz1cInJkcy1jYWxlbmRhci1jb250ZW50XCIgY2RrTW9uaXRvclN1YnRyZWVGb2N1cyB0YWJpbmRleD1cIi0xXCI+XG4gIEBzd2l0Y2ggKGN1cnJlbnRWaWV3KSB7XG4gICAgQGNhc2UgKCdtb250aCcpIHtcbiAgICAgIDxyZHMtbW9udGgtdmlld1xuICAgICAgICBbKGFjdGl2ZURhdGUpXT1cImFjdGl2ZURhdGVcIlxuICAgICAgICBbc2VsZWN0ZWRdPVwic2VsZWN0ZWRcIlxuICAgICAgICBbZGF0ZUZpbHRlcl09XCJkYXRlRmlsdGVyXCJcbiAgICAgICAgW21heERhdGVdPVwibWF4RGF0ZVwiXG4gICAgICAgIFttaW5EYXRlXT1cIm1pbkRhdGVcIlxuICAgICAgICBbZGF0ZUNsYXNzXT1cImRhdGVDbGFzc1wiXG4gICAgICAgIFtjb21wYXJpc29uU3RhcnRdPVwiY29tcGFyaXNvblN0YXJ0XCJcbiAgICAgICAgW2NvbXBhcmlzb25FbmRdPVwiY29tcGFyaXNvbkVuZFwiXG4gICAgICAgIChfdXNlclNlbGVjdGlvbik9XCJfZGF0ZVNlbGVjdGVkKCRldmVudClcIlxuICAgICAgLz5cbiAgICB9XG4gICAgQGNhc2UgKCd5ZWFyJykge1xuICAgICAgPHJkcy15ZWFyLXZpZXdcbiAgICAgICAgWyhhY3RpdmVEYXRlKV09XCJhY3RpdmVEYXRlXCJcbiAgICAgICAgW3NlbGVjdGVkXT1cInNlbGVjdGVkXCJcbiAgICAgICAgW2RhdGVGaWx0ZXJdPVwiZGF0ZUZpbHRlclwiXG4gICAgICAgIFttYXhEYXRlXT1cIm1heERhdGVcIlxuICAgICAgICBbbWluRGF0ZV09XCJtaW5EYXRlXCJcbiAgICAgICAgW2RhdGVDbGFzc109XCJkYXRlQ2xhc3NcIlxuICAgICAgICAobW9udGhTZWxlY3RlZCk9XCJfbW9udGhTZWxlY3RlZEluWWVhclZpZXcoJGV2ZW50KVwiXG4gICAgICAvPlxuICAgIH1cbiAgICBAY2FzZSAoJ211bHRpLXllYXInKSB7XG4gICAgICA8cmRzLW11bHRpLXllYXItdmlld1xuICAgICAgICBbKGFjdGl2ZURhdGUpXT1cImFjdGl2ZURhdGVcIlxuICAgICAgICBbc2VsZWN0ZWRdPVwic2VsZWN0ZWRcIlxuICAgICAgICBbZGF0ZUZpbHRlcl09XCJkYXRlRmlsdGVyXCJcbiAgICAgICAgW21heERhdGVdPVwibWF4RGF0ZVwiXG4gICAgICAgIFttaW5EYXRlXT1cIm1pbkRhdGVcIlxuICAgICAgICBbZGF0ZUNsYXNzXT1cImRhdGVDbGFzc1wiXG4gICAgICAgICh5ZWFyU2VsZWN0ZWQpPVwiX3llYXJTZWxlY3RlZEluTXVsdGlZZWFyVmlldygkZXZlbnQpXCJcbiAgICAgIC8+XG4gICAgfVxuICB9XG48L2Rpdj5cbiIsIjxkaXYgY2xhc3M9XCJyZHMtY2FsZW5kYXItaGVhZGVyXCI+XG4gIEBpZiAoY2FsZW5kYXIuc2hvd1RvZ2dsZSkge1xuICAgIDxkaXYgY2xhc3M9XCJyZHMtY2FsZW5kYXItY29udHJvbHMgcmRzLWNhbGVuZGFyLXZpZXctbW9kZVwiPlxuICAgICAgPHJkcy10b2dnbGVcbiAgICAgICAgWyh2YWx1ZSldPVwiY2FsZW5kYXIuY3VycmVudFZpZXdcIlxuICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cInBlcmlvZEJ1dHRvbkxhYmVsXCJcbiAgICAgICAgW2F0dHIuYXJpYS1kZXNjcmliZWRieV09XCJfYnV0dG9uRGVzY3JpcHRpb25JZFwiXG4gICAgICAgIFthdHRyLmlkXT1cIl9idXR0b25EZXNjcmlwdGlvbklkXCJcbiAgICAgICAgdHlwZT1cIm91dGxpbmVkXCJcbiAgICAgICAgY2RrQXJpYUxpdmU9XCJwb2xpdGVcIlxuICAgICAgPlxuICAgICAgICBAaWYgKGNhbGVuZGFyLmF2YWlsYWJsZVZpZXdzLmluY2x1ZGVzKCdtb250aCcpKSB7XG4gICAgICAgICAgPHJkcy10b2dnbGUtYnV0dG9uIFtkaXNhYmxlZF09XCJjYWxlbmRhci5pc01vbnRoRGlzYWJsZWRcIiB2YWx1ZT1cIm1vbnRoXCJcbiAgICAgICAgICAgID57eyBpbnRsLm1vbnRoTGFiZWwgfX1cbiAgICAgICAgICA8L3Jkcy10b2dnbGUtYnV0dG9uPlxuICAgICAgICB9XG4gICAgICAgIEBpZiAoY2FsZW5kYXIuYXZhaWxhYmxlVmlld3MuaW5jbHVkZXMoJ3llYXInKSkge1xuICAgICAgICAgIDxyZHMtdG9nZ2xlLWJ1dHRvbiBbZGlzYWJsZWRdPVwiY2FsZW5kYXIuaXNZZWFyRGlzYWJsZWRcIiB2YWx1ZT1cInllYXJcIlxuICAgICAgICAgICAgPnt7IGludGwueWVhckxhYmVsIH19XG4gICAgICAgICAgPC9yZHMtdG9nZ2xlLWJ1dHRvbj5cbiAgICAgICAgfVxuICAgICAgICBAaWYgKGNhbGVuZGFyLmF2YWlsYWJsZVZpZXdzLmluY2x1ZGVzKCdtdWx0aS15ZWFyJykpIHtcbiAgICAgICAgICA8cmRzLXRvZ2dsZS1idXR0b25cbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCJjYWxlbmRhci5pc011bHRpWWVhckRpc2FibGVkXCJcbiAgICAgICAgICAgIHZhbHVlPVwibXVsdGkteWVhclwiXG4gICAgICAgICAgICA+e3sgaW50bC5tdWx0aVllYXJMYWJlbCB9fVxuICAgICAgICAgIDwvcmRzLXRvZ2dsZS1idXR0b24+XG4gICAgICAgIH1cbiAgICAgIDwvcmRzLXRvZ2dsZT5cbiAgICA8L2Rpdj5cbiAgfVxuICA8ZGl2IGNsYXNzPVwicmRzLWNhbGVuZGFyLWNvbnRyb2xzIHJkcy1jYWxlbmRhci1wZXJpb2QtYXJyb3dzXCI+XG4gICAgPHNwYW5cbiAgICAgIFthdHRyLmlkXT1cIl9idXR0b25EZXNjcmlwdGlvbklkXCJcbiAgICAgIGNsYXNzPVwicmRzLWNhbGVuZGFyLXBlcmlvZC1idXR0b24tdGV4dFwiXG4gICAgICA+e3sgcGVyaW9kQnV0dG9uVGV4dCB9fTwvc3BhblxuICAgID5cbiAgICA8ZGl2IGNsYXNzPVwicmRzLWNhbGVuZGFyLWNvbnRyb2xzLWJ1dHRvbi13cmFwcGVyXCI+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIHJkcy1pY29uLWJ1dHRvblxuICAgICAgICBzaXplPVwibVwiXG4gICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cInByZXZCdXR0b25MYWJlbFwiXG4gICAgICAgIFtkaXNhYmxlZF09XCIhcHJldmlvdXNFbmFibGVkKClcIlxuICAgICAgICAoY2xpY2spPVwicHJldmlvdXNDbGlja2VkKClcIlxuICAgICAgICBjbGFzcz1cInJkcy1jYWxlbmRhci1wcmV2aW91cy1idXR0b25cIlxuICAgICAgPlxuICAgICAgICA8cmRzLWljb24gaWNvbj1cImNoZXZyb25fbGVmdFwiIG5hbWVzcGFjZT1cImZpbGxlZFwiIC8+XG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgcmRzLWljb24tYnV0dG9uXG4gICAgICAgIHNpemU9XCJtXCJcbiAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwibmV4dEJ1dHRvbkxhYmVsXCJcbiAgICAgICAgW2Rpc2FibGVkXT1cIiFuZXh0RW5hYmxlZCgpXCJcbiAgICAgICAgKGNsaWNrKT1cIm5leHRDbGlja2VkKClcIlxuICAgICAgICBjbGFzcz1cInJkcy1jYWxlbmRhci1uZXh0LWJ1dHRvblwiXG4gICAgICA+XG4gICAgICAgIDxyZHMtaWNvbiBpY29uPVwiY2hldnJvbl9yaWdodFwiIG5hbWVzcGFjZT1cImZpbGxlZFwiIC8+XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgICA8bmctY29udGVudCAvPlxuICA8L2Rpdj5cbjwvZGl2PlxuIl19