import { FocusMonitor } from '@angular/cdk/a11y';
import { ContentObserver } from '@angular/cdk/observers';
import { Attribute, booleanAttribute, ChangeDetectionStrategy, ChangeDetectorRef, Component, ContentChild, DestroyRef, ElementRef, HostBinding, inject, Input, numberAttribute, Renderer2, ViewEncapsulation, } from '@angular/core';
import { RdsAvatarDescriptionDirective } from './avatar-description.directive';
import { RdsAvatarIconDirective } from './avatar-icon.directive';
import { RdsAvatarImageDirective } from './avatar-image.directive';
import { RdsAvatarInitialsDirective } from './avatar-initials.directive';
import { RdsAvatarLabelDirective } from './avatar-label.directive';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import { TAB_INDEX_DEFAULT, TAB_INDEX_NOT_FOCUSABLE } from '../utils';
import { RdsIconComponent } from '../icons';
import * as i0 from "@angular/core";
export class RdsAvatarComponent {
    get attrTabIndex() {
        return this.disableInteractions ? TAB_INDEX_NOT_FOCUSABLE : this.tabIndex;
    }
    get class() {
        const classes = ['rds-avatar', `rds-avatar-${this.size}`];
        if (this.disableInteractions) {
            classes.push('rds-avatar-disable-interactions');
        }
        return classes;
    }
    constructor(tabIndex) {
        this.focusMonitor = inject(FocusMonitor);
        this.elementRef = inject(ElementRef);
        this.renderer = inject(Renderer2);
        this.cdr = inject(ChangeDetectorRef);
        this.contentObserver = inject(ContentObserver);
        this.destroyRef = inject(DestroyRef);
        this.tabIndex = TAB_INDEX_DEFAULT;
        this.size = 'm';
        this.disableInteractions = false;
        this.tabIndex = numberAttribute(tabIndex, TAB_INDEX_DEFAULT);
    }
    ngAfterViewInit() {
        this.focusMonitor.monitor(this.elementRef, false);
        this.contentObserver
            .observe(this.elementRef)
            .pipe(takeUntilDestroyed(this.destroyRef))
            .subscribe(() => this.cdr.markForCheck());
    }
    ngOnDestroy() {
        this.focusMonitor.stopMonitoring(this.elementRef);
    }
    focus(origin = 'program', options) {
        this.focusMonitor.focusVia(this.elementRef.nativeElement, origin, options);
    }
    _hasHiddenStyle() {
        return this.elementRef.nativeElement.style.display === 'none';
    }
    _setHiddenStyles() {
        this.renderer.setStyle(this.elementRef.nativeElement, 'display', 'none');
    }
    _clearHiddenStyles() {
        this.renderer.removeStyle(this.elementRef.nativeElement, 'display');
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsAvatarComponent, deps: [{ token: 'tabindex', attribute: true }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.1", type: RdsAvatarComponent, isStandalone: true, selector: "rds-avatar", inputs: { tabIndex: ["tabIndex", "tabIndex", (v) => numberAttribute(v, TAB_INDEX_DEFAULT)], size: "size", disableInteractions: ["disableInteractions", "disableInteractions", booleanAttribute] }, host: { properties: { "tabIndex": "this.attrTabIndex", "class": "this.class" } }, queries: [{ propertyName: "avatarImage", first: true, predicate: RdsAvatarImageDirective, descendants: true }, { propertyName: "avatarIcon", first: true, predicate: RdsAvatarIconDirective, descendants: true }, { propertyName: "avatarInitials", first: true, predicate: RdsAvatarInitialsDirective, descendants: true }, { propertyName: "avatarLabel", first: true, predicate: RdsAvatarLabelDirective, descendants: true }, { propertyName: "avatarDescription", first: true, predicate: RdsAvatarDescriptionDirective, descendants: true }], ngImport: i0, template: `
    <div class="rds-avatar__container">
      <div class="rds-avatar-overlay"></div>
      <ng-content select="img[rds-avatar-image], img[rdsAvatarImage]" />
      @if (!avatarImage) {
        <ng-content
          select="rds-icon[rds-avatar-icon], rds-icon[rdsAvatarIcon]"
        />
      }
      @if (!avatarImage && !avatarIcon) {
        <ng-content select="[rds-avatar-initials], [rdsAvatarInitials]" />
      }
    </div>
    <div [class.rds-avatar__name-wrapper]="avatarLabel || avatarDescription">
      <ng-content
        select="rds-avatar-label, [rds-avatar-label], [rdsAvatarLabel]"
      />
      <ng-content
        select="rds-avatar-description, [rds-avatar-description], [rdsAvatarDescription]"
      />
    </div>
  `, isInline: true, styles: [".rds-avatar{display:flex;align-items:center}.rds-avatar.rds-avatar-xs{column-gap:8px}.rds-avatar.rds-avatar-xs .rds-avatar__container{font-size:12px;font-weight:400;line-height:16px;text-transform:none;letter-spacing:.5px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;border:1px solid var(--rds-color-avatar-stroke);width:24px;height:24px;flex-shrink:0}.rds-avatar.rds-avatar-xs .rds-avatar__container .rds-icon{width:16px;height:16px}.rds-avatar.rds-avatar-xs .rds-avatar__name-wrapper .rds-avatar-label{font-size:14px;font-weight:400;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-xs .rds-avatar__name-wrapper .rds-avatar-description{font-size:14px;font-weight:200;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-s{column-gap:8px}.rds-avatar.rds-avatar-s .rds-avatar__container{font-size:12px;font-weight:400;line-height:16px;text-transform:none;letter-spacing:.5px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;border:1px solid var(--rds-color-avatar-stroke);width:28px;height:28px;flex-shrink:0}.rds-avatar.rds-avatar-s .rds-avatar__container .rds-icon{width:18px;height:18px}.rds-avatar.rds-avatar-s .rds-avatar__name-wrapper .rds-avatar-label{font-size:14px;font-weight:400;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-s .rds-avatar__name-wrapper .rds-avatar-description{font-size:14px;font-weight:200;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-m{column-gap:12px}.rds-avatar.rds-avatar-m .rds-avatar__container{font-size:14px;font-weight:400;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;border:2px solid var(--rds-color-avatar-stroke);width:40px;height:40px;flex-shrink:0}.rds-avatar.rds-avatar-m .rds-avatar__container .rds-icon{width:24px;height:24px}.rds-avatar.rds-avatar-m .rds-avatar__name-wrapper .rds-avatar-label{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-m .rds-avatar__name-wrapper .rds-avatar-description{font-size:14px;font-weight:200;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-l{column-gap:16px}.rds-avatar.rds-avatar-l .rds-avatar__container{font-size:18px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;border:2px solid var(--rds-color-avatar-stroke);width:56px;height:56px;flex-shrink:0}.rds-avatar.rds-avatar-l .rds-avatar__container .rds-icon{width:32px;height:32px}.rds-avatar.rds-avatar-l .rds-avatar__name-wrapper .rds-avatar-label{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-l .rds-avatar__name-wrapper .rds-avatar-description{font-size:14px;font-weight:200;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-xl{column-gap:16px}.rds-avatar.rds-avatar-xl .rds-avatar__container{font-size:24px;font-weight:400;line-height:32px;text-transform:none;letter-spacing:0;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;border:2px solid var(--rds-color-avatar-stroke);width:80px;height:80px;flex-shrink:0}.rds-avatar.rds-avatar-xl .rds-avatar__container .rds-icon{width:48px;height:48px}.rds-avatar.rds-avatar-xl .rds-avatar__name-wrapper .rds-avatar-label{font-size:18px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-xl .rds-avatar__name-wrapper .rds-avatar-description{font-size:16px;font-weight:200;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar .rds-avatar__container{position:relative;display:flex;justify-content:center;align-items:center;border-radius:50%;background:var(--rds-color-avatar-bg);color:var(--rds-color-brand)}.rds-avatar .rds-avatar__name-wrapper{display:flex;flex-direction:column}.rds-avatar .rds-avatar-image{object-fit:cover;border-radius:50%;width:100%;height:100%}.rds-avatar.cdk-focused.cdk-keyboard-focused{outline:none}.rds-avatar.cdk-focused.cdk-keyboard-focused .rds-avatar__container{outline:2px solid var(--rds-color-stroke-active-focus)}.rds-avatar:hover .rds-avatar-overlay{display:block}.rds-avatar.rds-avatar-disable-interactions{pointer-events:none}.rds-avatar-group{display:flex;flex-direction:row}.rds-avatar-group .rds-avatar{display:unset}.rds-avatar-group .rds-avatar-xs:not(:first-child){margin-left:-8px}.rds-avatar-group .rds-avatar-s:not(:first-child){margin-left:-8px}.rds-avatar-group .rds-avatar-m:not(:first-child){margin-left:-16px}.rds-avatar-group .rds-avatar-l:not(:first-child){margin-left:-24px}.rds-avatar-group .rds-avatar-xl:not(:first-child){margin-left:-32px}.rds-avatar-group .rds-avatar__container.cdk-focused.cdk-keyboard-focused{outline:2px solid var(--rds-color-stroke-active-focus)}.rds-avatar-overlay{position:absolute;background:var(--rds-color-bg-transparent-hover-select);width:100%;height:100%;top:0;left:0;border-radius:50%;display:none}\n"], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsAvatarComponent, decorators: [{
            type: Component,
            args: [{ selector: 'rds-avatar', template: `
    <div class="rds-avatar__container">
      <div class="rds-avatar-overlay"></div>
      <ng-content select="img[rds-avatar-image], img[rdsAvatarImage]" />
      @if (!avatarImage) {
        <ng-content
          select="rds-icon[rds-avatar-icon], rds-icon[rdsAvatarIcon]"
        />
      }
      @if (!avatarImage && !avatarIcon) {
        <ng-content select="[rds-avatar-initials], [rdsAvatarInitials]" />
      }
    </div>
    <div [class.rds-avatar__name-wrapper]="avatarLabel || avatarDescription">
      <ng-content
        select="rds-avatar-label, [rds-avatar-label], [rdsAvatarLabel]"
      />
      <ng-content
        select="rds-avatar-description, [rds-avatar-description], [rdsAvatarDescription]"
      />
    </div>
  `, changeDetection: ChangeDetectionStrategy.OnPush, encapsulation: ViewEncapsulation.None, standalone: true, imports: [RdsIconComponent], styles: [".rds-avatar{display:flex;align-items:center}.rds-avatar.rds-avatar-xs{column-gap:8px}.rds-avatar.rds-avatar-xs .rds-avatar__container{font-size:12px;font-weight:400;line-height:16px;text-transform:none;letter-spacing:.5px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;border:1px solid var(--rds-color-avatar-stroke);width:24px;height:24px;flex-shrink:0}.rds-avatar.rds-avatar-xs .rds-avatar__container .rds-icon{width:16px;height:16px}.rds-avatar.rds-avatar-xs .rds-avatar__name-wrapper .rds-avatar-label{font-size:14px;font-weight:400;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-xs .rds-avatar__name-wrapper .rds-avatar-description{font-size:14px;font-weight:200;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-s{column-gap:8px}.rds-avatar.rds-avatar-s .rds-avatar__container{font-size:12px;font-weight:400;line-height:16px;text-transform:none;letter-spacing:.5px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;border:1px solid var(--rds-color-avatar-stroke);width:28px;height:28px;flex-shrink:0}.rds-avatar.rds-avatar-s .rds-avatar__container .rds-icon{width:18px;height:18px}.rds-avatar.rds-avatar-s .rds-avatar__name-wrapper .rds-avatar-label{font-size:14px;font-weight:400;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-s .rds-avatar__name-wrapper .rds-avatar-description{font-size:14px;font-weight:200;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-m{column-gap:12px}.rds-avatar.rds-avatar-m .rds-avatar__container{font-size:14px;font-weight:400;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;border:2px solid var(--rds-color-avatar-stroke);width:40px;height:40px;flex-shrink:0}.rds-avatar.rds-avatar-m .rds-avatar__container .rds-icon{width:24px;height:24px}.rds-avatar.rds-avatar-m .rds-avatar__name-wrapper .rds-avatar-label{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-m .rds-avatar__name-wrapper .rds-avatar-description{font-size:14px;font-weight:200;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-l{column-gap:16px}.rds-avatar.rds-avatar-l .rds-avatar__container{font-size:18px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;border:2px solid var(--rds-color-avatar-stroke);width:56px;height:56px;flex-shrink:0}.rds-avatar.rds-avatar-l .rds-avatar__container .rds-icon{width:32px;height:32px}.rds-avatar.rds-avatar-l .rds-avatar__name-wrapper .rds-avatar-label{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-l .rds-avatar__name-wrapper .rds-avatar-description{font-size:14px;font-weight:200;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-xl{column-gap:16px}.rds-avatar.rds-avatar-xl .rds-avatar__container{font-size:24px;font-weight:400;line-height:32px;text-transform:none;letter-spacing:0;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;border:2px solid var(--rds-color-avatar-stroke);width:80px;height:80px;flex-shrink:0}.rds-avatar.rds-avatar-xl .rds-avatar__container .rds-icon{width:48px;height:48px}.rds-avatar.rds-avatar-xl .rds-avatar__name-wrapper .rds-avatar-label{font-size:18px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar.rds-avatar-xl .rds-avatar__name-wrapper .rds-avatar-description{font-size:16px;font-weight:200;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-avatar .rds-avatar__container{position:relative;display:flex;justify-content:center;align-items:center;border-radius:50%;background:var(--rds-color-avatar-bg);color:var(--rds-color-brand)}.rds-avatar .rds-avatar__name-wrapper{display:flex;flex-direction:column}.rds-avatar .rds-avatar-image{object-fit:cover;border-radius:50%;width:100%;height:100%}.rds-avatar.cdk-focused.cdk-keyboard-focused{outline:none}.rds-avatar.cdk-focused.cdk-keyboard-focused .rds-avatar__container{outline:2px solid var(--rds-color-stroke-active-focus)}.rds-avatar:hover .rds-avatar-overlay{display:block}.rds-avatar.rds-avatar-disable-interactions{pointer-events:none}.rds-avatar-group{display:flex;flex-direction:row}.rds-avatar-group .rds-avatar{display:unset}.rds-avatar-group .rds-avatar-xs:not(:first-child){margin-left:-8px}.rds-avatar-group .rds-avatar-s:not(:first-child){margin-left:-8px}.rds-avatar-group .rds-avatar-m:not(:first-child){margin-left:-16px}.rds-avatar-group .rds-avatar-l:not(:first-child){margin-left:-24px}.rds-avatar-group .rds-avatar-xl:not(:first-child){margin-left:-32px}.rds-avatar-group .rds-avatar__container.cdk-focused.cdk-keyboard-focused{outline:2px solid var(--rds-color-stroke-active-focus)}.rds-avatar-overlay{position:absolute;background:var(--rds-color-bg-transparent-hover-select);width:100%;height:100%;top:0;left:0;border-radius:50%;display:none}\n"] }]
        }], ctorParameters: () => [{ type: undefined, decorators: [{
                    type: Attribute,
                    args: ['tabindex']
                }] }], propDecorators: { avatarImage: [{
                type: ContentChild,
                args: [RdsAvatarImageDirective]
            }], avatarIcon: [{
                type: ContentChild,
                args: [RdsAvatarIconDirective]
            }], avatarInitials: [{
                type: ContentChild,
                args: [RdsAvatarInitialsDirective]
            }], avatarLabel: [{
                type: ContentChild,
                args: [RdsAvatarLabelDirective]
            }], avatarDescription: [{
                type: ContentChild,
                args: [RdsAvatarDescriptionDirective]
            }], attrTabIndex: [{
                type: HostBinding,
                args: ['tabIndex']
            }], tabIndex: [{
                type: Input,
                args: [{ transform: (v) => numberAttribute(v, TAB_INDEX_DEFAULT) }]
            }], class: [{
                type: HostBinding,
                args: ['class']
            }], size: [{
                type: Input
            }], disableInteractions: [{
                type: Input,
                args: [{ transform: booleanAttribute }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZhdGFyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvYW5ndWxhci1jb21wb25lbnRzL3NyYy9saWIvYXZhdGFyL2F2YXRhci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFtQixZQUFZLEVBQWUsTUFBTSxtQkFBbUIsQ0FBQztBQUMvRSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDekQsT0FBTyxFQUVMLFNBQVMsRUFDVCxnQkFBZ0IsRUFDaEIsdUJBQXVCLEVBQ3ZCLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsWUFBWSxFQUNaLFVBQVUsRUFDVixVQUFVLEVBQ1YsV0FBVyxFQUNYLE1BQU0sRUFDTixLQUFLLEVBQ0wsZUFBZSxFQUVmLFNBQVMsRUFDVCxpQkFBaUIsR0FDbEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDL0UsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDakUsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDbkUsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDekUsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDbkUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDaEUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLHVCQUF1QixFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQ3RFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLFVBQVUsQ0FBQzs7QUFrQzVDLE1BQU0sT0FBTyxrQkFBa0I7SUFrQjdCLElBQ0ksWUFBWTtRQUNkLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyx1QkFBdUIs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QkFDaEMsaUJBQWlCLENBQUMsSUFBSSxjQUN6QixJQUFJLFdBQ1AsQ0FBQyxnQkFBZ0IsQ0FBQzs7MEJBMkNkLFNBQVM7MkJBQUMsVUFBVTt5Q0EvQk0sV0FBVztzQkFBakQsWUFBWTt1QkFBQyx1QkFBdUI7Z0JBQ0MsVUFBVTtzQkFBL0MsWUFBWTt1QkFBQyxzQkFBc0I7Z0JBRXBDLGNBQWM7c0JBRGIsWUFBWTt1QkFBQywwQkFBMEI7Z0JBRUQsV0FBVztzQkFBakQsWUFBWTt1QkFBQyx1QkFBdUI7Z0JBRXJDLGlCQUFpQjtzQkFEaEIsWUFBWTt1QkFBQyw2QkFBNkI7Z0JBSXZDLFlBQVk7c0JBRGYsV0FBVzt1QkFBQyxVQUFVO2dCQU12QixRQUFRO3NCQURQLEtBQUs7dUJBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFVLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxDQUFDLEVBQUUsaUJBQWlCLENBQUMsRUFBRTtnQkFHakQsS0FBSztzQkFBOUIsV0FBVzt1QkFBQyxPQUFPO2dCQVVYLElBQUk7c0JBQVosS0FBSztnQkFHTixtQkFBbUI7c0JBRGxCLEtBQUs7dUJBQUMsRUFBRSxTQUFTLEVBQUUsZ0JBQWdCLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGb2N1c2FibGVPcHRpb24sIEZvY3VzTW9uaXRvciwgRm9jdXNPcmlnaW4gfSBmcm9tICdAYW5ndWxhci9jZGsvYTExeSc7XG5pbXBvcnQgeyBDb250ZW50T2JzZXJ2ZXIgfSBmcm9tICdAYW5ndWxhci9jZGsvb2JzZXJ2ZXJzJztcbmltcG9ydCB7XG4gIEFmdGVyVmlld0luaXQsXG4gIEF0dHJpYnV0ZSxcbiAgYm9vbGVhbkF0dHJpYnV0ZSxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIENvbnRlbnRDaGlsZCxcbiAgRGVzdHJveVJlZixcbiAgRWxlbWVudFJlZixcbiAgSG9zdEJpbmRpbmcsXG4gIGluamVjdCxcbiAgSW5wdXQsXG4gIG51bWJlckF0dHJpYnV0ZSxcbiAgT25EZXN0cm95LFxuICBSZW5kZXJlcjIsXG4gIFZpZXdFbmNhcHN1bGF0aW9uLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJkc0F2YXRhckRlc2NyaXB0aW9uRGlyZWN0aXZlIH0gZnJvbSAnLi9hdmF0YXItZGVzY3JpcHRpb24uZGlyZWN0aXZlJztcbmltcG9ydCB7IFJkc0F2YXRhckljb25EaXJlY3RpdmUgfSBmcm9tICcuL2F2YXRhci1pY29uLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBSZHNBdmF0YXJJbWFnZURpcmVjdGl2ZSB9IGZyb20gJy4vYXZhdGFyLWltYWdlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBSZHNBdmF0YXJJbml0aWFsc0RpcmVjdGl2ZSB9IGZyb20gJy4vYXZhdGFyLWluaXRpYWxzLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBSZHNBdmF0YXJMYWJlbERpcmVjdGl2ZSB9IGZyb20gJy4vYXZhdGFyLWxhYmVsLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyB0YWtlVW50aWxEZXN0cm95ZWQgfSBmcm9tICdAYW5ndWxhci9jb3JlL3J4anMtaW50ZXJvcCc7XG5pbXBvcnQgeyBUQUJfSU5ERVhfREVGQVVMVCwgVEFCX0lOREVYX05PVF9GT0NVU0FCTEUgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBSZHNJY29uQ29tcG9uZW50IH0gZnJvbSAnLi4vaWNvbnMnO1xuXG5leHBvcnQgdHlwZSBSZHNBdmF0YXJTaXplID0gJ3hzJyB8ICdzJyB8ICdtJyB8ICdsJyB8ICd4bCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3Jkcy1hdmF0YXInLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgY2xhc3M9XCJyZHMtYXZhdGFyX19jb250YWluZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJyZHMtYXZhdGFyLW92ZXJsYXlcIj48L2Rpdj5cbiAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cImltZ1tyZHMtYXZhdGFyLWltYWdlXSwgaW1nW3Jkc0F2YXRhckltYWdlXVwiIC8+XG4gICAgICBAaWYgKCFhdmF0YXJJbWFnZSkge1xuICAgICAgICA8bmctY29udGVudFxuICAgICAgICAgIHNlbGVjdD1cInJkcy1pY29uW3Jkcy1hdmF0YXItaWNvbl0sIHJkcy1pY29uW3Jkc0F2YXRhckljb25dXCJcbiAgICAgICAgLz5cbiAgICAgIH1cbiAgICAgIEBpZiAoIWF2YXRhckltYWdlICYmICFhdmF0YXJJY29uKSB7XG4gICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIltyZHMtYXZhdGFyLWluaXRpYWxzXSwgW3Jkc0F2YXRhckluaXRpYWxzXVwiIC8+XG4gICAgICB9XG4gICAgPC9kaXY+XG4gICAgPGRpdiBbY2xhc3MucmRzLWF2YXRhcl9fbmFtZS13cmFwcGVyXT1cImF2YXRhckxhYmVsIHx8IGF2YXRhckRlc2NyaXB0aW9uXCI+XG4gICAgICA8bmctY29udGVudFxuICAgICAgICBzZWxlY3Q9XCJyZHMtYXZhdGFyLWxhYmVsLCBbcmRzLWF2YXRhci1sYWJlbF0sIFtyZHNBdmF0YXJMYWJlbF1cIlxuICAgICAgLz5cbiAgICAgIDxuZy1jb250ZW50XG4gICAgICAgIHNlbGVjdD1cInJkcy1hdmF0YXItZGVzY3JpcHRpb24sIFtyZHMtYXZhdGFyLWRlc2NyaXB0aW9uXSwgW3Jkc0F2YXRhckRlc2NyaXB0aW9uXVwiXG4gICAgICAvPlxuICAgIDwvZGl2PlxuICBgLFxuICBzdHlsZVVybHM6IFsnLi9hdmF0YXIuY29tcG9uZW50LnNjc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtSZHNJY29uQ29tcG9uZW50XSxcbn0pXG5leHBvcnQgY2xhc3MgUmRzQXZhdGFyQ29tcG9uZW50XG4gIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBGb2N1c2FibGVPcHRpb25cbntcbiAgcHJpdmF0ZSByZWFkb25seSBmb2N1c01vbml0b3IgPSBpbmplY3QoRm9jdXNNb25pdG9yKTtcbiAgcHJpdmF0ZSByZWFkb25seSBlbGVtZW50UmVmID0gaW5qZWN0KEVsZW1lbnRSZWYpO1xuICBwcml2YXRlIHJlYWRvbmx5IHJlbmRlcmVyID0gaW5qZWN0KFJlbmRlcmVyMik7XG4gIHByaXZhdGUgcmVhZG9ubHkgY2RyID0gaW5qZWN0KENoYW5nZURldGVjdG9yUmVmKTtcbiAgcHJpdmF0ZSByZWFkb25seSBjb250ZW50T2JzZXJ2ZXIgPSBpbmplY3QoQ29udGVudE9ic2VydmVyKTtcbiAgcHJpdmF0ZSByZWFkb25seSBkZXN0cm95UmVmID0gaW5qZWN0KERlc3Ryb3lSZWYpO1xuXG4gIEBDb250ZW50Q2hpbGQoUmRzQXZhdGFySW1hZ2VEaXJlY3RpdmUpIGF2YXRhckltYWdlOiBSZHNBdmF0YXJJbWFnZURpcmVjdGl2ZTtcbiAgQENvbnRlbnRDaGlsZChSZHNBdmF0YXJJY29uRGlyZWN0aXZlKSBhdmF0YXJJY29uOiBSZHNBdmF0YXJJY29uRGlyZWN0aXZlO1xuICBAQ29udGVudENoaWxkKFJkc0F2YXRhckluaXRpYWxzRGlyZWN0aXZlKVxuICBhdmF0YXJJbml0aWFsczogUmRzQXZhdGFySW5pdGlhbHNEaXJlY3RpdmU7XG4gIEBDb250ZW50Q2hpbGQoUmRzQXZhdGFyTGFiZWxEaXJlY3RpdmUpIGF2YXRhckxhYmVsOiBSZHNBdmF0YXJMYWJlbERpcmVjdGl2ZTtcbiAgQENvbnRlbnRDaGlsZChSZHNBdmF0YXJEZXNjcmlwdGlvbkRpcmVjdGl2ZSlcbiAgYXZhdGFyRGVzY3JpcHRpb246IFJkc0F2YXRhckRlc2NyaXB0aW9uRGlyZWN0aXZlO1xuXG4gIEBIb3N0QmluZGluZygndGFiSW5kZXgnKVxuICBnZXQgYXR0clRhYkluZGV4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZGlzYWJsZUludGVyYWN0aW9ucyA/IFRBQl9JTkRFWF9OT1RfRk9DVVNBQkxFIDogdGhpcy50YWJJbmRleDtcbiAgfVxuXG4gIEBJbnB1dCh7IHRyYW5zZm9ybTogKHY6IHVua25vd24pID0+IG51bWJlckF0dHJpYnV0ZSh2LCBUQUJfSU5ERVhfREVGQVVMVCkgfSlcbiAgdGFiSW5kZXggPSBUQUJfSU5ERVhfREVGQVVMVDtcblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJykgZ2V0IGNsYXNzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBjbGFzc2VzID0gWydyZHMtYXZhdGFyJywgYHJkcy1hdmF0YXItJHt0aGlzLnNpemV9YF07XG5cbiAgICBpZiAodGhpcy5kaXNhYmxlSW50ZXJhY3Rpb25zKSB7XG4gICAgICBjbGFzc2VzLnB1c2goJ3Jkcy1hdmF0YXItZGlzYWJsZS1pbnRlcmFjdGlvbnMnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xhc3NlcztcbiAgfVxuXG4gIEBJbnB1dCgpIHNpemU6IFJkc0F2YXRhclNpemUgPSAnbSc7XG5cbiAgQElucHV0KHsgdHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlIH0pXG4gIGRpc2FibGVJbnRlcmFjdGlvbnMgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihAQXR0cmlidXRlKCd0YWJpbmRleCcpIHRhYkluZGV4Pzogc3RyaW5nKSB7XG4gICAgdGhpcy50YWJJbmRleCA9IG51bWJlckF0dHJpYnV0ZSh0YWJJbmRleCwgVEFCX0lOREVYX0RFRkFVTFQpO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIHRoaXMuZm9jdXNNb25pdG9yLm1vbml0b3IodGhpcy5lbGVtZW50UmVmLCBmYWxzZSk7XG4gICAgdGhpcy5jb250ZW50T2JzZXJ2ZXJcbiAgICAgIC5vYnNlcnZlKHRoaXMuZWxlbWVudFJlZilcbiAgICAgIC5waXBlKHRha2VVbnRpbERlc3Ryb3llZCh0aGlzLmRlc3Ryb3lSZWYpKVxuICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKSk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLmZvY3VzTW9uaXRvci5zdG9wTW9uaXRvcmluZyh0aGlzLmVsZW1lbnRSZWYpO1xuICB9XG5cbiAgZm9jdXMob3JpZ2luOiBGb2N1c09yaWdpbiA9ICdwcm9ncmFtJywgb3B0aW9ucz86IEZvY3VzT3B0aW9ucyk6IHZvaWQge1xuICAgIHRoaXMuZm9jdXNNb25pdG9yLmZvY3VzVmlhKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCBvcmlnaW4sIG9wdGlvbnMpO1xuICB9XG5cbiAgX2hhc0hpZGRlblN0eWxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZSc7XG4gIH1cblxuICBfc2V0SGlkZGVuU3R5bGVzKCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsICdkaXNwbGF5JywgJ25vbmUnKTtcbiAgfVxuXG4gIF9jbGVhckhpZGRlblN0eWxlcygpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZVN0eWxlKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAnZGlzcGxheScpO1xuICB9XG59XG4iXX0=