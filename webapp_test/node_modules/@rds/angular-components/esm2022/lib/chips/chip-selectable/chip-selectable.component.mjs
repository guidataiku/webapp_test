import { booleanAttribute, ChangeDetectionStrategy, Component, EventEmitter, HostBinding, inject, Input, isDevMode, Output, ViewEncapsulation, } from '@angular/core';
import { RDS_CHIP_LIST } from '../chip.tokens';
import { RdsChipComponent } from '../chip/chip.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../../icons/icon.component";
import * as i3 from "../../button/icon-button.component";
import * as i4 from "../chip-action";
export class RdsChipSelectableComponent extends RdsChipComponent {
    constructor() {
        super();
        this.parentList = inject(RDS_CHIP_LIST, {
            optional: true,
        });
        this._selected = false;
        this._selectable = true;
        this.chipListSelectable = true;
        this.chipListMulti = false;
        this.selectedChange = new EventEmitter();
        if (isDevMode() && !this.parentList) {
            throw new Error('RdsChipSelectableComponent can only be used as a child of RdsChipListComponent');
        }
        this.role = 'option';
    }
    get hostClasses() {
        return {
            ...super.hostClasses,
            'rds-chips__chip--selected': this.selected,
        };
    }
    get isChecked() {
        return this.chipListMulti ? this.selected : null;
    }
    get isSelected() {
        return this.chipListMulti ? null : this.selected;
    }
    set selectable(value) {
        this._selectable = booleanAttribute(value);
    }
    get selectable() {
        return this._selectable && this.chipListSelectable;
    }
    set selected(value) {
        this.setSelectedState(booleanAttribute(value), false, true);
    }
    get selected() {
        return this._selected;
    }
    handlePrimaryActionInteraction() {
        if (this.selectable && !this.disabled) {
            this.toggleSelected(true);
        }
    }
    toggleSelected(isUserInput = false) {
        this.setSelectedState(!this.selected, isUserInput, true);
    }
    setSelectedState(isSelected, isUserInput, emitEvent) {
        if (!this.disabled && isSelected !== this.selected) {
            this._selected = isSelected;
            if (emitEvent) {
                this.selectedChange.emit({
                    source: this,
                    isUserInput,
                    selected: this.selected,
                });
            }
            this.cdr.markForCheck();
        }
    }
    selectViaInteraction() {
        this.setSelectedState(true, true, true);
    }
    select() {
        this.setSelectedState(true, false, true);
    }
    deselect() {
        this.setSelectedState(false, false, true);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsChipSelectableComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.1", type: RdsChipSelectableComponent, selector: "rds-chip-selectable", inputs: { selectable: "selectable", selected: "selected" }, outputs: { selectedChange: "selectedChange" }, host: { properties: { "class": "this.hostClasses", "attr.aria-checked": "this.isChecked", "attr.aria-selected": "this.isSelected" } }, providers: [
            { provide: RdsChipComponent, useExisting: RdsChipSelectableComponent },
        ], usesInheritance: true, ngImport: i0, template: "<div [ngClass]=\"['rds-chips-wrapper', 'rds-chips--size-' + size]\">\n  <span #primary rds-chip-action [disabled]=\"disabled\">\n    <ng-content\n      select=\"rds-icon[rdsChipLeadingIcon], rds-icon[rds-chip-leading-icon]\"\n    />\n    <ng-content select=\"img[rdsChipAvatar], img[rds-chip-avatar]\" />\n    <ng-content />\n  </span>\n  @if (closable) {\n    <button\n      #closeButton\n      class=\"rds-chip-close-button\"\n      rds-icon-button\n      rds-chip-action\n      [attr.aria-label]=\"ariaLabelCloseButton\"\n      [disabled]=\"disabled\"\n      (click)=\"onClose($event)\"\n    >\n      <rds-icon namespace=\"outlined\" icon=\"close\" class=\"rds-chip-close-icon\" />\n    </button>\n  } @else {\n    <ng-content\n      select=\"rds-icon[rdsChipTrailingIcon], rds-icon[rds-chip-trailing-icon]\"\n    />\n  }\n</div>\n", dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "component", type: i2.RdsIconComponent, selector: "rds-icon", inputs: ["namespace", "icon"] }, { kind: "component", type: i3.RdsIconButtonComponent, selector: "\n    button[rds-icon-button],\n    button[rdsIconButton],\n    button[rds-icon-warning-button],\n    button[rdsIconWarningButton],\n  ", inputs: ["size"] }, { kind: "directive", type: i4.RdsChipActionDirective, selector: "[rds-chip-action], [rdsChipAction]", inputs: ["tabIndex", "disabled"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsChipSelectableComponent, decorators: [{
            type: Component,
            args: [{ selector: 'rds-chip-selectable', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, providers: [
                        { provide: RdsChipComponent, useExisting: RdsChipSelectableComponent },
                    ], template: "<div [ngClass]=\"['rds-chips-wrapper', 'rds-chips--size-' + size]\">\n  <span #primary rds-chip-action [disabled]=\"disabled\">\n    <ng-content\n      select=\"rds-icon[rdsChipLeadingIcon], rds-icon[rds-chip-leading-icon]\"\n    />\n    <ng-content select=\"img[rdsChipAvatar], img[rds-chip-avatar]\" />\n    <ng-content />\n  </span>\n  @if (closable) {\n    <button\n      #closeButton\n      class=\"rds-chip-close-button\"\n      rds-icon-button\n      rds-chip-action\n      [attr.aria-label]=\"ariaLabelCloseButton\"\n      [disabled]=\"disabled\"\n      (click)=\"onClose($event)\"\n    >\n      <rds-icon namespace=\"outlined\" icon=\"close\" class=\"rds-chip-close-icon\" />\n    </button>\n  } @else {\n    <ng-content\n      select=\"rds-icon[rdsChipTrailingIcon], rds-icon[rds-chip-trailing-icon]\"\n    />\n  }\n</div>\n" }]
        }], ctorParameters: () => [], propDecorators: { hostClasses: [{
                type: HostBinding,
                args: ['class']
            }], isChecked: [{
                type: HostBinding,
                args: ['attr.aria-checked']
            }], isSelected: [{
                type: HostBinding,
                args: ['attr.aria-selected']
            }], selectable: [{
                type: Input
            }], selected: [{
                type: Input
            }], selectedChange: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hpcC1zZWxlY3RhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvYW5ndWxhci1jb21wb25lbnRzL3NyYy9saWIvY2hpcHMvY2hpcC1zZWxlY3RhYmxlL2NoaXAtc2VsZWN0YWJsZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL2FuZ3VsYXItY29tcG9uZW50cy9zcmMvbGliL2NoaXBzL2NoaXAtc2VsZWN0YWJsZS9jaGlwLXNlbGVjdGFibGUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLGdCQUFnQixFQUNoQix1QkFBdUIsRUFDdkIsU0FBUyxFQUNULFlBQVksRUFDWixXQUFXLEVBQ1gsTUFBTSxFQUNOLEtBQUssRUFDTCxTQUFTLEVBQ1QsTUFBTSxFQUNOLGlCQUFpQixHQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFL0MsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7Ozs7OztBQWExRCxNQUFNLE9BQU8sMEJBQThCLFNBQVEsZ0JBQW1CO0lBV3BFO1FBQ0UsS0FBSyxFQUFFLENBQUM7UUFYTyxlQUFVLEdBQUcsTUFBTSxDQUEwQixhQUFhLEVBQUU7WUFDM0UsUUFBUSxFQUFFLElBQUk7U0FDZixDQUFDLENBQUM7UUFDSyxjQUFTLEdBQUcsS0FBSyxDQUFDO1FBRWhCLGdCQUFXLEdBQUcsSUFBSSxDQUFDO1FBRTdCLHVCQUFrQixHQUFHLElBQUksQ0FBQztRQUMxQixrQkFBYSxHQUFHLEtBQUssQ0FBQztRQW1EYixtQkFBYyxHQUFHLElBQUksWUFBWSxFQUF5QixDQUFDO1FBOUNsRSxJQUFJLFNBQVMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ3BDLE1BQU0sSUFBSSxL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QixDQUFDLE1BQU0sYUFDcEM7d0JBQ1QsRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsV0FBVyw0QkFBNEIsRUFBRTtxQkFDdkU7d0RBMEJZLFdBQVc7c0JBRHZCLFdBQVc7dUJBQUMsT0FBTztnQkFTaEIsU0FBUztzQkFEWixXQUFXO3VCQUFDLG1CQUFtQjtnQkFNNUIsVUFBVTtzQkFEYixXQUFXO3VCQUFDLG9CQUFvQjtnQkFNN0IsVUFBVTtzQkFEYixLQUFLO2dCQVVGLFFBQVE7c0JBRFgsS0FBSztnQkFVRyxjQUFjO3NCQUR0QixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgYm9vbGVhbkF0dHJpYnV0ZSxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbXBvbmVudCxcbiAgRXZlbnRFbWl0dGVyLFxuICBIb3N0QmluZGluZyxcbiAgaW5qZWN0LFxuICBJbnB1dCxcbiAgaXNEZXZNb2RlLFxuICBPdXRwdXQsXG4gIFZpZXdFbmNhcHN1bGF0aW9uLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJEU19DSElQX0xJU1QgfSBmcm9tICcuLi9jaGlwLnRva2Vucyc7XG5pbXBvcnQgeyBSZHNDaGlwTGlzdENvbXBvbmVudCB9IGZyb20gJy4uL2NoaXAtbGlzdC9jaGlwLWxpc3QuY29tcG9uZW50JztcbmltcG9ydCB7IFJkc0NoaXBDb21wb25lbnQgfSBmcm9tICcuLi9jaGlwL2NoaXAuY29tcG9uZW50JztcbmltcG9ydCB7IEJvb2xlYW5JbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2VyY2lvbic7XG5pbXBvcnQgeyBSZHNDaGlwU2VsZWN0RXZlbnQgfSBmcm9tICcuLi9jaGlwLnR5cGVzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAncmRzLWNoaXAtc2VsZWN0YWJsZScsXG4gIHRlbXBsYXRlVXJsOiAnLi9jaGlwLXNlbGVjdGFibGUuY29tcG9uZW50Lmh0bWwnLFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgcHJvdmlkZXJzOiBbXG4gICAgeyBwcm92aWRlOiBSZHNDaGlwQ29tcG9uZW50LCB1c2VFeGlzdGluZzogUmRzQ2hpcFNlbGVjdGFibGVDb21wb25lbnQgfSxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgUmRzQ2hpcFNlbGVjdGFibGVDb21wb25lbnQ8VD4gZXh0ZW5kcyBSZHNDaGlwQ29tcG9uZW50PFQ+IHtcbiAgcHJpdmF0ZSByZWFkb25seSBwYXJlbnRMaXN0ID0gaW5qZWN0PFJkc0NoaXBMaXN0Q29tcG9uZW50PFQ+PihSRFNfQ0hJUF9MSVNULCB7XG4gICAgb3B0aW9uYWw6IHRydWUsXG4gIH0pO1xuICBwcml2YXRlIF9zZWxlY3RlZCA9IGZhbHNlO1xuXG4gIHByb3RlY3RlZCBfc2VsZWN0YWJsZSA9IHRydWU7XG5cbiAgY2hpcExpc3RTZWxlY3RhYmxlID0gdHJ1ZTtcbiAgY2hpcExpc3RNdWx0aSA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICBpZiAoaXNEZXZNb2RlKCkgJiYgIXRoaXMucGFyZW50TGlzdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnUmRzQ2hpcFNlbGVjdGFibGVDb21wb25lbnQgY2FuIG9ubHkgYmUgdXNlZCBhcyBhIGNoaWxkIG9mIFJkc0NoaXBMaXN0Q29tcG9uZW50JyxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5yb2xlID0gJ29wdGlvbic7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJylcbiAgb3ZlcnJpZGUgZ2V0IGhvc3RDbGFzc2VzKCk6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+IHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3VwZXIuaG9zdENsYXNzZXMsXG4gICAgICAncmRzLWNoaXBzX19jaGlwLS1zZWxlY3RlZCc6IHRoaXMuc2VsZWN0ZWQsXG4gICAgfTtcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnYXR0ci5hcmlhLWNoZWNrZWQnKVxuICBnZXQgaXNDaGVja2VkKCk6IGJvb2xlYW4gfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jaGlwTGlzdE11bHRpID8gdGhpcy5zZWxlY3RlZCA6IG51bGw7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS1zZWxlY3RlZCcpXG4gIGdldCBpc1NlbGVjdGVkKCk6IGJvb2xlYW4gfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jaGlwTGlzdE11bHRpID8gbnVsbCA6IHRoaXMuc2VsZWN0ZWQ7XG4gIH1cblxuICBASW5wdXQoKVxuICBzZXQgc2VsZWN0YWJsZSh2YWx1ZTogQm9vbGVhbklucHV0KSB7XG4gICAgdGhpcy5fc2VsZWN0YWJsZSA9IGJvb2xlYW5BdHRyaWJ1dGUodmFsdWUpO1xuICB9XG5cbiAgZ2V0IHNlbGVjdGFibGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGFibGUgJiYgdGhpcy5jaGlwTGlzdFNlbGVjdGFibGU7XG4gIH1cblxuICBASW5wdXQoKVxuICBzZXQgc2VsZWN0ZWQodmFsdWU6IEJvb2xlYW5JbnB1dCkge1xuICAgIHRoaXMuc2V0U2VsZWN0ZWRTdGF0ZShib29sZWFuQXR0cmlidXRlKHZhbHVlKSwgZmFsc2UsIHRydWUpO1xuICB9XG5cbiAgZ2V0IHNlbGVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZDtcbiAgfVxuXG4gIEBPdXRwdXQoKVxuICByZWFkb25seSBzZWxlY3RlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8UmRzQ2hpcFNlbGVjdEV2ZW50PFQ+PigpO1xuXG4gIG92ZXJyaWRlIGhhbmRsZVByaW1hcnlBY3Rpb25JbnRlcmFjdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zZWxlY3RhYmxlICYmICF0aGlzLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkKHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZVNlbGVjdGVkKGlzVXNlcklucHV0ID0gZmFsc2UpOiB2b2lkIHtcbiAgICB0aGlzLnNldFNlbGVjdGVkU3RhdGUoIXRoaXMuc2VsZWN0ZWQsIGlzVXNlcklucHV0LCB0cnVlKTtcbiAgfVxuXG4gIHNldFNlbGVjdGVkU3RhdGUoXG4gICAgaXNTZWxlY3RlZDogYm9vbGVhbixcbiAgICBpc1VzZXJJbnB1dDogYm9vbGVhbixcbiAgICBlbWl0RXZlbnQ6IGJvb2xlYW4sXG4gICk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiBpc1NlbGVjdGVkICE9PSB0aGlzLnNlbGVjdGVkKSB7XG4gICAgICB0aGlzLl9zZWxlY3RlZCA9IGlzU2VsZWN0ZWQ7XG5cbiAgICAgIGlmIChlbWl0RXZlbnQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZS5lbWl0KHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgICAgaXNVc2VySW5wdXQsXG4gICAgICAgICAgc2VsZWN0ZWQ6IHRoaXMuc2VsZWN0ZWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cblxuICBzZWxlY3RWaWFJbnRlcmFjdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLnNldFNlbGVjdGVkU3RhdGUodHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gIH1cblxuICBzZWxlY3QoKTogdm9pZCB7XG4gICAgdGhpcy5zZXRTZWxlY3RlZFN0YXRlKHRydWUsIGZhbHNlLCB0cnVlKTtcbiAgfVxuXG4gIGRlc2VsZWN0KCk6IHZvaWQge1xuICAgIHRoaXMuc2V0U2VsZWN0ZWRTdGF0ZShmYWxzZSwgZmFsc2UsIHRydWUpO1xuICB9XG59XG4iLCI8ZGl2IFtuZ0NsYXNzXT1cIlsncmRzLWNoaXBzLXdyYXBwZXInLCAncmRzLWNoaXBzLS1zaXplLScgKyBzaXplXVwiPlxuICA8c3BhbiAjcHJpbWFyeSByZHMtY2hpcC1hY3Rpb24gW2Rpc2FibGVkXT1cImRpc2FibGVkXCI+XG4gICAgPG5nLWNvbnRlbnRcbiAgICAgIHNlbGVjdD1cInJkcy1pY29uW3Jkc0NoaXBMZWFkaW5nSWNvbl0sIHJkcy1pY29uW3Jkcy1jaGlwLWxlYWRpbmctaWNvbl1cIlxuICAgIC8+XG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiaW1nW3Jkc0NoaXBBdmF0YXJdLCBpbWdbcmRzLWNoaXAtYXZhdGFyXVwiIC8+XG4gICAgPG5nLWNvbnRlbnQgLz5cbiAgPC9zcGFuPlxuICBAaWYgKGNsb3NhYmxlKSB7XG4gICAgPGJ1dHRvblxuICAgICAgI2Nsb3NlQnV0dG9uXG4gICAgICBjbGFzcz1cInJkcy1jaGlwLWNsb3NlLWJ1dHRvblwiXG4gICAgICByZHMtaWNvbi1idXR0b25cbiAgICAgIHJkcy1jaGlwLWFjdGlvblxuICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJhcmlhTGFiZWxDbG9zZUJ1dHRvblwiXG4gICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgKGNsaWNrKT1cIm9uQ2xvc2UoJGV2ZW50KVwiXG4gICAgPlxuICAgICAgPHJkcy1pY29uIG5hbWVzcGFjZT1cIm91dGxpbmVkXCIgaWNvbj1cImNsb3NlXCIgY2xhc3M9XCJyZHMtY2hpcC1jbG9zZS1pY29uXCIgLz5cbiAgICA8L2J1dHRvbj5cbiAgfSBAZWxzZSB7XG4gICAgPG5nLWNvbnRlbnRcbiAgICAgIHNlbGVjdD1cInJkcy1pY29uW3Jkc0NoaXBUcmFpbGluZ0ljb25dLCByZHMtaWNvbltyZHMtY2hpcC10cmFpbGluZy1pY29uXVwiXG4gICAgLz5cbiAgfVxuPC9kaXY+XG4iXX0=