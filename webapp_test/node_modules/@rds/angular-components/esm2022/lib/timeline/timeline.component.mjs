import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ContentChildren, DestroyRef, ElementRef, HostBinding, inject, Input, QueryList, ViewChild, ViewEncapsulation, } from '@angular/core';
import { fromEvent, merge, Subject } from 'rxjs';
import { delay, filter, map, takeUntil } from 'rxjs/operators';
import { RdsTimelineEventComponent } from './timeline-event/timeline-event.component';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import * as i0 from "@angular/core";
import * as i1 from "../icons/icon.component";
import * as i2 from "../button/icon-button.component";
export class RdsTimelineComponent {
    constructor() {
        this.cdr = inject(ChangeDetectorRef);
        this.destroyRef = inject(DestroyRef);
        this.removeOldHandlers$ = new Subject();
        this.align = 'start';
        this.presentationMode = 'scroll';
        this.orientation = 'vertical';
        this.activePage = 1;
        this.numberOfPages = 0;
        this.triggerCalculation$ = new Subject();
        this.scroll$ = new Subject();
        this.isScrolling = false;
        this.pageOffsetFactor = 0.3;
        this.class = 'rds-timeline';
    }
    get showGradientRight() {
        return (this.presentationMode !== 'scroll' &&
            this.orientation === 'horizontal' &&
            !this.isStartButtonActive &&
            this.isEndButtonActive);
    }
    get showGradientLeft() {
        return (this.presentationMode !== 'scroll' &&
            this.orientation === 'horizontal' &&
            this.isStartButtonActive &&
            !this.isEndButtonActive);
    }
    get showCircleGradientHorizontal() {
        return (this.presentationMode !== 'scroll' &&
            this.orientation === 'horizontal' &&
            this.isStartButtonActive &&
            this.isEndButtonActive);
    }
    get showCircleGradientVertical() {
        return (this.presentationMode !== 'scroll' &&
            this.orientation === 'vertical' &&
            this.isStartButtonActive &&
            this.isEndButtonActive);
    }
    get showGradientTop() {
        return (this.presentationMode !== 'scroll' &&
            this.orientation === 'vertical' &&
            !this.isStartButtonActive &&
            this.isEndButtonActive);
    }
    get showGradientBottom() {
        return (this.presentationMode !== 'scroll' &&
            this.orientation === 'vertical' &&
            this.isStartButtonActive &&
            !this.isEndButtonActive);
    }
    get isStartButtonActive() {
        return this.numberOfPages > 0 && this.activePage > 1;
    }
    get isEndButtonActive() {
        return this.numberOfPages > 0 && this.activePage < this.numberOfPages;
    }
    ngAfterViewInit() {
        this.triggerCalculation$
            .pipe(delay(1), takeUntilDestroyed(this.destroyRef))
            .subscribe(() => this.calculateNumberOfPages());
        this.setupScrollListeners();
        this.setupEventHandlers(this.events);
        this.events.changes
            .pipe(takeUntilDestroyed(this.destroyRef))
            .subscribe((events) => {
            this.removeOldHandlers$.next();
            this.setupEventHandlers(events);
            this.triggerCalculation$.next();
        });
        this.triggerCalculation$.next();
    }
    ngAfterViewChecked() {
        if (this.orientation === 'horizontal') {
            const newValue = this.widgetsContent.nativeElement.scrollWidth >
                this.widgetsContent.nativeElement.clientWidth;
            this.contentScroll(newValue);
        }
        else {
            const newValue = this.widgetsContent.nativeElement.scrollHeight >
                this.widgetsContent.nativeElement.clientHeight;
            this.contentScroll(newValue);
        }
    }
    ngOnChanges(changes) {
        if ('orientation' in changes ||
            'align' in changes ||
            'presentationMode' in changes) {
            this.activePage = 1;
            this.triggerCalculation$.next();
        }
    }
    ngOnDestroy() {
        this.triggerCalculation$.complete();
    }
    hasPrevPage() {
        return 1 < this.activePage && this.activePage <= this.numberOfPages;
    }
    hasNextPage() {
        return this.activePage < this.numberOfPages;
    }
    scrollStart() {
        this.scroll$.next('start');
    }
    scrollEnd() {
        this.scroll$.next('end');
    }
    contentScroll(newValue) {
        if (this.isScrollable !== newValue) {
            this.isScrollable = !!newValue;
            this.cdr.markForCheck();
        }
    }
    setupEventHandlers(events) {
        merge(...events.map((e) => e.selected.pipe(map(() => e))))
            .pipe(takeUntil(this.removeOldHandlers$), takeUntilDestroyed(this.destroyRef))
            .subscribe((e) => this.updateEventStates(e));
    }
    setupScrollListeners() {
        fromEvent(this.widgetsContent.nativeElement, 'scroll')
            .pipe(takeUntilDestroyed(this.destroyRef))
            .subscribe(() => (this.isScrolling = true));
        fromEvent(this.widgetsContent.nativeElement, 'scrollend')
            .pipe(takeUntilDestroyed(this.destroyRef))
            .subscribe(() => (this.isScrolling = false));
        this.scroll$
            .pipe(filter(() => !this.isScrolling), takeUntilDestroyed(this.destroyRef))
            .subscribe((dir) => this.scroll(dir));
    }
    updateEventStates(selected) {
        if (selected.event.status !== 'disabled') {
            this.events.forEach((eventComponent) => {
                eventComponent.isActive = selected === eventComponent;
            });
        }
    }
    scroll(direction) {
        const hasPage = direction === 'end' ? this.hasNextPage() : this.hasPrevPage();
        if (hasPage) {
            const directionSign = direction === 'end' ? 1 : -1;
            this.activePage = this.activePage + directionSign;
            const scrollOptions = { behavior: 'smooth' };
            if (this.orientation === 'horizontal') {
                scrollOptions.left =
                    this.widgetsContent.nativeElement.scrollLeft +
                        this.getScrollOffset() * directionSign;
            }
            else {
                scrollOptions.top =
                    this.widgetsContent.nativeElement.scrollTop +
                        this.getScrollOffset() * directionSign;
            }
            this.widgetsContent.nativeElement.scrollTo(scrollOptions);
            this.cdr.markForCheck();
        }
    }
    calculateNumberOfPages() {
        const beforeNumberOfPages = this.numberOfPages;
        const segments = this.orientation === 'horizontal'
            ? (this.widgetsContent.nativeElement.scrollWidth -
                this.widgetsContent.nativeElement.clientWidth) /
                this.getScrollOffset()
            : (this.widgetsContent.nativeElement.scrollHeight -
                this.widgetsContent.nativeElement.clientHeight) /
                this.getScrollOffset();
        this.numberOfPages = Math.ceil(segments) + 1;
        if (beforeNumberOfPages !== this.numberOfPages) {
            this.cdr.markForCheck();
        }
        setTimeout(() => {
            this.widgetsContent.nativeElement.scrollTo({
                top: 0,
                left: 0,
                behavior: 'instant',
            });
            // when changing orientation something triggers scroll event, that's why the line below is needed
            this.isScrolling = false;
        }, 25);
    }
    getScrollOffset() {
        const pageWidth = this.orientation === 'horizontal'
            ? this.widgetsContent.nativeElement.offsetWidth
            : this.widgetsContent.nativeElement.offsetHeight;
        return pageWidth - pageWidth * this.pageOffsetFactor;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsTimelineComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.1", type: RdsTimelineComponent, selector: "rds-timeline", inputs: { align: "align", presentationMode: "presentationMode", orientation: "orientation" }, host: { properties: { "class": "this.class" } }, queries: [{ propertyName: "events", predicate: RdsTimelineEventComponent }], viewQueries: [{ propertyName: "widgetsContent", first: true, predicate: ["widgetsContent"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div class=\"rds-scrolling rds-scrolling-{{ orientation }}\">\n  @if (presentationMode === 'slider') {\n    @if (isStartButtonActive) {\n      <div\n        class=\"rds-arrow\"\n        [class.rds-arrow-left]=\"orientation === 'horizontal'\"\n        [class.rds-arrow-top]=\"orientation === 'vertical'\"\n      >\n        <button rds-icon-button size=\"s\" (click)=\"scrollStart()\">\n          <rds-icon\n            namespace=\"filled\"\n            [icon]=\"\n              orientation === 'horizontal' ? 'chevron_left' : 'chevron_up'\n            \"\n          />\n        </button>\n      </div>\n    }\n  }\n  <div\n    class=\"rds-scrolling-container\"\n    [class.rds-timeline-circle-gradient-horizontal]=\"\n      showCircleGradientHorizontal\n    \"\n    [class.rds-timeline-circle-gradient-vertical]=\"showCircleGradientVertical\"\n    [class.rds-timeline-gradient-right]=\"showGradientRight\"\n    [class.rds-timeline-gradient-left]=\"showGradientLeft\"\n    [class.rds-timeline-gradient-top]=\"showGradientTop\"\n    [class.rds-timeline-gradient-bottom]=\"showGradientBottom\"\n  >\n    <div\n      #widgetsContent\n      class=\"rds-scrolling-wrapper rds-scrolling-wrapper-{{\n        orientation\n      }} rds-scrolling-wrapper-{{ presentationMode }}\"\n      (scroll)=\"contentScroll()\"\n    >\n      <div\n        class=\"rds-timeline-wrapper rds-timeline-wrapper-{{\n          align\n        }} rds-timeline-wrapper-{{ orientation }}\"\n      >\n        <ng-content select=\"rds-timeline-event\" />\n      </div>\n    </div>\n  </div>\n  @if (presentationMode === 'slider') {\n    @if (isEndButtonActive) {\n      <div\n        class=\"rds-arrow\"\n        [class.rds-arrow-right]=\"orientation === 'horizontal'\"\n        [class.rds-arrow-down]=\"orientation === 'vertical'\"\n      >\n        <button rds-icon-button size=\"s\" (click)=\"scrollEnd()\">\n          <rds-icon\n            namespace=\"filled\"\n            [icon]=\"\n              orientation === 'horizontal' ? 'chevron_right' : 'chevron_down'\n            \"\n          />\n        </button>\n      </div>\n    }\n  }\n  @if (presentationMode === 'pagination') {\n    <div class=\"rds-timeline-pagination\">\n      <button\n        rds-icon-button\n        size=\"s\"\n        [disabled]=\"!isStartButtonActive\"\n        (click)=\"scrollStart()\"\n      >\n        <rds-icon\n          namespace=\"filled\"\n          icon=\"chevron_left\"\n          [class.active]=\"isStartButtonActive\"\n        />\n      </button>\n      <div class=\"rds-timeline-pagination-text\">\n        {{ activePage }}/{{ numberOfPages }}\n      </div>\n      <button\n        rds-icon-button\n        size=\"s\"\n        [disabled]=\"!isEndButtonActive\"\n        (click)=\"scrollEnd()\"\n      >\n        <rds-icon\n          namespace=\"filled\"\n          icon=\"chevron_right\"\n          [class.active]=\"isEndButtonActive\"\n        />\n      </button>\n    </div>\n  }\n</div>\n", styles: ["rds-timeline{display:flex;flex-grow:1;flex-direction:column;height:100%}rds-timeline .rds-timeline-wrapper{display:flex;flex-grow:1;flex-direction:column}rds-timeline .rds-timeline-wrapper .rds-timeline-event{display:grid;position:relative;min-height:72px}rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-content{grid-area:content;padding:0 16px}@media (max-width: 767.999999px){rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-content{font-size:14px;font-weight:400;line-height:20px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}@media (min-width: 768px){rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-content{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}@media (min-width: 1024px){rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-content{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}@media (min-width: 1440px){rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-content{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}@media (min-width: 1672px){rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-content{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-separator{grid-area:separator;display:flex;align-items:center;flex-direction:column}rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-separator .rds-timeline-event-marker{display:flex;align-self:baseline;border-width:2px;border-style:solid;border-radius:50%;min-width:12px;height:12px}rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-separator .rds-timeline-event-connector{flex-grow:1;background-color:var(--rds-color-grey-2)}rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-opposite{grid-area:opposite;padding:0 16px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal{flex-direction:row;padding:0 4px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal .rds-timeline-event{grid-template-rows:auto auto auto;grid-template-areas:\"content\" \"separator\" \"opposite\";min-width:70px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal .rds-timeline-event .rds-timeline-event-content,rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal .rds-timeline-event .rds-timeline-event-opposite{padding:16px 0;margin-right:8px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal .rds-timeline-event .rds-timeline-event-separator{flex-direction:row}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal .rds-timeline-event .rds-timeline-event-separator .rds-timeline-event-connector{height:1px;margin-left:8px;margin-right:8px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal.rds-timeline-wrapper-end .rds-timeline-event{grid-template-areas:\"opposite\" \"separator\" \"content\";text-align:left}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal.rds-timeline-wrapper-alternate .rds-timeline-event{grid-template-rows:1fr auto 1fr}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal.rds-timeline-wrapper-alternate .rds-timeline-event:nth-child(2n){grid-template-areas:\"opposite\" \"separator\" \"content\"}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event{grid-template-rows:auto;grid-template-columns:auto auto auto;grid-template-areas:\"content separator opposite\"}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-start .rds-timeline-event{flex-direction:row}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-start .rds-timeline-event .rds-timeline-event-content{text-align:right}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-start .rds-timeline-event .rds-timeline-event-opposite{text-align:left}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-end .rds-timeline-event{grid-template-areas:\"opposite separator content\"}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-end .rds-timeline-event .rds-timeline-event-content{text-align:left}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-end .rds-timeline-event .rds-timeline-event-opposite{text-align:right}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-alternate .rds-timeline-event{grid-template-columns:1fr auto 1fr}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-alternate .rds-timeline-event:nth-child(2n){grid-template-areas:\"opposite separator content\"}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-alternate .rds-timeline-event:nth-child(odd) .rds-timeline-event-opposite{text-align:left}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-alternate .rds-timeline-event:nth-child(odd) .rds-timeline-event-content{text-align:right}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-alternate .rds-timeline-event:nth-child(2n) .rds-timeline-event-opposite{text-align:right}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-alternate .rds-timeline-event:nth-child(2n) .rds-timeline-event-content{text-align:left}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event{margin-bottom:8px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event .rds-timeline-event-marker{margin-inline:6px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event .rds-timeline-event-content,rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event .rds-timeline-event-opposite{margin-top:0;padding:0 16px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event:has(.rds-icon) .rds-timeline-event-content,rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event:has(.rds-icon) .rds-timeline-event-opposite{margin-top:10px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event-separator{padding-top:6px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event-separator .rds-timeline-event-connector{width:1px;margin-top:8px}rds-timeline .rds-scrolling{display:flex;position:relative;flex-direction:column}rds-timeline .rds-scrolling.rds-scrolling-horizontal{padding:0 24px}rds-timeline .rds-scrolling.rds-scrolling-vertical{height:100%;align-items:center}rds-timeline .rds-scrolling-container{display:grid;height:100%}rds-timeline .rds-timeline-circle-gradient-horizontal{mask:radial-gradient(circle,transparent -100%,var(--rds-color-bg-overlay) 0%,var(--rds-color-bg-overlay) 30%,transparent 95%)}rds-timeline .rds-timeline-gradient-right{mask:linear-gradient(90deg,transparent -50%,var(--rds-color-bg-overlay) 0%,var(--rds-color-bg-overlay) 70%,transparent 95%)}rds-timeline .rds-timeline-gradient-left{mask:linear-gradient(270deg,transparent -50%,var(--rds-color-bg-overlay) 0%,var(--rds-color-bg-overlay) 70%,transparent 95%)}rds-timeline .rds-timeline-circle-gradient-vertical{mask:linear-gradient(180deg,transparent 5%,rgb(0,0,0) 30%,rgb(0,0,0) 70%,transparent 95%)}rds-timeline .rds-timeline-gradient-bottom{mask:linear-gradient(360deg,transparent -55%,var(--rds-color-bg-overlay) 30%,var(--rds-color-bg-overlay) 70%,transparent 95%)}rds-timeline .rds-timeline-gradient-top{mask:linear-gradient(180deg,transparent -50%,var(--rds-color-bg-overlay) 0%,var(--rds-color-bg-overlay) 70%,transparent 95%)}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-horizontal{overflow-x:scroll;overflow-y:hidden}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-horizontal.rds-scrolling-wrapper-slider,rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-horizontal.rds-scrolling-wrapper-pagination{overflow-x:hidden}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-horizontal.rds-scrolling-wrapper-pagination .rds-timeline-wrapper-end,rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-horizontal.rds-scrolling-wrapper-pagination .rds-timeline-wrapper-alternate{margin-bottom:24px}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-horizontal.rds-scrolling-wrapper-pagination .rds-timeline-wrapper-start{margin-bottom:8px}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-vertical{overflow-y:scroll;overflow-x:hidden}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-vertical.rds-scrolling-wrapper-slider,rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-vertical.rds-scrolling-wrapper-pagination{overflow-y:hidden}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-vertical.rds-scrolling-wrapper-pagination .rds-timeline-wrapper{padding-bottom:12px}rds-timeline .rds-arrow{cursor:pointer;display:flex;align-items:center;position:absolute;z-index:2}rds-timeline .rds-arrow-left{top:calc(50% - 9px);left:16px}rds-timeline .rds-arrow-right{top:calc(50% - 9px);right:16px}rds-timeline .rds-arrow-top{left:calc(50% - 9px);top:0}rds-timeline .rds-arrow-down{left:calc(50% - 9px);bottom:0}rds-timeline .rds-timeline-pagination{width:100%;display:flex;justify-content:center;-webkit-user-select:none;user-select:none}rds-timeline .rds-timeline-pagination .rds-timeline-pagination-text{margin:0 40px}rds-timeline .rds-timeline-pagination rds-icon{color:var(--rds-color-disabled)}rds-timeline .rds-timeline-pagination rds-icon.active{color:var(--rds-color-low-contrast);cursor:pointer}\n"], dependencies: [{ kind: "component", type: i1.RdsIconComponent, selector: "rds-icon", inputs: ["namespace", "icon"] }, { kind: "component", type: i2.RdsIconButtonComponent, selector: "\n    button[rds-icon-button],\n    button[rdsIconButton],\n    button[rds-icon-warning-button],\n    button[rdsIconWarningButton],\n  ", inputs: ["size"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsTimelineComponent, decorators: [{
            type: Component,
            args: [{ selector: 'rds-timeline', changeDetection: ChangeDetectionStrategy.OnPush, encapsulation: ViewEncapsulation.None, template: "<div class=\"rds-scrolling rds-scrolling-{{ orientation }}\">\n  @if (presentationMode === 'slider') {\n    @if (isStartButtonActive) {\n      <div\n        class=\"rds-arrow\"\n        [class.rds-arrow-left]=\"orientation === 'horizontal'\"\n        [class.rds-arrow-top]=\"orientation === 'vertical'\"\n      >\n        <button rds-icon-button size=\"s\" (click)=\"scrollStart()\">\n          <rds-icon\n            namespace=\"filled\"\n            [icon]=\"\n              orientation === 'horizontal' ? 'chevron_left' : 'chevron_up'\n            \"\n          />\n        </button>\n      </div>\n    }\n  }\n  <div\n    class=\"rds-scrolling-container\"\n    [class.rds-timeline-circle-gradient-horizontal]=\"\n      showCircleGradientHorizontal\n    \"\n    [class.rds-timeline-circle-gradient-vertical]=\"showCircleGradientVertical\"\n    [class.rds-timeline-gradient-right]=\"showGradientRight\"\n    [class.rds-timeline-gradient-left]=\"showGradientLeft\"\n    [class.rds-timeline-gradient-top]=\"showGradientTop\"\n    [class.rds-timeline-gradient-bottom]=\"showGradientBottom\"\n  >\n    <div\n      #widgetsContent\n      class=\"rds-scrolling-wrapper rds-scrolling-wrapper-{{\n        orientation\n      }} rds-scrolling-wrapper-{{ presentationMode }}\"\n      (scroll)=\"contentScroll()\"\n    >\n      <div\n        class=\"rds-timeline-wrapper rds-timeline-wrapper-{{\n          align\n        }} rds-timeline-wrapper-{{ orientation }}\"\n      >\n        <ng-content select=\"rds-timeline-event\" />\n      </div>\n    </div>\n  </div>\n  @if (presentationMode === 'slider') {\n    @if (isEndButtonActive) {\n      <div\n        class=\"rds-arrow\"\n        [class.rds-arrow-right]=\"orientation === 'horizontal'\"\n        [class.rds-arrow-down]=\"orientation === 'vertical'\"\n      >\n        <button rds-icon-button size=\"s\" (click)=\"scrollEnd()\">\n          <rds-icon\n            namespace=\"filled\"\n            [icon]=\"\n              orientation === 'horizontal' ? 'chevron_right' : 'chevron_down'\n            \"\n          />\n        </button>\n      </div>\n    }\n  }\n  @if (presentationMode === 'pagination') {\n    <div class=\"rds-timeline-pagination\">\n      <button\n        rds-icon-button\n        size=\"s\"\n        [disabled]=\"!isStartButtonActive\"\n        (click)=\"scrollStart()\"\n      >\n        <rds-icon\n          namespace=\"filled\"\n          icon=\"chevron_left\"\n          [class.active]=\"isStartButtonActive\"\n        />\n      </button>\n      <div class=\"rds-timeline-pagination-text\">\n        {{ activePage }}/{{ numberOfPages }}\n      </div>\n      <button\n        rds-icon-button\n        size=\"s\"\n        [disabled]=\"!isEndButtonActive\"\n        (click)=\"scrollEnd()\"\n      >\n        <rds-icon\n          namespace=\"filled\"\n          icon=\"chevron_right\"\n          [class.active]=\"isEndButtonActive\"\n        />\n      </button>\n    </div>\n  }\n</div>\n", styles: ["rds-timeline{display:flex;flex-grow:1;flex-direction:column;height:100%}rds-timeline .rds-timeline-wrapper{display:flex;flex-grow:1;flex-direction:column}rds-timeline .rds-timeline-wrapper .rds-timeline-event{display:grid;position:relative;min-height:72px}rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-content{grid-area:content;padding:0 16px}@media (max-width: 767.999999px){rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-content{font-size:14px;font-weight:400;line-height:20px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}@media (min-width: 768px){rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-content{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}@media (min-width: 1024px){rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-content{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}@media (min-width: 1440px){rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-content{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}@media (min-width: 1672px){rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-content{font-size:16px;font-weight:400;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-separator{grid-area:separator;display:flex;align-items:center;flex-direction:column}rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-separator .rds-timeline-event-marker{display:flex;align-self:baseline;border-width:2px;border-style:solid;border-radius:50%;min-width:12px;height:12px}rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-separator .rds-timeline-event-connector{flex-grow:1;background-color:var(--rds-color-grey-2)}rds-timeline .rds-timeline-wrapper .rds-timeline-event .rds-timeline-event-opposite{grid-area:opposite;padding:0 16px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal{flex-direction:row;padding:0 4px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal .rds-timeline-event{grid-template-rows:auto auto auto;grid-template-areas:\"content\" \"separator\" \"opposite\";min-width:70px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal .rds-timeline-event .rds-timeline-event-content,rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal .rds-timeline-event .rds-timeline-event-opposite{padding:16px 0;margin-right:8px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal .rds-timeline-event .rds-timeline-event-separator{flex-direction:row}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal .rds-timeline-event .rds-timeline-event-separator .rds-timeline-event-connector{height:1px;margin-left:8px;margin-right:8px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal.rds-timeline-wrapper-end .rds-timeline-event{grid-template-areas:\"opposite\" \"separator\" \"content\";text-align:left}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal.rds-timeline-wrapper-alternate .rds-timeline-event{grid-template-rows:1fr auto 1fr}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-horizontal.rds-timeline-wrapper-alternate .rds-timeline-event:nth-child(2n){grid-template-areas:\"opposite\" \"separator\" \"content\"}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event{grid-template-rows:auto;grid-template-columns:auto auto auto;grid-template-areas:\"content separator opposite\"}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-start .rds-timeline-event{flex-direction:row}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-start .rds-timeline-event .rds-timeline-event-content{text-align:right}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-start .rds-timeline-event .rds-timeline-event-opposite{text-align:left}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-end .rds-timeline-event{grid-template-areas:\"opposite separator content\"}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-end .rds-timeline-event .rds-timeline-event-content{text-align:left}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-end .rds-timeline-event .rds-timeline-event-opposite{text-align:right}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-alternate .rds-timeline-event{grid-template-columns:1fr auto 1fr}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-alternate .rds-timeline-event:nth-child(2n){grid-template-areas:\"opposite separator content\"}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-alternate .rds-timeline-event:nth-child(odd) .rds-timeline-event-opposite{text-align:left}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-alternate .rds-timeline-event:nth-child(odd) .rds-timeline-event-content{text-align:right}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-alternate .rds-timeline-event:nth-child(2n) .rds-timeline-event-opposite{text-align:right}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical.rds-timeline-wrapper-alternate .rds-timeline-event:nth-child(2n) .rds-timeline-event-content{text-align:left}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event{margin-bottom:8px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event .rds-timeline-event-marker{margin-inline:6px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event .rds-timeline-event-content,rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event .rds-timeline-event-opposite{margin-top:0;padding:0 16px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event:has(.rds-icon) .rds-timeline-event-content,rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event:has(.rds-icon) .rds-timeline-event-opposite{margin-top:10px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event-separator{padding-top:6px}rds-timeline .rds-timeline-wrapper.rds-timeline-wrapper-vertical .rds-timeline-event-separator .rds-timeline-event-connector{width:1px;margin-top:8px}rds-timeline .rds-scrolling{display:flex;position:relative;flex-direction:column}rds-timeline .rds-scrolling.rds-scrolling-horizontal{padding:0 24px}rds-timeline .rds-scrolling.rds-scrolling-vertical{height:100%;align-items:center}rds-timeline .rds-scrolling-container{display:grid;height:100%}rds-timeline .rds-timeline-circle-gradient-horizontal{mask:radial-gradient(circle,transparent -100%,var(--rds-color-bg-overlay) 0%,var(--rds-color-bg-overlay) 30%,transparent 95%)}rds-timeline .rds-timeline-gradient-right{mask:linear-gradient(90deg,transparent -50%,var(--rds-color-bg-overlay) 0%,var(--rds-color-bg-overlay) 70%,transparent 95%)}rds-timeline .rds-timeline-gradient-left{mask:linear-gradient(270deg,transparent -50%,var(--rds-color-bg-overlay) 0%,var(--rds-color-bg-overlay) 70%,transparent 95%)}rds-timeline .rds-timeline-circle-gradient-vertical{mask:linear-gradient(180deg,transparent 5%,rgb(0,0,0) 30%,rgb(0,0,0) 70%,transparent 95%)}rds-timeline .rds-timeline-gradient-bottom{mask:linear-gradient(360deg,transparent -55%,var(--rds-color-bg-overlay) 30%,var(--rds-color-bg-overlay) 70%,transparent 95%)}rds-timeline .rds-timeline-gradient-top{mask:linear-gradient(180deg,transparent -50%,var(--rds-color-bg-overlay) 0%,var(--rds-color-bg-overlay) 70%,transparent 95%)}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-horizontal{overflow-x:scroll;overflow-y:hidden}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-horizontal.rds-scrolling-wrapper-slider,rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-horizontal.rds-scrolling-wrapper-pagination{overflow-x:hidden}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-horizontal.rds-scrolling-wrapper-pagination .rds-timeline-wrapper-end,rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-horizontal.rds-scrolling-wrapper-pagination .rds-timeline-wrapper-alternate{margin-bottom:24px}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-horizontal.rds-scrolling-wrapper-pagination .rds-timeline-wrapper-start{margin-bottom:8px}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-vertical{overflow-y:scroll;overflow-x:hidden}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-vertical.rds-scrolling-wrapper-slider,rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-vertical.rds-scrolling-wrapper-pagination{overflow-y:hidden}rds-timeline .rds-scrolling-wrapper.rds-scrolling-wrapper-vertical.rds-scrolling-wrapper-pagination .rds-timeline-wrapper{padding-bottom:12px}rds-timeline .rds-arrow{cursor:pointer;display:flex;align-items:center;position:absolute;z-index:2}rds-timeline .rds-arrow-left{top:calc(50% - 9px);left:16px}rds-timeline .rds-arrow-right{top:calc(50% - 9px);right:16px}rds-timeline .rds-arrow-top{left:calc(50% - 9px);top:0}rds-timeline .rds-arrow-down{left:calc(50% - 9px);bottom:0}rds-timeline .rds-timeline-pagination{width:100%;display:flex;justify-content:center;-webkit-user-select:none;user-select:none}rds-timeline .rds-timeline-pagination .rds-timeline-pagination-text{margin:0 40px}rds-timeline .rds-timeline-pagination rds-icon{color:var(--rds-color-disabled)}rds-timeline .rds-timeline-pagination rds-icon.active{color:var(--rds-color-low-contrast);cursor:pointer}\n"] }]
        }], propDecorators: { align: [{
                type: Input
            }], presentationMode: [{
                type: Input
            }], orientation: [{
                type: Input
            }], class: [{
                type: HostBinding,
                args: ['class']
            }], widgetsContent: [{
                type: ViewChild,
                args: ['widgetsContent']
            }], events: [{
                type: ContentChildren,
                args: [RdsTimelineEventComponent]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZWxpbmUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9hbmd1bGFyLWNvbXBvbmVudHMvc3JjL2xpYi90aW1lbGluZS90aW1lbGluZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL2FuZ3VsYXItY29tcG9uZW50cy9zcmMvbGliL3RpbWVsaW5lL3RpbWVsaW5lLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFHTCx1QkFBdUIsRUFDdkIsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxlQUFlLEVBQ2YsVUFBVSxFQUNWLFVBQVUsRUFDVixXQUFXLEVBQ1gsTUFBTSxFQUNOLEtBQUssRUFHTCxTQUFTLEVBRVQsU0FBUyxFQUNULGlCQUFpQixHQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDakQsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQy9ELE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0FBQ3RGLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLDRCQUE0QixDQUFDOzs7O0FBYWhFLE1BQU0sT0FBTyxvQkFBb0I7SUFQakM7UUFVbUIsUUFBRyxHQUFHLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ2hDLGVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDaEMsdUJBQWtCLEdBQUcsSUFBSSxPQUFPLEVBQVEsQ0FBQztRQUVqRCxVQUFLLEdBQXFCLE9BQU8sQ0FBQztRQUNsQyxxQkFBZ0IsR0FBZ0MsUUFBUSxDQUFDO1FBQ3pELGdCQUFXLEdBQTJCLFVBQVUsQ0FBQztRQUVoRCxlQUFVLEdBQUcs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c0JBRHZCLFNBQVM7dUJBQUMsZ0JBQWdCO2dCQUcyQixNQUFNO3NCQUEzRCxlQUFlO3VCQUFDLHlCQUF5QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFmdGVyVmlld0NoZWNrZWQsXG4gIEFmdGVyVmlld0luaXQsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBDb250ZW50Q2hpbGRyZW4sXG4gIERlc3Ryb3lSZWYsXG4gIEVsZW1lbnRSZWYsXG4gIEhvc3RCaW5kaW5nLFxuICBpbmplY3QsXG4gIElucHV0LFxuICBPbkNoYW5nZXMsXG4gIE9uRGVzdHJveSxcbiAgUXVlcnlMaXN0LFxuICBTaW1wbGVDaGFuZ2VzLFxuICBWaWV3Q2hpbGQsXG4gIFZpZXdFbmNhcHN1bGF0aW9uLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGZyb21FdmVudCwgbWVyZ2UsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGRlbGF5LCBmaWx0ZXIsIG1hcCwgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgUmRzVGltZWxpbmVFdmVudENvbXBvbmVudCB9IGZyb20gJy4vdGltZWxpbmUtZXZlbnQvdGltZWxpbmUtZXZlbnQuY29tcG9uZW50JztcbmltcG9ydCB7IHRha2VVbnRpbERlc3Ryb3llZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvcnhqcy1pbnRlcm9wJztcblxuZXhwb3J0IHR5cGUgUmRzVGltZWxpbmVBbGlnbiA9ICdzdGFydCcgfCAnZW5kJyB8ICdhbHRlcm5hdGUnO1xuZXhwb3J0IHR5cGUgUmRzVGltZWxpbmVPcmllbnRhdGlvbiA9ICd2ZXJ0aWNhbCcgfCAnaG9yaXpvbnRhbCc7XG5leHBvcnQgdHlwZSBSZHNUaW1lbGluZVByZXNlbnRhdGlvbk1vZGUgPSAnc2xpZGVyJyB8ICdwYWdpbmF0aW9uJyB8ICdzY3JvbGwnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdyZHMtdGltZWxpbmUnLFxuICB0ZW1wbGF0ZVVybDogJy4vdGltZWxpbmUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi90aW1lbGluZS5jb21wb25lbnQuc2NzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbn0pXG5leHBvcnQgY2xhc3MgUmRzVGltZWxpbmVDb21wb25lbnRcbiAgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBBZnRlclZpZXdDaGVja2VkLCBPbkNoYW5nZXMsIE9uRGVzdHJveVxue1xuICBwcml2YXRlIHJlYWRvbmx5IGNkciA9IGluamVjdChDaGFuZ2VEZXRlY3RvclJlZik7XG4gIHByaXZhdGUgcmVhZG9ubHkgZGVzdHJveVJlZiA9IGluamVjdChEZXN0cm95UmVmKTtcbiAgcHJpdmF0ZSByZWFkb25seSByZW1vdmVPbGRIYW5kbGVycyQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXG4gIEBJbnB1dCgpIGFsaWduOiBSZHNUaW1lbGluZUFsaWduID0gJ3N0YXJ0JztcbiAgQElucHV0KCkgcHJlc2VudGF0aW9uTW9kZTogUmRzVGltZWxpbmVQcmVzZW50YXRpb25Nb2RlID0gJ3Njcm9sbCc7XG4gIEBJbnB1dCgpIG9yaWVudGF0aW9uOiBSZHNUaW1lbGluZU9yaWVudGF0aW9uID0gJ3ZlcnRpY2FsJztcblxuICBwcm90ZWN0ZWQgYWN0aXZlUGFnZSA9IDE7XG4gIHByb3RlY3RlZCBudW1iZXJPZlBhZ2VzID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSB0cmlnZ2VyQ2FsY3VsYXRpb24kID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcbiAgcHJpdmF0ZSByZWFkb25seSBzY3JvbGwkID0gbmV3IFN1YmplY3Q8J3N0YXJ0JyB8ICdlbmQnPigpO1xuICBwcml2YXRlIGlzU2Nyb2xsaW5nID0gZmFsc2U7XG4gIHByaXZhdGUgaXNTY3JvbGxhYmxlOiBib29sZWFuO1xuICBwcml2YXRlIHBhZ2VPZmZzZXRGYWN0b3IgPSAwLjM7XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcycpIHByb3RlY3RlZCBjbGFzcyA9ICdyZHMtdGltZWxpbmUnO1xuICBAVmlld0NoaWxkKCd3aWRnZXRzQ29udGVudCcpXG4gIHByb3RlY3RlZCB3aWRnZXRzQ29udGVudCE6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+O1xuXG4gIEBDb250ZW50Q2hpbGRyZW4oUmRzVGltZWxpbmVFdmVudENvbXBvbmVudCkgcHJvdGVjdGVkIGV2ZW50czogUXVlcnlMaXN0PFxuICAgIFJkc1RpbWVsaW5lRXZlbnRDb21wb25lbnQ8dW5rbm93bj5cbiAgPjtcblxuICBwcm90ZWN0ZWQgZ2V0IHNob3dHcmFkaWVudFJpZ2h0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnByZXNlbnRhdGlvbk1vZGUgIT09ICdzY3JvbGwnICYmXG4gICAgICB0aGlzLm9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcgJiZcbiAgICAgICF0aGlzLmlzU3RhcnRCdXR0b25BY3RpdmUgJiZcbiAgICAgIHRoaXMuaXNFbmRCdXR0b25BY3RpdmVcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBzaG93R3JhZGllbnRMZWZ0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnByZXNlbnRhdGlvbk1vZGUgIT09ICdzY3JvbGwnICYmXG4gICAgICB0aGlzLm9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcgJiZcbiAgICAgIHRoaXMuaXNTdGFydEJ1dHRvbkFjdGl2ZSAmJlxuICAgICAgIXRoaXMuaXNFbmRCdXR0b25BY3RpdmVcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBzaG93Q2lyY2xlR3JhZGllbnRIb3Jpem9udGFsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnByZXNlbnRhdGlvbk1vZGUgIT09ICdzY3JvbGwnICYmXG4gICAgICB0aGlzLm9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcgJiZcbiAgICAgIHRoaXMuaXNTdGFydEJ1dHRvbkFjdGl2ZSAmJlxuICAgICAgdGhpcy5pc0VuZEJ1dHRvbkFjdGl2ZVxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IHNob3dDaXJjbGVHcmFkaWVudFZlcnRpY2FsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnByZXNlbnRhdGlvbk1vZGUgIT09ICdzY3JvbGwnICYmXG4gICAgICB0aGlzLm9yaWVudGF0aW9uID09PSAndmVydGljYWwnICYmXG4gICAgICB0aGlzLmlzU3RhcnRCdXR0b25BY3RpdmUgJiZcbiAgICAgIHRoaXMuaXNFbmRCdXR0b25BY3RpdmVcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBzaG93R3JhZGllbnRUb3AoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMucHJlc2VudGF0aW9uTW9kZSAhPT0gJ3Njcm9sbCcgJiZcbiAgICAgIHRoaXMub3JpZW50YXRpb24gPT09ICd2ZXJ0aWNhbCcgJiZcbiAgICAgICF0aGlzLmlzU3RhcnRCdXR0b25BY3RpdmUgJiZcbiAgICAgIHRoaXMuaXNFbmRCdXR0b25BY3RpdmVcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBzaG93R3JhZGllbnRCb3R0b20oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMucHJlc2VudGF0aW9uTW9kZSAhPT0gJ3Njcm9sbCcgJiZcbiAgICAgIHRoaXMub3JpZW50YXRpb24gPT09ICd2ZXJ0aWNhbCcgJiZcbiAgICAgIHRoaXMuaXNTdGFydEJ1dHRvbkFjdGl2ZSAmJlxuICAgICAgIXRoaXMuaXNFbmRCdXR0b25BY3RpdmVcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBpc1N0YXJ0QnV0dG9uQWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm51bWJlck9mUGFnZXMgPiAwICYmIHRoaXMuYWN0aXZlUGFnZSA+IDE7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IGlzRW5kQnV0dG9uQWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm51bWJlck9mUGFnZXMgPiAwICYmIHRoaXMuYWN0aXZlUGFnZSA8IHRoaXMubnVtYmVyT2ZQYWdlcztcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnRyaWdnZXJDYWxjdWxhdGlvbiRcbiAgICAgIC5waXBlKGRlbGF5KDEpLCB0YWtlVW50aWxEZXN0cm95ZWQodGhpcy5kZXN0cm95UmVmKSlcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jYWxjdWxhdGVOdW1iZXJPZlBhZ2VzKCkpO1xuXG4gICAgdGhpcy5zZXR1cFNjcm9sbExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5zZXR1cEV2ZW50SGFuZGxlcnModGhpcy5ldmVudHMpO1xuXG4gICAgdGhpcy5ldmVudHMuY2hhbmdlc1xuICAgICAgLnBpcGUodGFrZVVudGlsRGVzdHJveWVkKHRoaXMuZGVzdHJveVJlZikpXG4gICAgICAuc3Vic2NyaWJlKChldmVudHMpID0+IHtcbiAgICAgICAgdGhpcy5yZW1vdmVPbGRIYW5kbGVycyQubmV4dCgpO1xuICAgICAgICB0aGlzLnNldHVwRXZlbnRIYW5kbGVycyhldmVudHMpO1xuICAgICAgICB0aGlzLnRyaWdnZXJDYWxjdWxhdGlvbiQubmV4dCgpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLnRyaWdnZXJDYWxjdWxhdGlvbiQubmV4dCgpO1xuICB9XG5cbiAgbmdBZnRlclZpZXdDaGVja2VkKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID1cbiAgICAgICAgdGhpcy53aWRnZXRzQ29udGVudC5uYXRpdmVFbGVtZW50LnNjcm9sbFdpZHRoID5cbiAgICAgICAgdGhpcy53aWRnZXRzQ29udGVudC5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoO1xuICAgICAgdGhpcy5jb250ZW50U2Nyb2xsKG5ld1ZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmV3VmFsdWUgPVxuICAgICAgICB0aGlzLndpZGdldHNDb250ZW50Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSGVpZ2h0ID5cbiAgICAgICAgdGhpcy53aWRnZXRzQ29udGVudC5uYXRpdmVFbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgIHRoaXMuY29udGVudFNjcm9sbChuZXdWYWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGlmIChcbiAgICAgICdvcmllbnRhdGlvbicgaW4gY2hhbmdlcyB8fFxuICAgICAgJ2FsaWduJyBpbiBjaGFuZ2VzIHx8XG4gICAgICAncHJlc2VudGF0aW9uTW9kZScgaW4gY2hhbmdlc1xuICAgICkge1xuICAgICAgdGhpcy5hY3RpdmVQYWdlID0gMTtcbiAgICAgIHRoaXMudHJpZ2dlckNhbGN1bGF0aW9uJC5uZXh0KCk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy50cmlnZ2VyQ2FsY3VsYXRpb24kLmNvbXBsZXRlKCk7XG4gIH1cblxuICBoYXNQcmV2UGFnZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gMSA8IHRoaXMuYWN0aXZlUGFnZSAmJiB0aGlzLmFjdGl2ZVBhZ2UgPD0gdGhpcy5udW1iZXJPZlBhZ2VzO1xuICB9XG5cbiAgaGFzTmV4dFBhZ2UoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlUGFnZSA8IHRoaXMubnVtYmVyT2ZQYWdlcztcbiAgfVxuXG4gIHNjcm9sbFN0YXJ0KCk6IHZvaWQge1xuICAgIHRoaXMuc2Nyb2xsJC5uZXh0KCdzdGFydCcpO1xuICB9XG5cbiAgc2Nyb2xsRW5kKCk6IHZvaWQge1xuICAgIHRoaXMuc2Nyb2xsJC5uZXh0KCdlbmQnKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBjb250ZW50U2Nyb2xsKG5ld1ZhbHVlPzogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzU2Nyb2xsYWJsZSAhPT0gbmV3VmFsdWUpIHtcbiAgICAgIHRoaXMuaXNTY3JvbGxhYmxlID0gISFuZXdWYWx1ZTtcbiAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBFdmVudEhhbmRsZXJzPFQ+KFxuICAgIGV2ZW50czogUXVlcnlMaXN0PFJkc1RpbWVsaW5lRXZlbnRDb21wb25lbnQ8VD4+LFxuICApOiB2b2lkIHtcbiAgICBtZXJnZSguLi5ldmVudHMubWFwKChlKSA9PiBlLnNlbGVjdGVkLnBpcGUobWFwKCgpID0+IGUpKSkpXG4gICAgICAucGlwZShcbiAgICAgICAgdGFrZVVudGlsKHRoaXMucmVtb3ZlT2xkSGFuZGxlcnMkKSxcbiAgICAgICAgdGFrZVVudGlsRGVzdHJveWVkKHRoaXMuZGVzdHJveVJlZiksXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKChlKSA9PiB0aGlzLnVwZGF0ZUV2ZW50U3RhdGVzKGUpKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBTY3JvbGxMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgZnJvbUV2ZW50KHRoaXMud2lkZ2V0c0NvbnRlbnQubmF0aXZlRWxlbWVudCwgJ3Njcm9sbCcpXG4gICAgICAucGlwZSh0YWtlVW50aWxEZXN0cm95ZWQodGhpcy5kZXN0cm95UmVmKSlcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4gKHRoaXMuaXNTY3JvbGxpbmcgPSB0cnVlKSk7XG4gICAgZnJvbUV2ZW50KHRoaXMud2lkZ2V0c0NvbnRlbnQubmF0aXZlRWxlbWVudCwgJ3Njcm9sbGVuZCcpXG4gICAgICAucGlwZSh0YWtlVW50aWxEZXN0cm95ZWQodGhpcy5kZXN0cm95UmVmKSlcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4gKHRoaXMuaXNTY3JvbGxpbmcgPSBmYWxzZSkpO1xuXG4gICAgdGhpcy5zY3JvbGwkXG4gICAgICAucGlwZShcbiAgICAgICAgZmlsdGVyKCgpID0+ICF0aGlzLmlzU2Nyb2xsaW5nKSxcbiAgICAgICAgdGFrZVVudGlsRGVzdHJveWVkKHRoaXMuZGVzdHJveVJlZiksXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKChkaXIpID0+IHRoaXMuc2Nyb2xsKGRpcikpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVFdmVudFN0YXRlczxUPihzZWxlY3RlZDogUmRzVGltZWxpbmVFdmVudENvbXBvbmVudDxUPik6IHZvaWQge1xuICAgIGlmIChzZWxlY3RlZC5ldmVudC5zdGF0dXMgIT09ICdkaXNhYmxlZCcpIHtcbiAgICAgIHRoaXMuZXZlbnRzLmZvckVhY2goKGV2ZW50Q29tcG9uZW50KSA9PiB7XG4gICAgICAgIGV2ZW50Q29tcG9uZW50LmlzQWN0aXZlID0gc2VsZWN0ZWQgPT09IGV2ZW50Q29tcG9uZW50O1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzY3JvbGwoZGlyZWN0aW9uOiAnc3RhcnQnIHwgJ2VuZCcpOiB2b2lkIHtcbiAgICBjb25zdCBoYXNQYWdlID1cbiAgICAgIGRpcmVjdGlvbiA9PT0gJ2VuZCcgPyB0aGlzLmhhc05leHRQYWdlKCkgOiB0aGlzLmhhc1ByZXZQYWdlKCk7XG5cbiAgICBpZiAoaGFzUGFnZSkge1xuICAgICAgY29uc3QgZGlyZWN0aW9uU2lnbiA9IGRpcmVjdGlvbiA9PT0gJ2VuZCcgPyAxIDogLTE7XG4gICAgICB0aGlzLmFjdGl2ZVBhZ2UgPSB0aGlzLmFjdGl2ZVBhZ2UgKyBkaXJlY3Rpb25TaWduO1xuICAgICAgY29uc3Qgc2Nyb2xsT3B0aW9uczogU2Nyb2xsVG9PcHRpb25zID0geyBiZWhhdmlvcjogJ3Ntb290aCcgfTtcblxuICAgICAgaWYgKHRoaXMub3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICBzY3JvbGxPcHRpb25zLmxlZnQgPVxuICAgICAgICAgIHRoaXMud2lkZ2V0c0NvbnRlbnQubmF0aXZlRWxlbWVudC5zY3JvbGxMZWZ0ICtcbiAgICAgICAgICB0aGlzLmdldFNjcm9sbE9mZnNldCgpICogZGlyZWN0aW9uU2lnbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNjcm9sbE9wdGlvbnMudG9wID1cbiAgICAgICAgICB0aGlzLndpZGdldHNDb250ZW50Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG9wICtcbiAgICAgICAgICB0aGlzLmdldFNjcm9sbE9mZnNldCgpICogZGlyZWN0aW9uU2lnbjtcbiAgICAgIH1cblxuICAgICAgdGhpcy53aWRnZXRzQ29udGVudC5uYXRpdmVFbGVtZW50LnNjcm9sbFRvKHNjcm9sbE9wdGlvbnMpO1xuICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVOdW1iZXJPZlBhZ2VzKCk6IHZvaWQge1xuICAgIGNvbnN0IGJlZm9yZU51bWJlck9mUGFnZXMgPSB0aGlzLm51bWJlck9mUGFnZXM7XG4gICAgY29uc3Qgc2VnbWVudHMgPVxuICAgICAgdGhpcy5vcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnXG4gICAgICAgID8gKHRoaXMud2lkZ2V0c0NvbnRlbnQubmF0aXZlRWxlbWVudC5zY3JvbGxXaWR0aCAtXG4gICAgICAgICAgICB0aGlzLndpZGdldHNDb250ZW50Lm5hdGl2ZUVsZW1lbnQuY2xpZW50V2lkdGgpIC9cbiAgICAgICAgICB0aGlzLmdldFNjcm9sbE9mZnNldCgpXG4gICAgICAgIDogKHRoaXMud2lkZ2V0c0NvbnRlbnQubmF0aXZlRWxlbWVudC5zY3JvbGxIZWlnaHQgLVxuICAgICAgICAgICAgdGhpcy53aWRnZXRzQ29udGVudC5uYXRpdmVFbGVtZW50LmNsaWVudEhlaWdodCkgL1xuICAgICAgICAgIHRoaXMuZ2V0U2Nyb2xsT2Zmc2V0KCk7XG4gICAgdGhpcy5udW1iZXJPZlBhZ2VzID0gTWF0aC5jZWlsKHNlZ21lbnRzKSArIDE7XG5cbiAgICBpZiAoYmVmb3JlTnVtYmVyT2ZQYWdlcyAhPT0gdGhpcy5udW1iZXJPZlBhZ2VzKSB7XG4gICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMud2lkZ2V0c0NvbnRlbnQubmF0aXZlRWxlbWVudC5zY3JvbGxUbyh7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgYmVoYXZpb3I6ICdpbnN0YW50JyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyB3aGVuIGNoYW5naW5nIG9yaWVudGF0aW9uIHNvbWV0aGluZyB0cmlnZ2VycyBzY3JvbGwgZXZlbnQsIHRoYXQncyB3aHkgdGhlIGxpbmUgYmVsb3cgaXMgbmVlZGVkXG4gICAgICB0aGlzLmlzU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgfSwgMjUpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTY3JvbGxPZmZzZXQoKTogbnVtYmVyIHtcbiAgICBjb25zdCBwYWdlV2lkdGggPVxuICAgICAgdGhpcy5vcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnXG4gICAgICAgID8gdGhpcy53aWRnZXRzQ29udGVudC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoXG4gICAgICAgIDogdGhpcy53aWRnZXRzQ29udGVudC5uYXRpdmVFbGVtZW50Lm9mZnNldEhlaWdodDtcblxuICAgIHJldHVybiBwYWdlV2lkdGggLSBwYWdlV2lkdGggKiB0aGlzLnBhZ2VPZmZzZXRGYWN0b3I7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJyZHMtc2Nyb2xsaW5nIHJkcy1zY3JvbGxpbmcte3sgb3JpZW50YXRpb24gfX1cIj5cbiAgQGlmIChwcmVzZW50YXRpb25Nb2RlID09PSAnc2xpZGVyJykge1xuICAgIEBpZiAoaXNTdGFydEJ1dHRvbkFjdGl2ZSkge1xuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz1cInJkcy1hcnJvd1wiXG4gICAgICAgIFtjbGFzcy5yZHMtYXJyb3ctbGVmdF09XCJvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnXCJcbiAgICAgICAgW2NsYXNzLnJkcy1hcnJvdy10b3BdPVwib3JpZW50YXRpb24gPT09ICd2ZXJ0aWNhbCdcIlxuICAgICAgPlxuICAgICAgICA8YnV0dG9uIHJkcy1pY29uLWJ1dHRvbiBzaXplPVwic1wiIChjbGljayk9XCJzY3JvbGxTdGFydCgpXCI+XG4gICAgICAgICAgPHJkcy1pY29uXG4gICAgICAgICAgICBuYW1lc3BhY2U9XCJmaWxsZWRcIlxuICAgICAgICAgICAgW2ljb25dPVwiXG4gICAgICAgICAgICAgIG9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcgPyAnY2hldnJvbl9sZWZ0JyA6ICdjaGV2cm9uX3VwJ1xuICAgICAgICAgICAgXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIH1cbiAgfVxuICA8ZGl2XG4gICAgY2xhc3M9XCJyZHMtc2Nyb2xsaW5nLWNvbnRhaW5lclwiXG4gICAgW2NsYXNzLnJkcy10aW1lbGluZS1jaXJjbGUtZ3JhZGllbnQtaG9yaXpvbnRhbF09XCJcbiAgICAgIHNob3dDaXJjbGVHcmFkaWVudEhvcml6b250YWxcbiAgICBcIlxuICAgIFtjbGFzcy5yZHMtdGltZWxpbmUtY2lyY2xlLWdyYWRpZW50LXZlcnRpY2FsXT1cInNob3dDaXJjbGVHcmFkaWVudFZlcnRpY2FsXCJcbiAgICBbY2xhc3MucmRzLXRpbWVsaW5lLWdyYWRpZW50LXJpZ2h0XT1cInNob3dHcmFkaWVudFJpZ2h0XCJcbiAgICBbY2xhc3MucmRzLXRpbWVsaW5lLWdyYWRpZW50LWxlZnRdPVwic2hvd0dyYWRpZW50TGVmdFwiXG4gICAgW2NsYXNzLnJkcy10aW1lbGluZS1ncmFkaWVudC10b3BdPVwic2hvd0dyYWRpZW50VG9wXCJcbiAgICBbY2xhc3MucmRzLXRpbWVsaW5lLWdyYWRpZW50LWJvdHRvbV09XCJzaG93R3JhZGllbnRCb3R0b21cIlxuICA+XG4gICAgPGRpdlxuICAgICAgI3dpZGdldHNDb250ZW50XG4gICAgICBjbGFzcz1cInJkcy1zY3JvbGxpbmctd3JhcHBlciByZHMtc2Nyb2xsaW5nLXdyYXBwZXIte3tcbiAgICAgICAgb3JpZW50YXRpb25cbiAgICAgIH19IHJkcy1zY3JvbGxpbmctd3JhcHBlci17eyBwcmVzZW50YXRpb25Nb2RlIH19XCJcbiAgICAgIChzY3JvbGwpPVwiY29udGVudFNjcm9sbCgpXCJcbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzPVwicmRzLXRpbWVsaW5lLXdyYXBwZXIgcmRzLXRpbWVsaW5lLXdyYXBwZXIte3tcbiAgICAgICAgICBhbGlnblxuICAgICAgICB9fSByZHMtdGltZWxpbmUtd3JhcHBlci17eyBvcmllbnRhdGlvbiB9fVwiXG4gICAgICA+XG4gICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cInJkcy10aW1lbGluZS1ldmVudFwiIC8+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIEBpZiAocHJlc2VudGF0aW9uTW9kZSA9PT0gJ3NsaWRlcicpIHtcbiAgICBAaWYgKGlzRW5kQnV0dG9uQWN0aXZlKSB7XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzPVwicmRzLWFycm93XCJcbiAgICAgICAgW2NsYXNzLnJkcy1hcnJvdy1yaWdodF09XCJvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnXCJcbiAgICAgICAgW2NsYXNzLnJkcy1hcnJvdy1kb3duXT1cIm9yaWVudGF0aW9uID09PSAndmVydGljYWwnXCJcbiAgICAgID5cbiAgICAgICAgPGJ1dHRvbiByZHMtaWNvbi1idXR0b24gc2l6ZT1cInNcIiAoY2xpY2spPVwic2Nyb2xsRW5kKClcIj5cbiAgICAgICAgICA8cmRzLWljb25cbiAgICAgICAgICAgIG5hbWVzcGFjZT1cImZpbGxlZFwiXG4gICAgICAgICAgICBbaWNvbl09XCJcbiAgICAgICAgICAgICAgb3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJyA/ICdjaGV2cm9uX3JpZ2h0JyA6ICdjaGV2cm9uX2Rvd24nXG4gICAgICAgICAgICBcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgfVxuICB9XG4gIEBpZiAocHJlc2VudGF0aW9uTW9kZSA9PT0gJ3BhZ2luYXRpb24nKSB7XG4gICAgPGRpdiBjbGFzcz1cInJkcy10aW1lbGluZS1wYWdpbmF0aW9uXCI+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIHJkcy1pY29uLWJ1dHRvblxuICAgICAgICBzaXplPVwic1wiXG4gICAgICAgIFtkaXNhYmxlZF09XCIhaXNTdGFydEJ1dHRvbkFjdGl2ZVwiXG4gICAgICAgIChjbGljayk9XCJzY3JvbGxTdGFydCgpXCJcbiAgICAgID5cbiAgICAgICAgPHJkcy1pY29uXG4gICAgICAgICAgbmFtZXNwYWNlPVwiZmlsbGVkXCJcbiAgICAgICAgICBpY29uPVwiY2hldnJvbl9sZWZ0XCJcbiAgICAgICAgICBbY2xhc3MuYWN0aXZlXT1cImlzU3RhcnRCdXR0b25BY3RpdmVcIlxuICAgICAgICAvPlxuICAgICAgPC9idXR0b24+XG4gICAgICA8ZGl2IGNsYXNzPVwicmRzLXRpbWVsaW5lLXBhZ2luYXRpb24tdGV4dFwiPlxuICAgICAgICB7eyBhY3RpdmVQYWdlIH19L3t7IG51bWJlck9mUGFnZXMgfX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGJ1dHRvblxuICAgICAgICByZHMtaWNvbi1idXR0b25cbiAgICAgICAgc2l6ZT1cInNcIlxuICAgICAgICBbZGlzYWJsZWRdPVwiIWlzRW5kQnV0dG9uQWN0aXZlXCJcbiAgICAgICAgKGNsaWNrKT1cInNjcm9sbEVuZCgpXCJcbiAgICAgID5cbiAgICAgICAgPHJkcy1pY29uXG4gICAgICAgICAgbmFtZXNwYWNlPVwiZmlsbGVkXCJcbiAgICAgICAgICBpY29uPVwiY2hldnJvbl9yaWdodFwiXG4gICAgICAgICAgW2NsYXNzLmFjdGl2ZV09XCJpc0VuZEJ1dHRvbkFjdGl2ZVwiXG4gICAgICAgIC8+XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgfVxuPC9kaXY+XG4iXX0=