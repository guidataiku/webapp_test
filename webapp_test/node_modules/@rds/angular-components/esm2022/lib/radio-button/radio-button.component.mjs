import { FocusMonitor } from '@angular/cdk/a11y';
import { UniqueSelectionDispatcher } from '@angular/cdk/collections';
import { booleanAttribute, ChangeDetectionStrategy, ChangeDetectorRef, Component, DestroyRef, ElementRef, EventEmitter, HostBinding, HostListener, inject, Input, Output, ViewChild, ViewEncapsulation, } from '@angular/core';
import { RDS_RADIO_GROUP, } from './radio-button-group.directive';
import { RdsRadioChangedEvent } from './radio-button-changed-event';
import { animate, state, style, transition, trigger, } from '@angular/animations';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import { FormGroupDirective } from '@angular/forms';
import { noop } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
let nextUniqueId = 0;
export const rdsRadioAnimations = {
    /** Animation that transitions the form field's error and hint messages. */
    transitionMessages: trigger('transitionMessages', [
        state('enter', style({ opacity: 1, transform: 'translateY(0%)' })),
        transition('void => enter', [
            style({ opacity: 0, transform: 'translateY(-100%)' }),
            animate('200ms cubic-bezier(0.55, 0, 0.55, 0.2)'),
        ]),
    ]),
};
export class RdsRadioButtonComponent {
    get inputId() {
        return `${this.id || this._uniqueId}-input`;
    }
    get errorState() {
        if (this.radioGroup) {
            const parent = this.radioGroup.parentFormGroup || this.radioGroup.parentForm;
            const control = this.radioGroup.control;
            if (control) {
                return (control.invalid && (control.touched || parent?.submitted || false));
            }
        }
        return false;
    }
    set checked(value) {
        const newCheckedState = booleanAttribute(value);
        if (this._checked !== newCheckedState) {
            this._checked = newCheckedState;
            if (newCheckedState &&
                this.radioGroup &&
                this.radioGroup.value !== this.value) {
                this.radioGroup.selected = this;
            }
            else if (!newCheckedState &&
                this.radioGroup &&
                this.radioGroup.value === this.value) {
                this.radioGroup.selected = null;
            }
            if (newCheckedState) {
                this.radioDispatcher.notify(this.id, this.name);
            }
        }
    }
    get checked() {
        return this._checked;
    }
    get value() {
        return this._value;
    }
    set value(value) {
        if (this._value !== value) {
            this._value = value;
            if (this.radioGroup !== null) {
                if (!this.checked) {
                    this.checked = this.radioGroup.value === value;
                }
                if (this.checked) {
                    this.radioGroup.selected = this;
                }
            }
        }
    }
    get labelPosition() {
        return (this._labelPosition ||
            (this.radioGroup && this.radioGroup.labelPosition) ||
            'after');
    }
    set labelPosition(value) {
        this._labelPosition = value;
    }
    set disabled(value) {
        this._disabled = booleanAttribute(value);
    }
    get disabled() {
        return (this._disabled || (this.radioGroup !== null && this.radioGroup.disabled));
    }
    set required(value) {
        this._required = booleanAttribute(value);
    }
    get required() {
        return (this._required || (this.radioGroup && this.radioGroup.required) || false);
    }
    onFocus() {
        this._inputElement.nativeElement.focus();
    }
    get isErrorMessageVisible() {
        return this.errorState;
    }
    constructor() {
        this.radioGroup = inject(RDS_RADIO_GROUP, { optional: true });
        this.destroyRef = inject(DestroyRef);
        this.elementRef = inject(ElementRef);
        this.cdr = inject(ChangeDetectorRef);
        this.focusMonitor = inject(FocusMonitor);
        this.radioDispatcher = inject(UniqueSelectionDispatcher);
        this._uniqueId = `rds-radio-${++nextUniqueId}`;
        this.subscriptAnimationState = '';
        this.hostClass = 'rds-radio-button';
        this.id = this._uniqueId;
        this.size = 'l';
        this._checked = false;
        this.buttonChanged = new EventEmitter();
        this.removeUniqueSelectionListener = noop;
        this.removeUniqueSelectionListener = this.radioDispatcher.listen((id, name) => {
            if (id !== this.id && name === this.name) {
                this.checked = false;
            }
        });
    }
    focus(options) {
        this.focusMonitor.focusVia(this._inputElement, 'keyboard', options);
    }
    markForCheck() {
        this.cdr.markForCheck();
    }
    ngOnInit() {
        if (this.radioGroup) {
            this.checked = this.radioGroup.value === this._value;
            this.name = this.radioGroup.name;
        }
    }
    ngAfterViewInit() {
        this.focusMonitor
            .monitor(this.elementRef, true)
            .subscribe((focusOrigin) => {
            if (!focusOrigin && this.radioGroup) {
                this.radioGroup.touch();
            }
        });
        this.subscriptAnimationState = 'enter'; // Avoid animations on load.
        this.cdr.detectChanges();
        // Run change detection if the value changes.
        if (this.radioGroup) {
            if (this.radioGroup.control && this.radioGroup.control.valueChanges) {
                this.radioGroup.control.valueChanges
                    .pipe(takeUntilDestroyed(this.destroyRef))
                    .subscribe(() => {
                    this.radioGroup?.control?.markAsDirty();
                    this.radioGroup?.control?.markAsTouched();
                    this.cdr.markForCheck();
                });
            }
            const parent = this.radioGroup.parentFormGroup || this.radioGroup.control.parent;
            if (parent instanceof FormGroupDirective) {
                parent.ngSubmit
                    .pipe(takeUntilDestroyed(this.destroyRef))
                    .subscribe(() => {
                    this.cdr.markForCheck();
                });
            }
        }
    }
    ngOnDestroy() {
        this.focusMonitor.stopMonitoring(this.elementRef);
        this.removeUniqueSelectionListener();
    }
    emitChangeEvent() {
        this.buttonChanged.emit(new RdsRadioChangedEvent(this, this._value));
    }
    onInputClick(event) {
        // We have to stop propagation for click events on the visual hidden input element.
        // By default, when a user clicks on a label element, a generated click event will be
        // dispatched on the associated input element. Since we are using a label element as our
        // root container, the click event on the `radio-button` will be executed twice.
        // The real click event will bubble up, and the generated click event also tries to bubble up.
        // This will lead to multiple click events.
        // Preventing bubbling for the second event will solve that issue.
        event.stopPropagation();
    }
    onInputChange(event) {
        // We always have to stop propagation on the change event.
        // Otherwise the change event, from the input element, will bubble up and
        // emit its event object to the `buttonChange` output.
        event.stopPropagation();
        const groupValueChanged = this.radioGroup && this.value !== this.radioGroup.value;
        this.checked = true;
        this.emitChangeEvent();
        if (this.radioGroup) {
            this.radioGroup._controlValueAccessorChangeFn(this.value);
            if (groupValueChanged) {
                this.radioGroup.emitChangeEvent();
            }
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsRadioButtonComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.1", type: RdsRadioButtonComponent, selector: "rds-radio-button", inputs: { id: "id", name: "name", size: "size", ariaLabel: "ariaLabel", ariaLabelledby: ["aria-labelledby", "ariaLabelledby"], ariaDescribedby: ["aria-describedby", "ariaDescribedby"], checked: "checked", value: "value", labelPosition: "labelPosition", disabled: "disabled", required: "required" }, outputs: { buttonChanged: "buttonChanged" }, host: { listeners: { "focus": "onFocus()" }, properties: { "class": "this.hostClass", "class.rds-radio--invalid": "this.errorState", "attr.id": "this.id", "attr.aria-label": "this.ariaLabel", "attr.aria-labelledby": "this.ariaLabelledby", "attr.aria-describedby": "this.ariaDescribedby", "class.rds-radio-checked": "this.checked", "class.rds-radio-disabled": "this.disabled" } }, viewQueries: [{ propertyName: "_inputElement", first: true, predicate: ["input"], descendants: true }], ngImport: i0, template: `
    <label [attr.for]="inputId" class="rds-radio-label">
      <!-- The actual 'radio' part of the control. -->
      <div class="rds-radio-container">
        <div class="rds-radio-checkmark-outer-circle"></div>
        <div class="rds-radio-checkmark-inner-circle"></div>
        <input
          class="rds-radio-input"
          type="radio"
          [id]="inputId"
          [checked]="checked"
          [disabled]="disabled"
          [attr.name]="name"
          [attr.value]="value"
          [required]="required"
          [attr.aria-label]="ariaLabel"
          [attr.aria-labelledby]="ariaLabelledby"
          [attr.aria-describedby]="ariaDescribedby"
          (change)="onInputChange($event)"
          (click)="onInputClick($event)"
        />
        <div class="rds-checkmark-hover"></div>
      </div>

      <!-- The label content for radio control. -->
      <div
        class="rds-radio-label-content"
        [class.rds-radio-label-before]="labelPosition === 'before'"
        [ngClass]="'rds-radio-label-content--' + size"
      >
        <!-- Add an invisible span so JAWS can read the label -->
        <span style="display:none">&nbsp;</span>
        <ng-content />
      </div>
    </label>
    <div class="rds-radio__subscript-wrapper">
      @switch (isErrorMessageVisible) {
        @case (true) {
          <div
            class="rds-radio__subscript rds-radio__subscript--error"
            [@transitionMessages]="subscriptAnimationState"
          >
            <ng-content select="rds-control-error" />
          </div>
        }
        @case (false) {
          <div
            class="rds-radio__subscript rds-radio__subscript--hint"
            [@transitionMessages]="subscriptAnimationState"
          >
            <ng-content select="rds-control-hint" />
          </div>
        }
      }
    </div>
  `, isInline: true, styles: [".rds-radio-checkmark-inner-circle{border-radius:50%;height:20px;left:0;position:absolute;top:0;transition:transform ease .28s,background-color ease .28s;width:20px;background:var(--rds-color-informative);transform:scale(.001)}.rds-radio-checked .rds-radio-checkmark-inner-circle{transform:scale(.5)}.cdk-keyboard-focused.rds-radio-button .rds-checkmark-hover{display:flex;border:2px solid var(--rds-color-stroke-active-focus)}.rds-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.rds-radio-button.rds-radio--invalid .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-error)}.rds-radio-button.rds-radio--invalid .rds-radio-checkmark-inner-circle{background:var(--rds-color-error)}.rds-radio-button.rds-radio--invalid.rds-radio-disabled .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-grey-2)}.rds-radio-button.rds-radio--invalid.rds-radio-disabled .rds-radio-checkmark-inner-circle{background:var(--rds-color-grey-2)}.rds-radio-button:not(.rds-radio--invalid) .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-600-grey-2)}.rds-radio-button:not(.rds-radio--invalid):not(.rds-radio-checked) .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-grey-3)}.rds-radio-button:not(.rds-radio--invalid):not(.rds-radio-checked).rds-radio-disabled .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-grey-2)}.rds-radio-button:not(.rds-radio--invalid).rds-radio-checked .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-informative)}.rds-radio-button:not(.rds-radio--invalid).rds-radio-checked .rds-radio-checkmark-inner-circle{background:var(--rds-color-informative)}.rds-radio-button:not(.rds-radio--invalid).rds-radio-checked.rds-radio-disabled .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-grey-2)}.rds-radio-button:not(.rds-radio--invalid).rds-radio-checked.rds-radio-disabled .rds-radio-checkmark-inner-circle{background:var(--rds-color-grey-2)}.rds-radio-button .rds-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.rds-radio-button .rds-radio-container .rds-radio-checkmark-outer-circle{height:20px;left:0;position:absolute;top:0;transition:border-color ease .28s;width:20px;border-width:2px;border-style:solid;border-radius:50%}.rds-radio-button .rds-radio-container .rds-radio-input{bottom:0;left:50%;border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;outline:0;-webkit-appearance:none}.rds-radio-button.rds-radio-disabled .rds-radio-label-content{color:var(--rds-color-disabled)}.rds-radio-button.rds-radio-disabled .rds-radio-label{cursor:default}.rds-radio-button .rds-checkmark-hover{display:none;position:absolute;top:-8px;left:-8px;height:36px;width:36px;border-radius:50%;background-color:var(--rds-color-bg-transparent-hover-select)}.rds-radio-button .rds-radio-label-content{padding-left:10px;color:var(--rds-color-high-contrast)}.rds-radio-button:not(.rds-radio-checked):not(.rds-radio--invalid) .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-grey-3)}.rds-radio-button:not(.rds-radio-checked):not(.rds-radio--invalid).rds-radio-disabled .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-grey-2)}.rds-radio-button .rds-radio-checkmark-outer-circle,.rds-radio-button .rds-radio-checkmark-inner-circle{z-index:1}.rds-radio-button:hover:not(.rds-radio-disabled) .rds-checkmark-hover{display:flex}.rds-radio-button:active:not(.rds-radio-disabled) .rds-checkmark-hover{display:flex;background-color:var(--rds-color-bg-transparent-pressed)}.rds-radio-label{cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.rds-radio-label-content{display:inline-block;order:0;line-height:inherit;padding-left:10px;padding-right:0}.rds-radio-label-content--s{font-size:14px;font-weight:200;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-radio-label-content--m{font-size:16px;font-weight:200;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-radio-label-content--l{font-size:18px;font-weight:200;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-radio-label-content.rds-radio-label-before{order:-1;padding-left:0;padding-right:10px}.rds-radio__subscript-wrapper>div:not(:empty){margin-top:8px}.rds-radio-button.rds-radio-disabled .rds-radio__subscript--hint{color:var(--rds-color-disabled)}.rds-radio__subscript{font-size:12px;font-weight:400;line-height:16px;text-transform:none;letter-spacing:.5px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:left}.rds-radio__subscript--hint{color:var(--rds-color-low-contrast)}.rds-radio__subscript--error{color:var(--rds-color-error)}\n"], dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }], animations: [rdsRadioAnimations.transitionMessages], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsRadioButtonComponent, decorators: [{
            type: Component,
            args: [{ selector: 'rds-radio-button', template: `
    <label [attr.for]="inputId" class="rds-radio-label">
      <!-- The actual 'radio' part of the control. -->
      <div class="rds-radio-container">
        <div class="rds-radio-checkmark-outer-circle"></div>
        <div class="rds-radio-checkmark-inner-circle"></div>
        <input
          class="rds-radio-input"
          type="radio"
          [id]="inputId"
          [checked]="checked"
          [disabled]="disabled"
          [attr.name]="name"
          [attr.value]="value"
          [required]="required"
          [attr.aria-label]="ariaLabel"
          [attr.aria-labelledby]="ariaLabelledby"
          [attr.aria-describedby]="ariaDescribedby"
          (change)="onInputChange($event)"
          (click)="onInputClick($event)"
        />
        <div class="rds-checkmark-hover"></div>
      </div>

      <!-- The label content for radio control. -->
      <div
        class="rds-radio-label-content"
        [class.rds-radio-label-before]="labelPosition === 'before'"
        [ngClass]="'rds-radio-label-content--' + size"
      >
        <!-- Add an invisible span so JAWS can read the label -->
        <span style="display:none">&nbsp;</span>
        <ng-content />
      </div>
    </label>
    <div class="rds-radio__subscript-wrapper">
      @switch (isErrorMessageVisible) {
        @case (true) {
          <div
            class="rds-radio__subscript rds-radio__subscript--error"
            [@transitionMessages]="subscriptAnimationState"
          >
            <ng-content select="rds-control-error" />
          </div>
        }
        @case (false) {
          <div
            class="rds-radio__subscript rds-radio__subscript--hint"
            [@transitionMessages]="subscriptAnimationState"
          >
            <ng-content select="rds-control-hint" />
          </div>
        }
      }
    </div>
  `, encapsulation: ViewEncapsulation.None, animations: [rdsRadioAnimations.transitionMessages], changeDetection: ChangeDetectionStrategy.OnPush, styles: [".rds-radio-checkmark-inner-circle{border-radius:50%;height:20px;left:0;position:absolute;top:0;transition:transform ease .28s,background-color ease .28s;width:20px;background:var(--rds-color-informative);transform:scale(.001)}.rds-radio-checked .rds-radio-checkmark-inner-circle{transform:scale(.5)}.cdk-keyboard-focused.rds-radio-button .rds-checkmark-hover{display:flex;border:2px solid var(--rds-color-stroke-active-focus)}.rds-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.rds-radio-button.rds-radio--invalid .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-error)}.rds-radio-button.rds-radio--invalid .rds-radio-checkmark-inner-circle{background:var(--rds-color-error)}.rds-radio-button.rds-radio--invalid.rds-radio-disabled .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-grey-2)}.rds-radio-button.rds-radio--invalid.rds-radio-disabled .rds-radio-checkmark-inner-circle{background:var(--rds-color-grey-2)}.rds-radio-button:not(.rds-radio--invalid) .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-600-grey-2)}.rds-radio-button:not(.rds-radio--invalid):not(.rds-radio-checked) .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-grey-3)}.rds-radio-button:not(.rds-radio--invalid):not(.rds-radio-checked).rds-radio-disabled .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-grey-2)}.rds-radio-button:not(.rds-radio--invalid).rds-radio-checked .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-informative)}.rds-radio-button:not(.rds-radio--invalid).rds-radio-checked .rds-radio-checkmark-inner-circle{background:var(--rds-color-informative)}.rds-radio-button:not(.rds-radio--invalid).rds-radio-checked.rds-radio-disabled .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-grey-2)}.rds-radio-button:not(.rds-radio--invalid).rds-radio-checked.rds-radio-disabled .rds-radio-checkmark-inner-circle{background:var(--rds-color-grey-2)}.rds-radio-button .rds-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.rds-radio-button .rds-radio-container .rds-radio-checkmark-outer-circle{height:20px;left:0;position:absolute;top:0;transition:border-color ease .28s;width:20px;border-width:2px;border-style:solid;border-radius:50%}.rds-radio-button .rds-radio-container .rds-radio-input{bottom:0;left:50%;border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;outline:0;-webkit-appearance:none}.rds-radio-button.rds-radio-disabled .rds-radio-label-content{color:var(--rds-color-disabled)}.rds-radio-button.rds-radio-disabled .rds-radio-label{cursor:default}.rds-radio-button .rds-checkmark-hover{display:none;position:absolute;top:-8px;left:-8px;height:36px;width:36px;border-radius:50%;background-color:var(--rds-color-bg-transparent-hover-select)}.rds-radio-button .rds-radio-label-content{padding-left:10px;color:var(--rds-color-high-contrast)}.rds-radio-button:not(.rds-radio-checked):not(.rds-radio--invalid) .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-grey-3)}.rds-radio-button:not(.rds-radio-checked):not(.rds-radio--invalid).rds-radio-disabled .rds-radio-checkmark-outer-circle{border-color:var(--rds-color-grey-2)}.rds-radio-button .rds-radio-checkmark-outer-circle,.rds-radio-button .rds-radio-checkmark-inner-circle{z-index:1}.rds-radio-button:hover:not(.rds-radio-disabled) .rds-checkmark-hover{display:flex}.rds-radio-button:active:not(.rds-radio-disabled) .rds-checkmark-hover{display:flex;background-color:var(--rds-color-bg-transparent-pressed)}.rds-radio-label{cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.rds-radio-label-content{display:inline-block;order:0;line-height:inherit;padding-left:10px;padding-right:0}.rds-radio-label-content--s{font-size:14px;font-weight:200;line-height:20px;text-transform:none;letter-spacing:.3px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-radio-label-content--m{font-size:16px;font-weight:200;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-radio-label-content--l{font-size:18px;font-weight:200;line-height:24px;text-transform:none;letter-spacing:.2px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rds-radio-label-content.rds-radio-label-before{order:-1;padding-left:0;padding-right:10px}.rds-radio__subscript-wrapper>div:not(:empty){margin-top:8px}.rds-radio-button.rds-radio-disabled .rds-radio__subscript--hint{color:var(--rds-color-disabled)}.rds-radio__subscript{font-size:12px;font-weight:400;line-height:16px;text-transform:none;letter-spacing:.5px;font-family:roche-sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:left}.rds-radio__subscript--hint{color:var(--rds-color-low-contrast)}.rds-radio__subscript--error{color:var(--rds-color-error)}\n"] }]
        }], ctorParameters: () => [], propDecorators: { _inputElement: [{
                type: ViewChild,
                args: ['input']
            }], hostClass: [{
                type: HostBinding,
                args: ['class']
            }], errorState: [{
                type: HostBinding,
                args: ['class.rds-radio--invalid']
            }], id: [{
                type: Input
            }, {
                type: HostBinding,
                args: ['attr.id']
            }], name: [{
                type: Input
            }], size: [{
                type: Input
            }], ariaLabel: [{
                type: Input
            }, {
                type: HostBinding,
                args: ['attr.aria-label']
            }], ariaLabelledby: [{
                type: Input,
                args: ['aria-labelledby']
            }, {
                type: HostBinding,
                args: ['attr.aria-labelledby']
            }], ariaDescribedby: [{
                type: Input,
                args: ['aria-describedby']
            }, {
                type: HostBinding,
                args: ['attr.aria-describedby']
            }], checked: [{
                type: Input
            }, {
                type: HostBinding,
                args: ['class.rds-radio-checked']
            }], value: [{
                type: Input
            }], labelPosition: [{
                type: Input
            }], disabled: [{
                type: HostBinding,
                args: ['class.rds-radio-disabled']
            }, {
                type: Input
            }], required: [{
                type: Input
            }], buttonChanged: [{
                type: Output
            }], onFocus: [{
                type: HostListener,
                args: ['focus']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmFkaW8tYnV0dG9uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvYW5ndWxhci1jb21wb25lbnRzL3NyYy9saWIvcmFkaW8tYnV0dG9uL3JhZGlvLWJ1dHRvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWpELE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3JFLE9BQU8sRUFFTCxnQkFBZ0IsRUFDaEIsdUJBQXVCLEVBQ3ZCLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsVUFBVSxFQUNWLFVBQVUsRUFDVixZQUFZLEVBQ1osV0FBVyxFQUNYLFlBQVksRUFDWixNQUFNLEVBQ04sS0FBSyxFQUdMLE1BQU0sRUFDTixTQUFTLEVBQ1QsaUJBQWlCLEdBQ2xCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFDTCxlQUFlLEdBRWhCLE1BQU0sZ0NBQWdDLENBQUM7QUFDeEMsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDcEUsT0FBTyxFQUNMLE9BQU8sRUFFUCxLQUFLLEVBQ0wsS0FBSyxFQUNMLFVBQVUsRUFDVixPQUFPLEdBQ1IsTUFBTSxxQkFBcUIsQ0FBQztBQUM3QixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUNoRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sTUFBTSxDQUFDOzs7QUFLNUIsSUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFDO0FBRXJCLE1BQU0sQ0FBQyxNQUFNLGtCQUFrQixHQUUzQjtJQUNGLDJFQUEyRTtJQUMzRSxrQkFBa0IsRUFBRSxPQUFPLENBQUMsb0JBQW9CLEVBQUU7UUFDaEQsS0FBSyxDQUFDLE9B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QVc7dUJBQUMsc0JBQXNCO2dCQUtuQyxlQUFlO3NCQUZkLEtBQUs7dUJBQUMsa0JBQWtCOztzQkFDeEIsV0FBVzt1QkFBQyx1QkFBdUI7Z0JBS2hDLE9BQU87c0JBRlYsS0FBSzs7c0JBQ0wsV0FBVzt1QkFBQyx5QkFBeUI7Z0JBa0NsQyxLQUFLO3NCQURSLEtBQUs7Z0JBcUJGLGFBQWE7c0JBRGhCLEtBQUs7Z0JBY0YsUUFBUTtzQkFGWCxXQUFXO3VCQUFDLDBCQUEwQjs7c0JBQ3RDLEtBQUs7Z0JBWUYsUUFBUTtzQkFEWCxLQUFLO2dCQVdJLGFBQWE7c0JBQXRCLE1BQU07Z0JBR1AsT0FBTztzQkFETixZQUFZO3VCQUFDLE9BQU8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGb2N1c01vbml0b3IgfSBmcm9tICdAYW5ndWxhci9jZGsvYTExeSc7XG5pbXBvcnQgeyBCb29sZWFuSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jZGsvY29lcmNpb24nO1xuaW1wb3J0IHsgVW5pcXVlU2VsZWN0aW9uRGlzcGF0Y2hlciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2xsZWN0aW9ucyc7XG5pbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBib29sZWFuQXR0cmlidXRlLFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgRGVzdHJveVJlZixcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBIb3N0QmluZGluZyxcbiAgSG9zdExpc3RlbmVyLFxuICBpbmplY3QsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBWaWV3Q2hpbGQsXG4gIFZpZXdFbmNhcHN1bGF0aW9uLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIFJEU19SQURJT19HUk9VUCxcbiAgUmRzUmFkaW9Hcm91cERpcmVjdGl2ZSxcbn0gZnJvbSAnLi9yYWRpby1idXR0b24tZ3JvdXAuZGlyZWN0aXZlJztcbmltcG9ydCB7IFJkc1JhZGlvQ2hhbmdlZEV2ZW50IH0gZnJvbSAnLi9yYWRpby1idXR0b24tY2hhbmdlZC1ldmVudCc7XG5pbXBvcnQge1xuICBhbmltYXRlLFxuICBBbmltYXRpb25UcmlnZ2VyTWV0YWRhdGEsXG4gIHN0YXRlLFxuICBzdHlsZSxcbiAgdHJhbnNpdGlvbixcbiAgdHJpZ2dlcixcbn0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XG5pbXBvcnQgeyB0YWtlVW50aWxEZXN0cm95ZWQgfSBmcm9tICdAYW5ndWxhci9jb3JlL3J4anMtaW50ZXJvcCc7XG5pbXBvcnQgeyBGb3JtR3JvdXBEaXJlY3RpdmUgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBub29wIH0gZnJvbSAncnhqcyc7XG5cbmV4cG9ydCB0eXBlIFJkc1JhZGlvQnV0dG9uUG9zaXRpb24gPSAnYmVmb3JlJyB8ICdhZnRlcic7XG5leHBvcnQgdHlwZSBSZHNSYWRpb0J1dHRvblNpemUgPSAncycgfCAnbScgfCAnbCc7XG5cbmxldCBuZXh0VW5pcXVlSWQgPSAwO1xuXG5leHBvcnQgY29uc3QgcmRzUmFkaW9BbmltYXRpb25zOiB7XG4gIHJlYWRvbmx5IHRyYW5zaXRpb25NZXNzYWdlczogQW5pbWF0aW9uVHJpZ2dlck1ldGFkYXRhO1xufSA9IHtcbiAgLyoqIEFuaW1hdGlvbiB0aGF0IHRyYW5zaXRpb25zIHRoZSBmb3JtIGZpZWxkJ3MgZXJyb3IgYW5kIGhpbnQgbWVzc2FnZXMuICovXG4gIHRyYW5zaXRpb25NZXNzYWdlczogdHJpZ2dlcigndHJhbnNpdGlvbk1lc3NhZ2VzJywgW1xuICAgIHN0YXRlKCdlbnRlcicsIHN0eWxlKHsgb3BhY2l0eTogMSwgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgwJSknIH0pKSxcbiAgICB0cmFuc2l0aW9uKCd2b2lkID0+IGVudGVyJywgW1xuICAgICAgc3R5bGUoeyBvcGFjaXR5OiAwLCB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKC0xMDAlKScgfSksXG4gICAgICBhbmltYXRlKCcyMDBtcyBjdWJpYy1iZXppZXIoMC41NSwgMCwgMC41NSwgMC4yKScpLFxuICAgIF0pLFxuICBdKSxcbn07XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3Jkcy1yYWRpby1idXR0b24nLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxsYWJlbCBbYXR0ci5mb3JdPVwiaW5wdXRJZFwiIGNsYXNzPVwicmRzLXJhZGlvLWxhYmVsXCI+XG4gICAgICA8IS0tIFRoZSBhY3R1YWwgJ3JhZGlvJyBwYXJ0IG9mIHRoZSBjb250cm9sLiAtLT5cbiAgICAgIDxkaXYgY2xhc3M9XCJyZHMtcmFkaW8tY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZHMtcmFkaW8tY2hlY2ttYXJrLW91dGVyLWNpcmNsZVwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicmRzLXJhZGlvLWNoZWNrbWFyay1pbm5lci1jaXJjbGVcIj48L2Rpdj5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgY2xhc3M9XCJyZHMtcmFkaW8taW5wdXRcIlxuICAgICAgICAgIHR5cGU9XCJyYWRpb1wiXG4gICAgICAgICAgW2lkXT1cImlucHV0SWRcIlxuICAgICAgICAgIFtjaGVja2VkXT1cImNoZWNrZWRcIlxuICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgW2F0dHIubmFtZV09XCJuYW1lXCJcbiAgICAgICAgICBbYXR0ci52YWx1ZV09XCJ2YWx1ZVwiXG4gICAgICAgICAgW3JlcXVpcmVkXT1cInJlcXVpcmVkXCJcbiAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cImFyaWFMYWJlbFwiXG4gICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbGxlZGJ5XT1cImFyaWFMYWJlbGxlZGJ5XCJcbiAgICAgICAgICBbYXR0ci5hcmlhLWRlc2NyaWJlZGJ5XT1cImFyaWFEZXNjcmliZWRieVwiXG4gICAgICAgICAgKGNoYW5nZSk9XCJvbklucHV0Q2hhbmdlKCRldmVudClcIlxuICAgICAgICAgIChjbGljayk9XCJvbklucHV0Q2xpY2soJGV2ZW50KVwiXG4gICAgICAgIC8+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZHMtY2hlY2ttYXJrLWhvdmVyXCI+PC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPCEtLSBUaGUgbGFiZWwgY29udGVudCBmb3IgcmFkaW8gY29udHJvbC4gLS0+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzPVwicmRzLXJhZGlvLWxhYmVsLWNvbnRlbnRcIlxuICAgICAgICBbY2xhc3MucmRzLXJhZGlvLWxhYmVsLWJlZm9yZV09XCJsYWJlbFBvc2l0aW9uID09PSAnYmVmb3JlJ1wiXG4gICAgICAgIFtuZ0NsYXNzXT1cIidyZHMtcmFkaW8tbGFiZWwtY29udGVudC0tJyArIHNpemVcIlxuICAgICAgPlxuICAgICAgICA8IS0tIEFkZCBhbiBpbnZpc2libGUgc3BhbiBzbyBKQVdTIGNhbiByZWFkIHRoZSBsYWJlbCAtLT5cbiAgICAgICAgPHNwYW4gc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj4mbmJzcDs8L3NwYW4+XG4gICAgICAgIDxuZy1jb250ZW50IC8+XG4gICAgICA8L2Rpdj5cbiAgICA8L2xhYmVsPlxuICAgIDxkaXYgY2xhc3M9XCJyZHMtcmFkaW9fX3N1YnNjcmlwdC13cmFwcGVyXCI+XG4gICAgICBAc3dpdGNoIChpc0Vycm9yTWVzc2FnZVZpc2libGUpIHtcbiAgICAgICAgQGNhc2UgKHRydWUpIHtcbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzcz1cInJkcy1yYWRpb19fc3Vic2NyaXB0IHJkcy1yYWRpb19fc3Vic2NyaXB0LS1lcnJvclwiXG4gICAgICAgICAgICBbQHRyYW5zaXRpb25NZXNzYWdlc109XCJzdWJzY3JpcHRBbmltYXRpb25TdGF0ZVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwicmRzLWNvbnRyb2wtZXJyb3JcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIEBjYXNlIChmYWxzZSkge1xuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzPVwicmRzLXJhZGlvX19zdWJzY3JpcHQgcmRzLXJhZGlvX19zdWJzY3JpcHQtLWhpbnRcIlxuICAgICAgICAgICAgW0B0cmFuc2l0aW9uTWVzc2FnZXNdPVwic3Vic2NyaXB0QW5pbWF0aW9uU3RhdGVcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cInJkcy1jb250cm9sLWhpbnRcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICB9XG4gICAgPC9kaXY+XG4gIGAsXG4gIHN0eWxlVXJsczogWycuL3JhZGlvLWJ1dHRvbi5jb21wb25lbnQuc2NzcyddLFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICBhbmltYXRpb25zOiBbcmRzUmFkaW9BbmltYXRpb25zLnRyYW5zaXRpb25NZXNzYWdlc10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBSZHNSYWRpb0J1dHRvbkNvbXBvbmVudDxUPlxuICBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95XG57XG4gIHByaXZhdGUgcmVhZG9ubHkgcmFkaW9Hcm91cCA9IGluamVjdDxSZHNSYWRpb0dyb3VwRGlyZWN0aXZlPFQ+PihcbiAgICBSRFNfUkFESU9fR1JPVVAsXG4gICAgeyBvcHRpb25hbDogdHJ1ZSB9LFxuICApO1xuICBwcml2YXRlIHJlYWRvbmx5IGRlc3Ryb3lSZWYgPSBpbmplY3QoRGVzdHJveVJlZik7XG4gIHByaXZhdGUgcmVhZG9ubHkgZWxlbWVudFJlZiA9IGluamVjdChFbGVtZW50UmVmKTtcbiAgcHJpdmF0ZSByZWFkb25seSBjZHIgPSBpbmplY3QoQ2hhbmdlRGV0ZWN0b3JSZWYpO1xuICBwcml2YXRlIHJlYWRvbmx5IGZvY3VzTW9uaXRvciA9IGluamVjdChGb2N1c01vbml0b3IpO1xuICBwcml2YXRlIHJlYWRvbmx5IHJhZGlvRGlzcGF0Y2hlciA9IGluamVjdChVbmlxdWVTZWxlY3Rpb25EaXNwYXRjaGVyKTtcblxuICBwcml2YXRlIF91bmlxdWVJZCA9IGByZHMtcmFkaW8tJHsrK25leHRVbmlxdWVJZH1gO1xuICBwcml2YXRlIF9kaXNhYmxlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfcmVxdWlyZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgX3ZhbHVlOiBUO1xuICBwcml2YXRlIF9sYWJlbFBvc2l0aW9uOiAnYmVmb3JlJyB8ICdhZnRlcic7XG5cbiAgc3Vic2NyaXB0QW5pbWF0aW9uU3RhdGU6ICcnIHwgJ2VudGVyJyA9ICcnO1xuXG4gIGdldCBpbnB1dElkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuaWQgfHwgdGhpcy5fdW5pcXVlSWR9LWlucHV0YDtcbiAgfVxuXG4gIEBWaWV3Q2hpbGQoJ2lucHV0JykgX2lucHV0RWxlbWVudDogRWxlbWVudFJlZjxIVE1MSW5wdXRFbGVtZW50PjtcblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJykgcmVhZG9ubHkgaG9zdENsYXNzID0gJ3Jkcy1yYWRpby1idXR0b24nO1xuXG4gIEBIb3N0QmluZGluZygnY2xhc3MucmRzLXJhZGlvLS1pbnZhbGlkJylcbiAgZ2V0IGVycm9yU3RhdGUoKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMucmFkaW9Hcm91cCkge1xuICAgICAgY29uc3QgcGFyZW50ID1cbiAgICAgICAgdGhpcy5yYWRpb0dyb3VwLnBhcmVudEZvcm1Hcm91cCB8fCB0aGlzLnJhZGlvR3JvdXAucGFyZW50Rm9ybTtcbiAgICAgIGNvbnN0IGNvbnRyb2wgPSB0aGlzLnJhZGlvR3JvdXAuY29udHJvbDtcblxuICAgICAgaWYgKGNvbnRyb2wpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjb250cm9sLmludmFsaWQgJiYgKGNvbnRyb2wudG91Y2hlZCB8fCBwYXJlbnQ/LnN1Ym1pdHRlZCB8fCBmYWxzZSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBASW5wdXQoKVxuICBASG9zdEJpbmRpbmcoJ2F0dHIuaWQnKVxuICBpZDogc3RyaW5nID0gdGhpcy5fdW5pcXVlSWQ7XG5cbiAgQElucHV0KCkgbmFtZTogc3RyaW5nO1xuXG4gIEBJbnB1dCgpIHNpemU6IFJkc1JhZGlvQnV0dG9uU2l6ZSA9ICdsJztcblxuICBASW5wdXQoKVxuICBASG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS1sYWJlbCcpXG4gIGFyaWFMYWJlbDogc3RyaW5nO1xuXG4gIEBJbnB1dCgnYXJpYS1sYWJlbGxlZGJ5JylcbiAgQEhvc3RCaW5kaW5nKCdhdHRyLmFyaWEtbGFiZWxsZWRieScpXG4gIGFyaWFMYWJlbGxlZGJ5OiBzdHJpbmc7XG5cbiAgQElucHV0KCdhcmlhLWRlc2NyaWJlZGJ5JylcbiAgQEhvc3RCaW5kaW5nKCdhdHRyLmFyaWEtZGVzY3JpYmVkYnknKVxuICBhcmlhRGVzY3JpYmVkYnk6IHN0cmluZztcblxuICBASW5wdXQoKVxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnJkcy1yYWRpby1jaGVja2VkJylcbiAgc2V0IGNoZWNrZWQodmFsdWU6IEJvb2xlYW5JbnB1dCkge1xuICAgIGNvbnN0IG5ld0NoZWNrZWRTdGF0ZSA9IGJvb2xlYW5BdHRyaWJ1dGUodmFsdWUpO1xuXG4gICAgaWYgKHRoaXMuX2NoZWNrZWQgIT09IG5ld0NoZWNrZWRTdGF0ZSkge1xuICAgICAgdGhpcy5fY2hlY2tlZCA9IG5ld0NoZWNrZWRTdGF0ZTtcblxuICAgICAgaWYgKFxuICAgICAgICBuZXdDaGVja2VkU3RhdGUgJiZcbiAgICAgICAgdGhpcy5yYWRpb0dyb3VwICYmXG4gICAgICAgIHRoaXMucmFkaW9Hcm91cC52YWx1ZSAhPT0gdGhpcy52YWx1ZVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMucmFkaW9Hcm91cC5zZWxlY3RlZCA9IHRoaXM7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAhbmV3Q2hlY2tlZFN0YXRlICYmXG4gICAgICAgIHRoaXMucmFkaW9Hcm91cCAmJlxuICAgICAgICB0aGlzLnJhZGlvR3JvdXAudmFsdWUgPT09IHRoaXMudmFsdWVcbiAgICAgICkge1xuICAgICAgICB0aGlzLnJhZGlvR3JvdXAuc2VsZWN0ZWQgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAobmV3Q2hlY2tlZFN0YXRlKSB7XG4gICAgICAgIHRoaXMucmFkaW9EaXNwYXRjaGVyLm5vdGlmeSh0aGlzLmlkLCB0aGlzLm5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBjaGVja2VkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9jaGVja2VkO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2hlY2tlZCA9IGZhbHNlO1xuXG4gIEBJbnB1dCgpXG4gIGdldCB2YWx1ZSgpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cbiAgc2V0IHZhbHVlKHZhbHVlOiBUKSB7XG4gICAgaWYgKHRoaXMuX3ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcblxuICAgICAgaWYgKHRoaXMucmFkaW9Hcm91cCAhPT0gbnVsbCkge1xuICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgIHRoaXMuY2hlY2tlZCA9IHRoaXMucmFkaW9Hcm91cC52YWx1ZSA9PT0gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgICAgdGhpcy5yYWRpb0dyb3VwLnNlbGVjdGVkID0gdGhpcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGdldCBsYWJlbFBvc2l0aW9uKCk6IFJkc1JhZGlvQnV0dG9uUG9zaXRpb24ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLl9sYWJlbFBvc2l0aW9uIHx8XG4gICAgICAodGhpcy5yYWRpb0dyb3VwICYmIHRoaXMucmFkaW9Hcm91cC5sYWJlbFBvc2l0aW9uKSB8fFxuICAgICAgJ2FmdGVyJ1xuICAgICk7XG4gIH1cbiAgc2V0IGxhYmVsUG9zaXRpb24odmFsdWU6IFJkc1JhZGlvQnV0dG9uUG9zaXRpb24pIHtcbiAgICB0aGlzLl9sYWJlbFBvc2l0aW9uID0gdmFsdWU7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnJkcy1yYWRpby1kaXNhYmxlZCcpXG4gIEBJbnB1dCgpXG4gIHNldCBkaXNhYmxlZCh2YWx1ZTogQm9vbGVhbklucHV0KSB7XG4gICAgdGhpcy5fZGlzYWJsZWQgPSBib29sZWFuQXR0cmlidXRlKHZhbHVlKTtcbiAgfVxuXG4gIGdldCBkaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5fZGlzYWJsZWQgfHwgKHRoaXMucmFkaW9Hcm91cCAhPT0gbnVsbCAmJiB0aGlzLnJhZGlvR3JvdXAuZGlzYWJsZWQpXG4gICAgKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCByZXF1aXJlZCh2YWx1ZTogQm9vbGVhbklucHV0KSB7XG4gICAgdGhpcy5fcmVxdWlyZWQgPSBib29sZWFuQXR0cmlidXRlKHZhbHVlKTtcbiAgfVxuXG4gIGdldCByZXF1aXJlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5fcmVxdWlyZWQgfHwgKHRoaXMucmFkaW9Hcm91cCAmJiB0aGlzLnJhZGlvR3JvdXAucmVxdWlyZWQpIHx8IGZhbHNlXG4gICAgKTtcbiAgfVxuXG4gIEBPdXRwdXQoKSBidXR0b25DaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjxSZHNSYWRpb0NoYW5nZWRFdmVudDxUPj4oKTtcblxuICBASG9zdExpc3RlbmVyKCdmb2N1cycpXG4gIG9uRm9jdXMoKTogdm9pZCB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgfVxuXG4gIGdldCBpc0Vycm9yTWVzc2FnZVZpc2libGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZXJyb3JTdGF0ZTtcbiAgfVxuXG4gIHByaXZhdGUgcmVhZG9ubHkgcmVtb3ZlVW5pcXVlU2VsZWN0aW9uTGlzdGVuZXI6ICgpID0+IHZvaWQgPSBub29wO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucmVtb3ZlVW5pcXVlU2VsZWN0aW9uTGlzdGVuZXIgPSB0aGlzLnJhZGlvRGlzcGF0Y2hlci5saXN0ZW4oXG4gICAgICAoaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChpZCAhPT0gdGhpcy5pZCAmJiBuYW1lID09PSB0aGlzLm5hbWUpIHtcbiAgICAgICAgICB0aGlzLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICApO1xuICB9XG5cbiAgZm9jdXMob3B0aW9ucz86IEZvY3VzT3B0aW9ucyk6IHZvaWQge1xuICAgIHRoaXMuZm9jdXNNb25pdG9yLmZvY3VzVmlhKHRoaXMuX2lucHV0RWxlbWVudCwgJ2tleWJvYXJkJywgb3B0aW9ucyk7XG4gIH1cblxuICBtYXJrRm9yQ2hlY2soKTogdm9pZCB7XG4gICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5yYWRpb0dyb3VwKSB7XG4gICAgICB0aGlzLmNoZWNrZWQgPSB0aGlzLnJhZGlvR3JvdXAudmFsdWUgPT09IHRoaXMuX3ZhbHVlO1xuICAgICAgdGhpcy5uYW1lID0gdGhpcy5yYWRpb0dyb3VwLm5hbWU7XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIHRoaXMuZm9jdXNNb25pdG9yXG4gICAgICAubW9uaXRvcih0aGlzLmVsZW1lbnRSZWYsIHRydWUpXG4gICAgICAuc3Vic2NyaWJlKChmb2N1c09yaWdpbikgPT4ge1xuICAgICAgICBpZiAoIWZvY3VzT3JpZ2luICYmIHRoaXMucmFkaW9Hcm91cCkge1xuICAgICAgICAgIHRoaXMucmFkaW9Hcm91cC50b3VjaCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIHRoaXMuc3Vic2NyaXB0QW5pbWF0aW9uU3RhdGUgPSAnZW50ZXInOyAvLyBBdm9pZCBhbmltYXRpb25zIG9uIGxvYWQuXG4gICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIC8vIFJ1biBjaGFuZ2UgZGV0ZWN0aW9uIGlmIHRoZSB2YWx1ZSBjaGFuZ2VzLlxuXG4gICAgaWYgKHRoaXMucmFkaW9Hcm91cCkge1xuICAgICAgaWYgKHRoaXMucmFkaW9Hcm91cC5jb250cm9sICYmIHRoaXMucmFkaW9Hcm91cC5jb250cm9sLnZhbHVlQ2hhbmdlcykge1xuICAgICAgICB0aGlzLnJhZGlvR3JvdXAuY29udHJvbC52YWx1ZUNoYW5nZXNcbiAgICAgICAgICAucGlwZSh0YWtlVW50aWxEZXN0cm95ZWQodGhpcy5kZXN0cm95UmVmKSlcbiAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmFkaW9Hcm91cD8uY29udHJvbD8ubWFya0FzRGlydHkoKTtcbiAgICAgICAgICAgIHRoaXMucmFkaW9Hcm91cD8uY29udHJvbD8ubWFya0FzVG91Y2hlZCgpO1xuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhcmVudCA9XG4gICAgICAgIHRoaXMucmFkaW9Hcm91cC5wYXJlbnRGb3JtR3JvdXAgfHwgdGhpcy5yYWRpb0dyb3VwLmNvbnRyb2wucGFyZW50O1xuXG4gICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgRm9ybUdyb3VwRGlyZWN0aXZlKSB7XG4gICAgICAgIHBhcmVudC5uZ1N1Ym1pdFxuICAgICAgICAgIC5waXBlKHRha2VVbnRpbERlc3Ryb3llZCh0aGlzLmRlc3Ryb3lSZWYpKVxuICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5mb2N1c01vbml0b3Iuc3RvcE1vbml0b3JpbmcodGhpcy5lbGVtZW50UmVmKTtcbiAgICB0aGlzLnJlbW92ZVVuaXF1ZVNlbGVjdGlvbkxpc3RlbmVyKCk7XG4gIH1cblxuICBwcml2YXRlIGVtaXRDaGFuZ2VFdmVudCgpOiB2b2lkIHtcbiAgICB0aGlzLmJ1dHRvbkNoYW5nZWQuZW1pdChuZXcgUmRzUmFkaW9DaGFuZ2VkRXZlbnQodGhpcywgdGhpcy5fdmFsdWUpKTtcbiAgfVxuXG4gIG9uSW5wdXRDbGljayhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBXZSBoYXZlIHRvIHN0b3AgcHJvcGFnYXRpb24gZm9yIGNsaWNrIGV2ZW50cyBvbiB0aGUgdmlzdWFsIGhpZGRlbiBpbnB1dCBlbGVtZW50LlxuICAgIC8vIEJ5IGRlZmF1bHQsIHdoZW4gYSB1c2VyIGNsaWNrcyBvbiBhIGxhYmVsIGVsZW1lbnQsIGEgZ2VuZXJhdGVkIGNsaWNrIGV2ZW50IHdpbGwgYmVcbiAgICAvLyBkaXNwYXRjaGVkIG9uIHRoZSBhc3NvY2lhdGVkIGlucHV0IGVsZW1lbnQuIFNpbmNlIHdlIGFyZSB1c2luZyBhIGxhYmVsIGVsZW1lbnQgYXMgb3VyXG4gICAgLy8gcm9vdCBjb250YWluZXIsIHRoZSBjbGljayBldmVudCBvbiB0aGUgYHJhZGlvLWJ1dHRvbmAgd2lsbCBiZSBleGVjdXRlZCB0d2ljZS5cbiAgICAvLyBUaGUgcmVhbCBjbGljayBldmVudCB3aWxsIGJ1YmJsZSB1cCwgYW5kIHRoZSBnZW5lcmF0ZWQgY2xpY2sgZXZlbnQgYWxzbyB0cmllcyB0byBidWJibGUgdXAuXG4gICAgLy8gVGhpcyB3aWxsIGxlYWQgdG8gbXVsdGlwbGUgY2xpY2sgZXZlbnRzLlxuICAgIC8vIFByZXZlbnRpbmcgYnViYmxpbmcgZm9yIHRoZSBzZWNvbmQgZXZlbnQgd2lsbCBzb2x2ZSB0aGF0IGlzc3VlLlxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgb25JbnB1dENoYW5nZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBXZSBhbHdheXMgaGF2ZSB0byBzdG9wIHByb3BhZ2F0aW9uIG9uIHRoZSBjaGFuZ2UgZXZlbnQuXG4gICAgLy8gT3RoZXJ3aXNlIHRoZSBjaGFuZ2UgZXZlbnQsIGZyb20gdGhlIGlucHV0IGVsZW1lbnQsIHdpbGwgYnViYmxlIHVwIGFuZFxuICAgIC8vIGVtaXQgaXRzIGV2ZW50IG9iamVjdCB0byB0aGUgYGJ1dHRvbkNoYW5nZWAgb3V0cHV0LlxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgY29uc3QgZ3JvdXBWYWx1ZUNoYW5nZWQgPVxuICAgICAgdGhpcy5yYWRpb0dyb3VwICYmIHRoaXMudmFsdWUgIT09IHRoaXMucmFkaW9Hcm91cC52YWx1ZTtcbiAgICB0aGlzLmNoZWNrZWQgPSB0cnVlO1xuICAgIHRoaXMuZW1pdENoYW5nZUV2ZW50KCk7XG5cbiAgICBpZiAodGhpcy5yYWRpb0dyb3VwKSB7XG4gICAgICB0aGlzLnJhZGlvR3JvdXAuX2NvbnRyb2xWYWx1ZUFjY2Vzc29yQ2hhbmdlRm4odGhpcy52YWx1ZSk7XG5cbiAgICAgIGlmIChncm91cFZhbHVlQ2hhbmdlZCkge1xuICAgICAgICB0aGlzLnJhZGlvR3JvdXAuZW1pdENoYW5nZUV2ZW50KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0=