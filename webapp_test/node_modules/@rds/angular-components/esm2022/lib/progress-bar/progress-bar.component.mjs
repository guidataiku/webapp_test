import { ChangeDetectionStrategy, Component, ElementRef, HostBinding, Input, numberAttribute, ViewChild, ViewEncapsulation, } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
let progressbarId = 0;
export class RdsProgressBarComponent {
    get hostMode() {
        return this.mode;
    }
    get hostValueNow() {
        let valueNow = this.value;
        if (this.mode === 'indeterminate') {
            valueNow = null;
        }
        return valueNow;
    }
    constructor() {
        this.progressbarId = `rds-progress-bar-${progressbarId++}`;
        this.hostClass = true;
        this.hostRole = 'progressbar';
        this.hostAriaValuemin = '0';
        this.hostAriaValuemax = '100';
        /* eslint-disable-next-line @angular-eslint/no-input-rename */
        this.value = 0;
        /* eslint-disable-next-line @angular-eslint/no-input-rename */
        this.bufferValue = 0;
        this.mode = 'indeterminate';
        // We need to prefix the SVG reference with the current path, otherwise they won't work
        // in Safari if the page has a `<base>` tag. Note that we need quotes inside the `url()`,
        // because named route URLs can contain parentheses
        const path = location ? location.href.split('#')[0] : '';
        this.rectangleFillValue = `url('${path}#${this.progressbarId}')`;
    }
    primaryTransform() {
        const scale = this.value / 100;
        return { transform: `scaleX(${scale})` };
    }
    bufferTransform() {
        if (this.mode === 'buffer') {
            const scale = this.bufferValue / 100;
            return { transform: `scaleX(${scale})` };
        }
        return null;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsProgressBarComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "16.1.0", version: "17.3.1", type: RdsProgressBarComponent, selector: "rds-progress-bar", inputs: { value: ["value", "value", (v) => clamp(numberAttribute(v, 0))], bufferValue: ["bufferValue", "bufferValue", (v) => clamp(numberAttribute(v, 0))], mode: "mode" }, host: { properties: { "class.rds-progress-bar": "this.hostClass", "attr.role": "this.hostRole", "attr.aria-valuemin": "this.hostAriaValuemin", "attr.aria-valuemax": "this.hostAriaValuemax", "attr.mode": "this.hostMode", "attr.aria-valuenow": "this.hostValueNow" } }, viewQueries: [{ propertyName: "_primaryValueBar", first: true, predicate: ["primaryValueBar"], descendants: true }], ngImport: i0, template: `
    <svg
      width="100%"
      height="4"
      focusable="false"
      class="rds-progress-bar-background rds-progress-bar-element"
    >
      <defs>
        <pattern
          [id]="progressbarId"
          x="4"
          y="0"
          width="8"
          height="4"
          patternUnits="userSpaceOnUse"
        >
          <circle cx="2" cy="2" r="2" />
        </pattern>
      </defs>
      <rect [attr.fill]="rectangleFillValue" width="100%" height="100%" />
    </svg>

    <div
      class="rds-progress-bar-buffer rds-progress-bar-element"
      [ngStyle]="bufferTransform()"
    ></div>
    <div
      class="rds-progress-bar-primary rds-progress-bar-fill rds-progress-bar-element"
      [ngStyle]="primaryTransform()"
      #primaryValueBar
    ></div>
    <div
      class="rds-progress-bar-secondary rds-progress-bar-fill rds-progress-bar-element"
    ></div>
  `, isInline: true, styles: [".rds-progress-bar{--rds-progress-bar-fill-color: var(--rds-color-informative);position:relative;display:block;overflow:hidden;transition:opacity .25s linear;width:100%;height:4px}.rds-progress-bar .rds-progress-bar-element,.rds-progress-bar .rds-progress-bar-fill:after{position:absolute;width:100%;height:100%}.rds-progress-bar .rds-progress-bar-background{width:calc(100% + 10px);fill:var(--rds-color-track)}.rds-progress-bar .rds-progress-bar-buffer{transform-origin:top left;transition:transform .25s ease;background-color:var(--rds-color-track)}.rds-progress-bar .rds-progress-bar-secondary{display:none}.rds-progress-bar .rds-progress-bar-fill{transform-origin:top left;animation:none;transition:transform .25s ease}.rds-progress-bar .rds-progress-bar-fill:after{left:0;display:inline-block;animation:none;background-color:var(--rds-progress-bar-fill-color);content:\"\"}.rds-progress-bar[mode=indeterminate] .rds-progress-bar-fill{transition:none}.rds-progress-bar[mode=indeterminate] .rds-progress-bar-primary{animation:rds-progress-bar-primary-indeterminate-translate 2s infinite linear;left:-145.166611%}.rds-progress-bar[mode=indeterminate] .rds-progress-bar-primary.rds-progress-bar-fill:after{animation:rds-progress-bar-primary-indeterminate-scale 2s infinite linear}.rds-progress-bar[mode=indeterminate] .rds-progress-bar-secondary{left:-54.888891%;display:block;animation:rds-progress-bar-secondary-indeterminate-translate 2s infinite linear}.rds-progress-bar[mode=indeterminate] .rds-progress-bar-secondary.rds-progress-bar-fill:after{animation:rds-progress-bar-secondary-indeterminate-scale 2s infinite linear}.rds-progress-bar[mode=buffer] .rds-progress-bar-background{display:block;animation:rds-progress-bar-background-scroll .25s infinite linear}.rds-progress-bar[mode=buffer] .rds-progress-bar-fill:after{background-color:transparent}@keyframes rds-progress-bar-primary-indeterminate-translate{0%{transform:translate(0)}20%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translate(0)}59.15%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translate(83.67142%)}to{transform:translate(200.611057%)}}@keyframes rds-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(.08)}36.65%{animation-timing-function:cubic-bezier(.334731,.12482,.785844,1);transform:scaleX(.08)}69.15%{animation-timing-function:cubic-bezier(.06,.11,.6,1);transform:scaleX(.661479)}to{transform:scaleX(.08)}}@keyframes rds-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(.15,0,.515058,.409685);transform:translate(0)}25%{animation-timing-function:cubic-bezier(.31033,.284058,.8,.733712);transform:translate(37.651913%)}48.35%{animation-timing-function:cubic-bezier(.4,.627035,.6,.902026);transform:translate(84.386165%)}to{transform:translate(160.277782%)}}@keyframes rds-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(.15,0,.515058,.409685);transform:scaleX(.08)}19.15%{animation-timing-function:cubic-bezier(.31033,.284058,.8,.733712);transform:scaleX(.457104)}44.15%{animation-timing-function:cubic-bezier(.4,.627035,.6,.902026);transform:scaleX(.72796)}to{transform:scaleX(.08)}}@keyframes rds-progress-bar-background-scroll{to{transform:translate(-8px)}}\n"], dependencies: [{ kind: "directive", type: i1.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsProgressBarComponent, decorators: [{
            type: Component,
            args: [{ selector: 'rds-progress-bar', template: `
    <svg
      width="100%"
      height="4"
      focusable="false"
      class="rds-progress-bar-background rds-progress-bar-element"
    >
      <defs>
        <pattern
          [id]="progressbarId"
          x="4"
          y="0"
          width="8"
          height="4"
          patternUnits="userSpaceOnUse"
        >
          <circle cx="2" cy="2" r="2" />
        </pattern>
      </defs>
      <rect [attr.fill]="rectangleFillValue" width="100%" height="100%" />
    </svg>

    <div
      class="rds-progress-bar-buffer rds-progress-bar-element"
      [ngStyle]="bufferTransform()"
    ></div>
    <div
      class="rds-progress-bar-primary rds-progress-bar-fill rds-progress-bar-element"
      [ngStyle]="primaryTransform()"
      #primaryValueBar
    ></div>
    <div
      class="rds-progress-bar-secondary rds-progress-bar-fill rds-progress-bar-element"
    ></div>
  `, changeDetection: ChangeDetectionStrategy.OnPush, encapsulation: ViewEncapsulation.None, styles: [".rds-progress-bar{--rds-progress-bar-fill-color: var(--rds-color-informative);position:relative;display:block;overflow:hidden;transition:opacity .25s linear;width:100%;height:4px}.rds-progress-bar .rds-progress-bar-element,.rds-progress-bar .rds-progress-bar-fill:after{position:absolute;width:100%;height:100%}.rds-progress-bar .rds-progress-bar-background{width:calc(100% + 10px);fill:var(--rds-color-track)}.rds-progress-bar .rds-progress-bar-buffer{transform-origin:top left;transition:transform .25s ease;background-color:var(--rds-color-track)}.rds-progress-bar .rds-progress-bar-secondary{display:none}.rds-progress-bar .rds-progress-bar-fill{transform-origin:top left;animation:none;transition:transform .25s ease}.rds-progress-bar .rds-progress-bar-fill:after{left:0;display:inline-block;animation:none;background-color:var(--rds-progress-bar-fill-color);content:\"\"}.rds-progress-bar[mode=indeterminate] .rds-progress-bar-fill{transition:none}.rds-progress-bar[mode=indeterminate] .rds-progress-bar-primary{animation:rds-progress-bar-primary-indeterminate-translate 2s infinite linear;left:-145.166611%}.rds-progress-bar[mode=indeterminate] .rds-progress-bar-primary.rds-progress-bar-fill:after{animation:rds-progress-bar-primary-indeterminate-scale 2s infinite linear}.rds-progress-bar[mode=indeterminate] .rds-progress-bar-secondary{left:-54.888891%;display:block;animation:rds-progress-bar-secondary-indeterminate-translate 2s infinite linear}.rds-progress-bar[mode=indeterminate] .rds-progress-bar-secondary.rds-progress-bar-fill:after{animation:rds-progress-bar-secondary-indeterminate-scale 2s infinite linear}.rds-progress-bar[mode=buffer] .rds-progress-bar-background{display:block;animation:rds-progress-bar-background-scroll .25s infinite linear}.rds-progress-bar[mode=buffer] .rds-progress-bar-fill:after{background-color:transparent}@keyframes rds-progress-bar-primary-indeterminate-translate{0%{transform:translate(0)}20%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translate(0)}59.15%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translate(83.67142%)}to{transform:translate(200.611057%)}}@keyframes rds-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(.08)}36.65%{animation-timing-function:cubic-bezier(.334731,.12482,.785844,1);transform:scaleX(.08)}69.15%{animation-timing-function:cubic-bezier(.06,.11,.6,1);transform:scaleX(.661479)}to{transform:scaleX(.08)}}@keyframes rds-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(.15,0,.515058,.409685);transform:translate(0)}25%{animation-timing-function:cubic-bezier(.31033,.284058,.8,.733712);transform:translate(37.651913%)}48.35%{animation-timing-function:cubic-bezier(.4,.627035,.6,.902026);transform:translate(84.386165%)}to{transform:translate(160.277782%)}}@keyframes rds-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(.15,0,.515058,.409685);transform:scaleX(.08)}19.15%{animation-timing-function:cubic-bezier(.31033,.284058,.8,.733712);transform:scaleX(.457104)}44.15%{animation-timing-function:cubic-bezier(.4,.627035,.6,.902026);transform:scaleX(.72796)}to{transform:scaleX(.08)}}@keyframes rds-progress-bar-background-scroll{to{transform:translate(-8px)}}\n"] }]
        }], ctorParameters: () => [], propDecorators: { hostClass: [{
                type: HostBinding,
                args: ['class.rds-progress-bar']
            }], hostRole: [{
                type: HostBinding,
                args: ['attr.role']
            }], hostAriaValuemin: [{
                type: HostBinding,
                args: ['attr.aria-valuemin']
            }], hostAriaValuemax: [{
                type: HostBinding,
                args: ['attr.aria-valuemax']
            }], hostMode: [{
                type: HostBinding,
                args: ['attr.mode']
            }], hostValueNow: [{
                type: HostBinding,
                args: ['attr.aria-valuenow']
            }], value: [{
                type: Input,
                args: [{ transform: (v) => clamp(numberAttribute(v, 0)) }]
            }], bufferValue: [{
                type: Input,
                args: [{ transform: (v) => clamp(numberAttribute(v, 0)) }]
            }], mode: [{
                type: Input
            }], _primaryValueBar: [{
                type: ViewChild,
                args: ['primaryValueBar']
            }] } });
/** Clamps a value to be between two numbers, by default 0 and 100. */
function clamp(value, min = 0, max = 100) {
    return Math.max(min, Math.min(max, value));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZ3Jlc3MtYmFyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvYW5ndWxhci1jb21wb25lbnRzL3NyYy9saWIvcHJvZ3Jlc3MtYmFyL3Byb2dyZXNzLWJhci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLHVCQUF1QixFQUN2QixTQUFTLEVBQ1QsVUFBVSxFQUNWLFdBQVcsRUFDWCxLQUFLLEVBQ0wsZUFBZSxFQUNmLFNBQVMsRUFDVCxpQkFBaUIsR0FDbEIsTUFBTSxlQUFlLENBQUM7OztBQUd2QixJQUFJLGFBQWEsR0FBRyxDQUFDLENBQUM7QUEyQ3RCLE1BQU0sT0FBTyx1QkFBdUI7SUFTbEMsSUFBOEIsUUFBUTtRQUNwQyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbkIsQ0FBQztJQUVELElBQXVDLFlBQVk7UUFDakQsSUFBSSxRQUFRLEdBQWtCLElBQUksQ0FBQyxLQUFLLENBQUM7UUFFekMsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGVBQWUsRUFBRSxDQUFDO1lBQ2xDLFFBQVEsR0FBRyxJQUFJLENBQUM7UUFDbEIsQ0FBQztRQUVELE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7SUFhRDtRQWpDUyxrQkFBYSxHQUFHLG9CQUFvQixhQUFhLEVBQUUsRUFBRSxDQUFDO1FBRWYsY0FBUyxHQUFHLElBQUksQ0FBQztRQUU5QixhQUFRLEdBQUcsYUFBYSxDQUFDO1FBQ2hCLHFCQUFnQixHQUFHLEdBQUcsQ0FBQztRQUN2QixxQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFnQnJFLDhEQUE4RDtRQUNNLFVBQUssR0FBRyxDQUFDLENBQUM7UUFDOUUsOERBQThEO1FBRTlELGdCQUFXLEdBQUcsQ0FBQyxDQUFDO1FBQ1AsU0FBSSxHQUF1QixlQUFlLENBQUM7UUFPbEQsdUZBQXVGO1FBQ3ZGLHlGQUF5RjtRQUN6RixtREFBbUQ7UUFDbkQsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3pELElBQUksQ0FBQyxrQkFBa0IsR0FBRyxRQUFRLElBQUksSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLENBQUM7SUFDbkUsQ0FBQztJQUVELGdCQUFnQjtRQUNkLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO1FBRS9CLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxLQUFLLEdBQUcsRUFBRSxDQUFDO0lBQzNDLENBQUM7SUFFRCxlQUFlO1FBQ2IsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRSxDQUFDO1lBQzNCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDO1lBRXJDLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxLQUFLLEdBQUcsRUFBRSxDQUFDO1FBQzNDLENBQUM7UUFFRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7OEdBeERVLHVCQUF1QjtrR0FBdkIsdUJBQXVCLG9FQXdCZCxDQUFDLENBQVUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsK0NBRTVDLENBQUMsQ0FBVSxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQywyYUFqRXREOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBa0NUOzsyRkFLVSx1QkFBdUI7a0JBekNuQyxTQUFTOytCQUNFLGtCQUFrQixZQUNsQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWtDVCxtQkFFZ0IsdUJBQXVCLENBQUMsTUFBTSxpQkFDaEMsaUJBQWlCLENBQUMsSUFBSTt3REFLVyxTQUFTO3NCQUF4RCxXQUFXO3VCQUFDLHdCQUF3QjtnQkFFRixRQUFRO3NCQUExQyxXQUFXO3VCQUFDLFdBQVc7Z0JBQ29CLGdCQUFnQjtzQkFBM0QsV0FBVzt1QkFBQyxvQkFBb0I7Z0JBQ1csZ0JBQWdCO3NCQUEzRCxXQUFXO3VCQUFDLG9CQUFvQjtnQkFFSCxRQUFRO3NCQUFyQyxXQUFXO3VCQUFDLFdBQVc7Z0JBSWUsWUFBWTtzQkFBbEQsV0FBVzt1QkFBQyxvQkFBb0I7Z0JBV21DLEtBQUs7c0JBQXhFLEtBQUs7dUJBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFVLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBR2xFLFdBQVc7c0JBRFYsS0FBSzt1QkFBQyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQVUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFFekQsSUFBSTtzQkFBWixLQUFLO2dCQUV3QixnQkFBZ0I7c0JBQTdDLFNBQVM7dUJBQUMsaUJBQWlCOztBQTZCOUIsc0VBQXNFO0FBQ3RFLFNBQVMsS0FBSyxDQUFDLEtBQWEsRUFBRSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxHQUFHO0lBQzlDLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM3QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBudW1iZXJBdHRyaWJ1dGUsXG4gIFZpZXdDaGlsZCxcbiAgVmlld0VuY2Fwc3VsYXRpb24sXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUmRzUHJvZ3Jlc3NCYXJNb2RlIH0gZnJvbSAnLi9wcm9ncmVzcy5tb2RlJztcblxubGV0IHByb2dyZXNzYmFySWQgPSAwO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdyZHMtcHJvZ3Jlc3MtYmFyJyxcbiAgdGVtcGxhdGU6IGBcbiAgICA8c3ZnXG4gICAgICB3aWR0aD1cIjEwMCVcIlxuICAgICAgaGVpZ2h0PVwiNFwiXG4gICAgICBmb2N1c2FibGU9XCJmYWxzZVwiXG4gICAgICBjbGFzcz1cInJkcy1wcm9ncmVzcy1iYXItYmFja2dyb3VuZCByZHMtcHJvZ3Jlc3MtYmFyLWVsZW1lbnRcIlxuICAgID5cbiAgICAgIDxkZWZzPlxuICAgICAgICA8cGF0dGVyblxuICAgICAgICAgIFtpZF09XCJwcm9ncmVzc2JhcklkXCJcbiAgICAgICAgICB4PVwiNFwiXG4gICAgICAgICAgeT1cIjBcIlxuICAgICAgICAgIHdpZHRoPVwiOFwiXG4gICAgICAgICAgaGVpZ2h0PVwiNFwiXG4gICAgICAgICAgcGF0dGVyblVuaXRzPVwidXNlclNwYWNlT25Vc2VcIlxuICAgICAgICA+XG4gICAgICAgICAgPGNpcmNsZSBjeD1cIjJcIiBjeT1cIjJcIiByPVwiMlwiIC8+XG4gICAgICAgIDwvcGF0dGVybj5cbiAgICAgIDwvZGVmcz5cbiAgICAgIDxyZWN0IFthdHRyLmZpbGxdPVwicmVjdGFuZ2xlRmlsbFZhbHVlXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIC8+XG4gICAgPC9zdmc+XG5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cInJkcy1wcm9ncmVzcy1iYXItYnVmZmVyIHJkcy1wcm9ncmVzcy1iYXItZWxlbWVudFwiXG4gICAgICBbbmdTdHlsZV09XCJidWZmZXJUcmFuc2Zvcm0oKVwiXG4gICAgPjwvZGl2PlxuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwicmRzLXByb2dyZXNzLWJhci1wcmltYXJ5IHJkcy1wcm9ncmVzcy1iYXItZmlsbCByZHMtcHJvZ3Jlc3MtYmFyLWVsZW1lbnRcIlxuICAgICAgW25nU3R5bGVdPVwicHJpbWFyeVRyYW5zZm9ybSgpXCJcbiAgICAgICNwcmltYXJ5VmFsdWVCYXJcbiAgICA+PC9kaXY+XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJyZHMtcHJvZ3Jlc3MtYmFyLXNlY29uZGFyeSByZHMtcHJvZ3Jlc3MtYmFyLWZpbGwgcmRzLXByb2dyZXNzLWJhci1lbGVtZW50XCJcbiAgICA+PC9kaXY+XG4gIGAsXG4gIHN0eWxlVXJsczogWycuL3Byb2dyZXNzLWJhci5jb21wb25lbnQuc2NzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbn0pXG5leHBvcnQgY2xhc3MgUmRzUHJvZ3Jlc3NCYXJDb21wb25lbnQge1xuICByZWFkb25seSBwcm9ncmVzc2JhcklkID0gYHJkcy1wcm9ncmVzcy1iYXItJHtwcm9ncmVzc2JhcklkKyt9YDtcblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnJkcy1wcm9ncmVzcy1iYXInKSByZWFkb25seSBob3N0Q2xhc3MgPSB0cnVlO1xuXG4gIEBIb3N0QmluZGluZygnYXR0ci5yb2xlJykgcmVhZG9ubHkgaG9zdFJvbGUgPSAncHJvZ3Jlc3NiYXInO1xuICBASG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS12YWx1ZW1pbicpIHJlYWRvbmx5IGhvc3RBcmlhVmFsdWVtaW4gPSAnMCc7XG4gIEBIb3N0QmluZGluZygnYXR0ci5hcmlhLXZhbHVlbWF4JykgcmVhZG9ubHkgaG9zdEFyaWFWYWx1ZW1heCA9ICcxMDAnO1xuXG4gIEBIb3N0QmluZGluZygnYXR0ci5tb2RlJykgZ2V0IGhvc3RNb2RlKCk6IFJkc1Byb2dyZXNzQmFyTW9kZSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZTtcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnYXR0ci5hcmlhLXZhbHVlbm93JykgZ2V0IGhvc3RWYWx1ZU5vdygpOiBudW1iZXIgfCBudWxsIHtcbiAgICBsZXQgdmFsdWVOb3c6IG51bWJlciB8IG51bGwgPSB0aGlzLnZhbHVlO1xuXG4gICAgaWYgKHRoaXMubW9kZSA9PT0gJ2luZGV0ZXJtaW5hdGUnKSB7XG4gICAgICB2YWx1ZU5vdyA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlTm93O1xuICB9XG5cbiAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9uby1pbnB1dC1yZW5hbWUgKi9cbiAgQElucHV0KHsgdHJhbnNmb3JtOiAodjogdW5rbm93bikgPT4gY2xhbXAobnVtYmVyQXR0cmlidXRlKHYsIDApKSB9KSB2YWx1ZSA9IDA7XG4gIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAYW5ndWxhci1lc2xpbnQvbm8taW5wdXQtcmVuYW1lICovXG4gIEBJbnB1dCh7IHRyYW5zZm9ybTogKHY6IHVua25vd24pID0+IGNsYW1wKG51bWJlckF0dHJpYnV0ZSh2LCAwKSkgfSlcbiAgYnVmZmVyVmFsdWUgPSAwO1xuICBASW5wdXQoKSBtb2RlOiBSZHNQcm9ncmVzc0Jhck1vZGUgPSAnaW5kZXRlcm1pbmF0ZSc7XG5cbiAgQFZpZXdDaGlsZCgncHJpbWFyeVZhbHVlQmFyJykgX3ByaW1hcnlWYWx1ZUJhcjogRWxlbWVudFJlZjtcblxuICByZWN0YW5nbGVGaWxsVmFsdWU6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBXZSBuZWVkIHRvIHByZWZpeCB0aGUgU1ZHIHJlZmVyZW5jZSB3aXRoIHRoZSBjdXJyZW50IHBhdGgsIG90aGVyd2lzZSB0aGV5IHdvbid0IHdvcmtcbiAgICAvLyBpbiBTYWZhcmkgaWYgdGhlIHBhZ2UgaGFzIGEgYDxiYXNlPmAgdGFnLiBOb3RlIHRoYXQgd2UgbmVlZCBxdW90ZXMgaW5zaWRlIHRoZSBgdXJsKClgLFxuICAgIC8vIGJlY2F1c2UgbmFtZWQgcm91dGUgVVJMcyBjYW4gY29udGFpbiBwYXJlbnRoZXNlc1xuICAgIGNvbnN0IHBhdGggPSBsb2NhdGlvbiA/IGxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVswXSA6ICcnO1xuICAgIHRoaXMucmVjdGFuZ2xlRmlsbFZhbHVlID0gYHVybCgnJHtwYXRofSMke3RoaXMucHJvZ3Jlc3NiYXJJZH0nKWA7XG4gIH1cblxuICBwcmltYXJ5VHJhbnNmb3JtKCk6IHsgdHJhbnNmb3JtOiBzdHJpbmcgfSB7XG4gICAgY29uc3Qgc2NhbGUgPSB0aGlzLnZhbHVlIC8gMTAwO1xuXG4gICAgcmV0dXJuIHsgdHJhbnNmb3JtOiBgc2NhbGVYKCR7c2NhbGV9KWAgfTtcbiAgfVxuXG4gIGJ1ZmZlclRyYW5zZm9ybSgpOiB7IHRyYW5zZm9ybTogc3RyaW5nIH0gfCBudWxsIHtcbiAgICBpZiAodGhpcy5tb2RlID09PSAnYnVmZmVyJykge1xuICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLmJ1ZmZlclZhbHVlIC8gMTAwO1xuXG4gICAgICByZXR1cm4geyB0cmFuc2Zvcm06IGBzY2FsZVgoJHtzY2FsZX0pYCB9O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKiBDbGFtcHMgYSB2YWx1ZSB0byBiZSBiZXR3ZWVuIHR3byBudW1iZXJzLCBieSBkZWZhdWx0IDAgYW5kIDEwMC4gKi9cbmZ1bmN0aW9uIGNsYW1wKHZhbHVlOiBudW1iZXIsIG1pbiA9IDAsIG1heCA9IDEwMCk6IG51bWJlciB7XG4gIHJldHVybiBNYXRoLm1heChtaW4sIE1hdGgubWluKG1heCwgdmFsdWUpKTtcbn1cbiJdfQ==