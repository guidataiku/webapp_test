import { ChangeDetectionStrategy, Component, DestroyRef, ElementRef, HostBinding, inject, Input, Output, } from '@angular/core';
import { BehaviorSubject, fromEvent } from 'rxjs';
import { distinctUntilChanged, startWith } from 'rxjs/operators';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import * as i0 from "@angular/core";
const COUNT_BADGE_MIN_WIDTH = 48;
export class RdsTriggerValuesComponent {
    constructor() {
        this.destroyRef = inject(DestroyRef);
        this.elementRef = inject(ElementRef);
        this._hiddenValues = new BehaviorSubject(0);
        this.hiddenValues = this._hiddenValues.pipe(distinctUntilChanged());
        this._multiple = false;
        this._triggerValues = [' '];
    }
    get triggerValues() {
        return this._triggerValues;
    }
    set triggerValues(val) {
        if (this.hasDifferentValues(val)) {
            this._triggerValues = val;
            this.countVisibleCharacters();
        }
    }
    set multiple(multiple) {
        this._multiple = coerceBooleanProperty(multiple);
    }
    get multiple() {
        return this._multiple;
    }
    ngOnChanges(changes) {
        if (changes['wrapperElement'] || changes['multiple']) {
            this.countVisibleCharacters();
        }
    }
    ngAfterViewInit() {
        fromEvent(window, 'resize')
            .pipe(startWith(null), takeUntilDestroyed(this.destroyRef))
            .subscribe(() => this.countVisibleCharacters());
    }
    countVisibleCharacters() {
        if (this.multiple) {
            if (this.triggerValues.length === 0 ||
                (this.triggerValues.length === 1 && this.triggerValues[0] === ' ')) {
                this.elementRef.nativeElement.innerHTML = ' ';
                this._hiddenValues.next(0);
            }
            let visibleValues = 0;
            while (visibleValues < this.triggerValues.length) {
                this.elementRef.nativeElement.innerHTML = this.triggerValues
                    .slice(0, visibleValues + 1)
                    .join('; ');
                if (this.elementRef.nativeElement.offsetWidth >= this.getValuesMaxWidth()) {
                    break;
                }
                visibleValues++;
            }
            this._hiddenValues.next(this.triggerValues.length - visibleValues - 1);
        }
        else {
            this.elementRef.nativeElement.innerHTML = this.triggerValues[0];
            this._hiddenValues.next(0);
        }
    }
    getValuesMaxWidth() {
        const wrapperWidth = this.wrapperElement?.offsetWidth || 0;
        const badgeWidth = this.wrapperElement?.getElementsByClassName('rds-form-field__select-hidden-trigger-values-placeholder')[0]?.offsetWidth || 0;
        return Math.max(wrapperWidth - Math.max(badgeWidth, COUNT_BADGE_MIN_WIDTH), 0);
    }
    // provided arrays are sorted
    hasDifferentValues(newValue) {
        return (this._triggerValues.length !== newValue.length ||
            this._triggerValues.some((val, i) => val !== newValue[i]));
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsTriggerValuesComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.3.1", type: RdsTriggerValuesComponent, selector: "[rds-trigger-values]", inputs: { triggerValues: "triggerValues", wrapperElement: "wrapperElement", multiple: "multiple" }, outputs: { hiddenValues: "hiddenValues" }, host: { properties: { "title": "this.triggerValues" } }, exportAs: ["rdsTriggerValues"], usesOnChanges: true, ngImport: i0, template: '', isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsTriggerValuesComponent, decorators: [{
            type: Component,
            args: [{
                    selector: '[rds-trigger-values]',
                    template: '',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    exportAs: 'rdsTriggerValues',
                }]
        }], propDecorators: { hiddenValues: [{
                type: Output
            }], triggerValues: [{
                type: Input
            }, {
                type: HostBinding,
                args: ['title']
            }], wrapperElement: [{
                type: Input
            }], multiple: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJpZ2dlci12YWx1ZXMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9hbmd1bGFyLWNvbXBvbmVudHMvc3JjL2xpYi9mb3JtLWZpZWxkL3NlbGVjdC90cmlnZ2VyLXZhbHVlcy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUVMLHVCQUF1QixFQUN2QixTQUFTLEVBQ1QsVUFBVSxFQUNWLFVBQVUsRUFDVixXQUFXLEVBQ1gsTUFBTSxFQUNOLEtBQUssRUFFTCxNQUFNLEdBRVAsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGVBQWUsRUFBRSxTQUFTLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDbEQsT0FBTyxFQUFFLG9CQUFvQixFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2pFLE9BQU8sRUFBZ0IscUJBQXFCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM1RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQzs7QUFFaEUsTUFBTSxxQkFBcUIsR0FBRyxFQUFFLENBQUM7QUFRakMsTUFBTSxPQUFPLHlCQUF5QjtJQU50QztRQU9tQixlQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2hDLGVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDaEMsa0JBQWEsR0FBRyxJQUFJLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUcvQyxpQkFBWSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUMsQ0FBQztRQWlCaEUsY0FBUyxHQUFHLEtBQUssQ0FBQztRQVdsQixtQkFBYyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7S0FxRWhDO0lBL0ZDLElBRUksYUFBYTtRQUNmLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQztJQUM3QixDQUFD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Q0FBQyxHQUFHLENBQ2IsWUFBWSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLHFCQUFxQixDQUFDLEVBQzFELENBQUMsQ0FDRixDQUFDO0lBQ0osQ0FBQztJQUVELDZCQUE2QjtJQUNyQixrQkFBa0IsQ0FBQyxRQUFrQjtRQUMzQyxPQUFPLENBQ0wsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEtBQUssUUFBUSxDQUFDLE1BQU07WUFDOUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQzFELENBQUM7SUFDSixDQUFDOzhHQXRHVSx5QkFBeUI7a0dBQXpCLHlCQUF5Qix5VEFKMUIsRUFBRTs7MkZBSUQseUJBQXlCO2tCQU5yQyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxzQkFBc0I7b0JBQ2hDLFFBQVEsRUFBRSxFQUFFO29CQUNaLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO29CQUMvQyxRQUFRLEVBQUUsa0JBQWtCO2lCQUM3Qjs4QkFPVSxZQUFZO3NCQURwQixNQUFNO2dCQUtILGFBQWE7c0JBRmhCLEtBQUs7O3NCQUNMLFdBQVc7dUJBQUMsT0FBTztnQkFZWCxjQUFjO3NCQUF0QixLQUFLO2dCQUtGLFFBQVE7c0JBRFgsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFmdGVyVmlld0luaXQsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIERlc3Ryb3lSZWYsXG4gIEVsZW1lbnRSZWYsXG4gIEhvc3RCaW5kaW5nLFxuICBpbmplY3QsXG4gIElucHV0LFxuICBPbkNoYW5nZXMsXG4gIE91dHB1dCxcbiAgU2ltcGxlQ2hhbmdlcyxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIGZyb21FdmVudCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGlzdGluY3RVbnRpbENoYW5nZWQsIHN0YXJ0V2l0aCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEJvb2xlYW5JbnB1dCwgY29lcmNlQm9vbGVhblByb3BlcnR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcbmltcG9ydCB7IHRha2VVbnRpbERlc3Ryb3llZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvcnhqcy1pbnRlcm9wJztcblxuY29uc3QgQ09VTlRfQkFER0VfTUlOX1dJRFRIID0gNDg7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ1tyZHMtdHJpZ2dlci12YWx1ZXNdJyxcbiAgdGVtcGxhdGU6ICcnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgZXhwb3J0QXM6ICdyZHNUcmlnZ2VyVmFsdWVzJyxcbn0pXG5leHBvcnQgY2xhc3MgUmRzVHJpZ2dlclZhbHVlc0NvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcyB7XG4gIHByaXZhdGUgcmVhZG9ubHkgZGVzdHJveVJlZiA9IGluamVjdChEZXN0cm95UmVmKTtcbiAgcHJpdmF0ZSByZWFkb25seSBlbGVtZW50UmVmID0gaW5qZWN0KEVsZW1lbnRSZWYpO1xuICBwcml2YXRlIHJlYWRvbmx5IF9oaWRkZW5WYWx1ZXMgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KDApO1xuXG4gIEBPdXRwdXQoKVxuICByZWFkb25seSBoaWRkZW5WYWx1ZXMgPSB0aGlzLl9oaWRkZW5WYWx1ZXMucGlwZShkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKTtcblxuICBASW5wdXQoKVxuICBASG9zdEJpbmRpbmcoJ3RpdGxlJylcbiAgZ2V0IHRyaWdnZXJWYWx1ZXMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLl90cmlnZ2VyVmFsdWVzO1xuICB9XG5cbiAgc2V0IHRyaWdnZXJWYWx1ZXModmFsOiBzdHJpbmdbXSkge1xuICAgIGlmICh0aGlzLmhhc0RpZmZlcmVudFZhbHVlcyh2YWwpKSB7XG4gICAgICB0aGlzLl90cmlnZ2VyVmFsdWVzID0gdmFsO1xuICAgICAgdGhpcy5jb3VudFZpc2libGVDaGFyYWN0ZXJzKCk7XG4gICAgfVxuICB9XG5cbiAgQElucHV0KCkgd3JhcHBlckVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbDtcblxuICBwcml2YXRlIF9tdWx0aXBsZSA9IGZhbHNlO1xuXG4gIEBJbnB1dCgpXG4gIHNldCBtdWx0aXBsZShtdWx0aXBsZTogQm9vbGVhbklucHV0KSB7XG4gICAgdGhpcy5fbXVsdGlwbGUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkobXVsdGlwbGUpO1xuICB9XG5cbiAgZ2V0IG11bHRpcGxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9tdWx0aXBsZTtcbiAgfVxuXG4gIHByaXZhdGUgX3RyaWdnZXJWYWx1ZXMgPSBbJyAnXTtcblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgaWYgKGNoYW5nZXNbJ3dyYXBwZXJFbGVtZW50J10gfHwgY2hhbmdlc1snbXVsdGlwbGUnXSkge1xuICAgICAgdGhpcy5jb3VudFZpc2libGVDaGFyYWN0ZXJzKCk7XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIGZyb21FdmVudCh3aW5kb3csICdyZXNpemUnKVxuICAgICAgLnBpcGUoc3RhcnRXaXRoKG51bGwpLCB0YWtlVW50aWxEZXN0cm95ZWQodGhpcy5kZXN0cm95UmVmKSlcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jb3VudFZpc2libGVDaGFyYWN0ZXJzKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBjb3VudFZpc2libGVDaGFyYWN0ZXJzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMudHJpZ2dlclZhbHVlcy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgKHRoaXMudHJpZ2dlclZhbHVlcy5sZW5ndGggPT09IDEgJiYgdGhpcy50cmlnZ2VyVmFsdWVzWzBdID09PSAnICcpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuaW5uZXJIVE1MID0gJyAnO1xuICAgICAgICB0aGlzLl9oaWRkZW5WYWx1ZXMubmV4dCgwKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHZpc2libGVWYWx1ZXMgPSAwO1xuXG4gICAgICB3aGlsZSAodmlzaWJsZVZhbHVlcyA8IHRoaXMudHJpZ2dlclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy50cmlnZ2VyVmFsdWVzXG4gICAgICAgICAgLnNsaWNlKDAsIHZpc2libGVWYWx1ZXMgKyAxKVxuICAgICAgICAgIC5qb2luKCc7ICcpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aCA+PSB0aGlzLmdldFZhbHVlc01heFdpZHRoKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB2aXNpYmxlVmFsdWVzKys7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2hpZGRlblZhbHVlcy5uZXh0KHRoaXMudHJpZ2dlclZhbHVlcy5sZW5ndGggLSB2aXNpYmxlVmFsdWVzIC0gMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmlubmVySFRNTCA9IHRoaXMudHJpZ2dlclZhbHVlc1swXTtcbiAgICAgIHRoaXMuX2hpZGRlblZhbHVlcy5uZXh0KDApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0VmFsdWVzTWF4V2lkdGgoKTogbnVtYmVyIHtcbiAgICBjb25zdCB3cmFwcGVyV2lkdGggPSB0aGlzLndyYXBwZXJFbGVtZW50Py5vZmZzZXRXaWR0aCB8fCAwO1xuICAgIGNvbnN0IGJhZGdlV2lkdGggPVxuICAgICAgKFxuICAgICAgICB0aGlzLndyYXBwZXJFbGVtZW50Py5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgICAgICdyZHMtZm9ybS1maWVsZF9fc2VsZWN0LWhpZGRlbi10cmlnZ2VyLXZhbHVlcy1wbGFjZWhvbGRlcicsXG4gICAgICAgIClbMF0gYXMgSFRNTEVsZW1lbnQgfCBudWxsXG4gICAgICApPy5vZmZzZXRXaWR0aCB8fCAwO1xuXG4gICAgcmV0dXJuIE1hdGgubWF4KFxuICAgICAgd3JhcHBlcldpZHRoIC0gTWF0aC5tYXgoYmFkZ2VXaWR0aCwgQ09VTlRfQkFER0VfTUlOX1dJRFRIKSxcbiAgICAgIDAsXG4gICAgKTtcbiAgfVxuXG4gIC8vIHByb3ZpZGVkIGFycmF5cyBhcmUgc29ydGVkXG4gIHByaXZhdGUgaGFzRGlmZmVyZW50VmFsdWVzKG5ld1ZhbHVlOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLl90cmlnZ2VyVmFsdWVzLmxlbmd0aCAhPT0gbmV3VmFsdWUubGVuZ3RoIHx8XG4gICAgICB0aGlzLl90cmlnZ2VyVmFsdWVzLnNvbWUoKHZhbCwgaSkgPT4gdmFsICE9PSBuZXdWYWx1ZVtpXSlcbiAgICApO1xuICB9XG59XG4iXX0=