import { booleanAttribute, ChangeDetectionStrategy, Component, forwardRef, Input, ViewChild, } from '@angular/core';
import { RdsAbstractSearchComponent } from './abstract-search.component';
import { RdsFormFieldComponent } from '../form-field';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import * as i0 from "@angular/core";
import * as i1 from "../form-field/form-field.component";
import * as i2 from "../form-field/input.directive";
import * as i3 from "../form-field/prefix.directive";
import * as i4 from "../form-field/suffix.directive";
import * as i5 from "../icons/icon.component";
import * as i6 from "@angular/forms";
import * as i7 from "../button/button.component";
import * as i8 from "../button/icon-button.component";
export class RdsGlobalSearchComponent extends RdsAbstractSearchComponent {
    constructor() {
        super(...arguments);
        this.includeButton = true;
        this.btnFocused = false;
    }
    get active() {
        return this.formField?.control?.focused || this.btnFocused !== false;
    }
    setBtnFocused(btnName, eventType) {
        if (eventType === 'focus') {
            this.btnFocused = btnName;
        }
        else if (eventType === 'blur' && this.btnFocused === btnName) {
            this.btnFocused = false;
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsGlobalSearchComponent, deps: null, target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.1", type: RdsGlobalSearchComponent, selector: "rds-global-search", inputs: { includeButton: ["includeButton", "includeButton", booleanAttribute] }, providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => RdsGlobalSearchComponent),
                multi: true,
            },
        ], viewQueries: [{ propertyName: "formField", first: true, predicate: RdsFormFieldComponent, descendants: true, static: true }], usesInheritance: true, ngImport: i0, template: "<div\n  class=\"rds-global-search rds-global-search-{{ size }}\"\n  [class.rds-global-search-active]=\"active\"\n  [class.rds-global-search-disabled]=\"disabled\"\n  (click)=\"searchInput.focus()\"\n>\n  <rds-form-field [size]=\"size\" labelPosition=\"none\">\n    <rds-icon\n      class=\"rds-global-search-icon\"\n      namespace=\"filled\"\n      icon=\"search\"\n      rds-control-prefix\n      aria-hidden=\"true\"\n    />\n    <input\n      [disabled]=\"disabled\"\n      [ngModel]=\"value\"\n      (input)=\"onInput($event)\"\n      type=\"search\"\n      #searchInput\n      rdsInput\n      (keydown.enter)=\"emitValue('input-enter-key', $event)\"\n      (search)=\"$event.preventDefault(); $event.stopPropagation()\"\n      [placeholder]=\"placeholder\"\n    />\n    @if (isDirtyValue()) {\n      <button\n        rds-icon-button\n        rds-control-suffix\n        [size]=\"'s'\"\n        [attr.aria-label]=\"ariaClearLabel\"\n        (click)=\"resetInput($event); $event.stopPropagation()\"\n        [disabled]=\"disabled\"\n        (focus)=\"setBtnFocused('reset', 'focus')\"\n        (blur)=\"setBtnFocused('reset', 'blur')\"\n        class=\"rds-global-search-reset-button\"\n      >\n        <rds-icon namespace=\"filled\" icon=\"close\" aria-hidden=\"true\" />\n      </button>\n    }\n  </rds-form-field>\n  @if (includeButton) {\n    <button\n      class=\"rds-global-search-button\"\n      rds-primary-button\n      (focus)=\"setBtnFocused('search', 'focus')\"\n      (blur)=\"setBtnFocused('search', 'blur')\"\n      [disabled]=\"disabled\"\n      [size]=\"size\"\n      (click)=\"emitValue('button', $event); $event.stopPropagation()\"\n    >\n      {{ buttonText }}\n    </button>\n  }\n</div>\n", styles: [":host .rds-global-search{display:flex;border-bottom:1px solid var(--rds-color-stroke-enabled)}:host .rds-global-search:hover:not(.rds-global-search-disabled){border-bottom-color:var(--rds-color-informative)}:host .rds-global-search.rds-global-search-active:not(.rds-global-search-disabled){border-bottom-color:var(--rds-color-informative)}:host .rds-global-search.rds-global-search-l{padding-bottom:11px}:host .rds-global-search.rds-global-search-l ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__control-container{border:none;padding-left:12px!important;padding-right:16px!important;background-color:transparent}:host .rds-global-search.rds-global-search-l ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__content-prefix>*:last-child.rds-form-field__control-prefix{margin-right:12px!important}:host .rds-global-search.rds-global-search-l ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__content-suffix .rds-form-field__control-suffix{margin-left:24px!important}:host .rds-global-search.rds-global-search-m{padding-bottom:7px}:host .rds-global-search.rds-global-search-m ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__control-container{border:none;padding-left:8px!important;padding-right:12px!important;background-color:transparent}:host .rds-global-search.rds-global-search-m ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__content-prefix>*:last-child.rds-form-field__control-prefix{margin-right:12px!important}:host .rds-global-search.rds-global-search-m ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__content-suffix .rds-form-field__control-suffix{margin-left:24px!important}:host .rds-global-search.rds-global-search-s{padding-bottom:7px}:host .rds-global-search.rds-global-search-s ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__control-container{border:none;padding-left:8px!important;padding-right:8px!important;background-color:transparent}:host .rds-global-search.rds-global-search-s ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__content-prefix>*:last-child.rds-form-field__control-prefix{margin-right:!important}:host .rds-global-search.rds-global-search-s ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__content-suffix .rds-form-field__control-suffix{margin-left:16px!important}:host .rds-global-search .rds-global-search-reset-button .rds-icon{width:18px;height:18px}:host .rds-global-search .rds-global-search-icon{color:var(--rds-color-low-contrast)}:host .rds-global-search ::ng-deep .rds-form-field{margin-bottom:0}:host .rds-global-search ::ng-deep .rds-form-field .rds-form-field__control-container{border-color:transparent!important}:host .rds-global-search ::ng-deep .rds-form-field input[type=search]::-webkit-search-decoration,:host .rds-global-search ::ng-deep .rds-form-field input[type=search]::-webkit-search-cancel-button,:host .rds-global-search ::ng-deep .rds-form-field input[type=search]::-webkit-search-results-button,:host .rds-global-search ::ng-deep .rds-form-field input[type=search]::-webkit-search-results-decoration{-webkit-appearance:none}:host .rds-global-search rds-form-field{width:100%}:host .rds-global-search .rds-global-search-button{margin-left:12px}\n"], dependencies: [{ kind: "component", type: i1.RdsFormFieldComponent, selector: "rds-form-field", inputs: ["hideRequiredMarker", "hideTextareaCharacterCounter", "labelPosition", "size", "labelWidth"] }, { kind: "directive", type: i2.RdsInputDirective, selector: " input[rds-input], input[rdsInput], textarea[rds-input], textarea[rdsInput]", inputs: ["id", "disabled", "required", "readonly", "type", "placeholder", "value"] }, { kind: "directive", type: i3.RdsPrefixDirective, selector: "[rds-control-prefix], [rdsControlPrefix]" }, { kind: "directive", type: i4.RdsSuffixDirective, selector: "[rds-control-suffix], [rdsControlSuffix]" }, { kind: "component", type: i5.RdsIconComponent, selector: "rds-icon", inputs: ["namespace", "icon"] }, { kind: "directive", type: i6.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i6.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i6.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "component", type: i7.RdsButtonComponent, selector: "\n    button[rds-primary-button],\n    button[rds-warning-button],\n    button[rds-secondary-button],\n    button[rds-secondary-warning-button],\n    button[rdsPrimaryButton],\n    button[rdsWarningButton],\n    button[rdsSecondaryButton],\n    button[rdsSecondaryWarningButton],\n  " }, { kind: "component", type: i8.RdsIconButtonComponent, selector: "\n    button[rds-icon-button],\n    button[rdsIconButton],\n    button[rds-icon-warning-button],\n    button[rdsIconWarningButton],\n  ", inputs: ["size"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.1", ngImport: i0, type: RdsGlobalSearchComponent, decorators: [{
            type: Component,
            args: [{ selector: 'rds-global-search', changeDetection: ChangeDetectionStrategy.OnPush, providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => RdsGlobalSearchComponent),
                            multi: true,
                        },
                    ], template: "<div\n  class=\"rds-global-search rds-global-search-{{ size }}\"\n  [class.rds-global-search-active]=\"active\"\n  [class.rds-global-search-disabled]=\"disabled\"\n  (click)=\"searchInput.focus()\"\n>\n  <rds-form-field [size]=\"size\" labelPosition=\"none\">\n    <rds-icon\n      class=\"rds-global-search-icon\"\n      namespace=\"filled\"\n      icon=\"search\"\n      rds-control-prefix\n      aria-hidden=\"true\"\n    />\n    <input\n      [disabled]=\"disabled\"\n      [ngModel]=\"value\"\n      (input)=\"onInput($event)\"\n      type=\"search\"\n      #searchInput\n      rdsInput\n      (keydown.enter)=\"emitValue('input-enter-key', $event)\"\n      (search)=\"$event.preventDefault(); $event.stopPropagation()\"\n      [placeholder]=\"placeholder\"\n    />\n    @if (isDirtyValue()) {\n      <button\n        rds-icon-button\n        rds-control-suffix\n        [size]=\"'s'\"\n        [attr.aria-label]=\"ariaClearLabel\"\n        (click)=\"resetInput($event); $event.stopPropagation()\"\n        [disabled]=\"disabled\"\n        (focus)=\"setBtnFocused('reset', 'focus')\"\n        (blur)=\"setBtnFocused('reset', 'blur')\"\n        class=\"rds-global-search-reset-button\"\n      >\n        <rds-icon namespace=\"filled\" icon=\"close\" aria-hidden=\"true\" />\n      </button>\n    }\n  </rds-form-field>\n  @if (includeButton) {\n    <button\n      class=\"rds-global-search-button\"\n      rds-primary-button\n      (focus)=\"setBtnFocused('search', 'focus')\"\n      (blur)=\"setBtnFocused('search', 'blur')\"\n      [disabled]=\"disabled\"\n      [size]=\"size\"\n      (click)=\"emitValue('button', $event); $event.stopPropagation()\"\n    >\n      {{ buttonText }}\n    </button>\n  }\n</div>\n", styles: [":host .rds-global-search{display:flex;border-bottom:1px solid var(--rds-color-stroke-enabled)}:host .rds-global-search:hover:not(.rds-global-search-disabled){border-bottom-color:var(--rds-color-informative)}:host .rds-global-search.rds-global-search-active:not(.rds-global-search-disabled){border-bottom-color:var(--rds-color-informative)}:host .rds-global-search.rds-global-search-l{padding-bottom:11px}:host .rds-global-search.rds-global-search-l ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__control-container{border:none;padding-left:12px!important;padding-right:16px!important;background-color:transparent}:host .rds-global-search.rds-global-search-l ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__content-prefix>*:last-child.rds-form-field__control-prefix{margin-right:12px!important}:host .rds-global-search.rds-global-search-l ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__content-suffix .rds-form-field__control-suffix{margin-left:24px!important}:host .rds-global-search.rds-global-search-m{padding-bottom:7px}:host .rds-global-search.rds-global-search-m ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__control-container{border:none;padding-left:8px!important;padding-right:12px!important;background-color:transparent}:host .rds-global-search.rds-global-search-m ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__content-prefix>*:last-child.rds-form-field__control-prefix{margin-right:12px!important}:host .rds-global-search.rds-global-search-m ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__content-suffix .rds-form-field__control-suffix{margin-left:24px!important}:host .rds-global-search.rds-global-search-s{padding-bottom:7px}:host .rds-global-search.rds-global-search-s ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__control-container{border:none;padding-left:8px!important;padding-right:8px!important;background-color:transparent}:host .rds-global-search.rds-global-search-s ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__content-prefix>*:last-child.rds-form-field__control-prefix{margin-right:!important}:host .rds-global-search.rds-global-search-s ::ng-deep .rds-form-field .rds-form-field__container .rds-form-field__content-suffix .rds-form-field__control-suffix{margin-left:16px!important}:host .rds-global-search .rds-global-search-reset-button .rds-icon{width:18px;height:18px}:host .rds-global-search .rds-global-search-icon{color:var(--rds-color-low-contrast)}:host .rds-global-search ::ng-deep .rds-form-field{margin-bottom:0}:host .rds-global-search ::ng-deep .rds-form-field .rds-form-field__control-container{border-color:transparent!important}:host .rds-global-search ::ng-deep .rds-form-field input[type=search]::-webkit-search-decoration,:host .rds-global-search ::ng-deep .rds-form-field input[type=search]::-webkit-search-cancel-button,:host .rds-global-search ::ng-deep .rds-form-field input[type=search]::-webkit-search-results-button,:host .rds-global-search ::ng-deep .rds-form-field input[type=search]::-webkit-search-results-decoration{-webkit-appearance:none}:host .rds-global-search rds-form-field{width:100%}:host .rds-global-search .rds-global-search-button{margin-left:12px}\n"] }]
        }], propDecorators: { formField: [{
                type: ViewChild,
                args: [RdsFormFieldComponent, { static: true }]
            }], includeButton: [{
                type: Input,
                args: [{ transform: booleanAttribute }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xvYmFsLXNlYXJjaC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL2FuZ3VsYXItY29tcG9uZW50cy9zcmMvbGliL3NlYXJjaC9nbG9iYWwtc2VhcmNoLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvYW5ndWxhci1jb21wb25lbnRzL3NyYy9saWIvc2VhcmNoL2dsb2JhbC1zZWFyY2guY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLGdCQUFnQixFQUNoQix1QkFBdUIsRUFDdkIsU0FBUyxFQUNULFVBQVUsRUFDVixLQUFLLEVBQ0wsU0FBUyxHQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN0RCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7Ozs7OztBQWVuRCxNQUFNLE9BQU8sd0JBQXlCLFNBQVEsMEJBQTBCO0lBYnhFOztRQWlCbUQsa0JBQWEsR0FBRyxJQUFJLENBQUM7UUFFOUQsZUFBVSxHQUErQixLQUFLLENBQUM7S0FnQnhEO0lBZEMsSUFBSSxNQUFNO1FBQ1IsT0FBTyxJQUFJLENBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxPQUFPLElBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxLQUFLLENBQUM7SUFDdkUsQ0FBQztJQUVELGFBQWEsQ0FDWCxPQUEyQixFQUMzQixTQUEyQjtRQUUzQixJQUFJLFNBQVMsS0FBSyxPQUFPLEVBQUUsQ0FBQztZQUMxQixJQUFJLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQztRQUM1QixDQUFDO2FBQU0sSUFBSSxTQUFTLEtBQUssTUFBTSxJQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssT0FBTyxFQUFFLENBQUM7WUFDL0QsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDMUIsQ0FBQztJQUNILENBQUM7OEdBckJVLHdCQUF3QjtrR0FBeEIsd0JBQXdCLDZGQUlmLGdCQUFnQixnQkFaekI7WUFDVDtnQkFDRSxPQUFPLEVBQUUsaUJBQWlCO2dCQUMxQixXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLHdCQUF3QixDQUFDO2dCQUN2RCxLQUFLLEVBQUUsSUFBSTthQUNaO1NBQ0YscUVBR1UscUJBQXFCLHFGQzFCbEMsd3JEQXVEQTs7MkZEOUJhLHdCQUF3QjtrQkFicEMsU0FBUzsrQkFDRSxtQkFBbUIsbUJBR1osdUJBQXVCLENBQUMsTUFBTSxhQUNwQzt3QkFDVDs0QkFDRSxPQUFPLEVBQUUsaUJBQWlCOzRCQUMxQixXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSx5QkFBeUIsQ0FBQzs0QkFDdkQsS0FBSyxFQUFFLElBQUk7eUJBQ1o7cUJBQ0Y7OEJBSUQsU0FBUztzQkFEUixTQUFTO3VCQUFDLHFCQUFxQixFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtnQkFHRCxhQUFhO3NCQUE3RCxLQUFLO3VCQUFDLEVBQUUsU0FBUyxFQUFFLGdCQUFnQixFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgYm9vbGVhbkF0dHJpYnV0ZSxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbXBvbmVudCxcbiAgZm9yd2FyZFJlZixcbiAgSW5wdXQsXG4gIFZpZXdDaGlsZCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSZHNBYnN0cmFjdFNlYXJjaENvbXBvbmVudCB9IGZyb20gJy4vYWJzdHJhY3Qtc2VhcmNoLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZHNGb3JtRmllbGRDb21wb25lbnQgfSBmcm9tICcuLi9mb3JtLWZpZWxkJztcbmltcG9ydCB7IE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdyZHMtZ2xvYmFsLXNlYXJjaCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9nbG9iYWwtc2VhcmNoLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vZ2xvYmFsLXNlYXJjaC5jb21wb25lbnQuc2NzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBSZHNHbG9iYWxTZWFyY2hDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWUsXG4gICAgfSxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgUmRzR2xvYmFsU2VhcmNoQ29tcG9uZW50IGV4dGVuZHMgUmRzQWJzdHJhY3RTZWFyY2hDb21wb25lbnQge1xuICBAVmlld0NoaWxkKFJkc0Zvcm1GaWVsZENvbXBvbmVudCwgeyBzdGF0aWM6IHRydWUgfSlcbiAgZm9ybUZpZWxkOiBSZHNGb3JtRmllbGRDb21wb25lbnQ8c3RyaW5nPjtcblxuICBASW5wdXQoeyB0cmFuc2Zvcm06IGJvb2xlYW5BdHRyaWJ1dGUgfSkgb3ZlcnJpZGUgaW5jbHVkZUJ1dHRvbiA9IHRydWU7XG5cbiAgcHJpdmF0ZSBidG5Gb2N1c2VkOiBmYWxzZSB8ICdyZXNldCcgfCAnc2VhcmNoJyA9IGZhbHNlO1xuXG4gIGdldCBhY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybUZpZWxkPy5jb250cm9sPy5mb2N1c2VkIHx8IHRoaXMuYnRuRm9jdXNlZCAhPT0gZmFsc2U7XG4gIH1cblxuICBzZXRCdG5Gb2N1c2VkKFxuICAgIGJ0bk5hbWU6ICdyZXNldCcgfCAnc2VhcmNoJyxcbiAgICBldmVudFR5cGU6ICdmb2N1cycgfCAnYmx1cicsXG4gICk6IHZvaWQge1xuICAgIGlmIChldmVudFR5cGUgPT09ICdmb2N1cycpIHtcbiAgICAgIHRoaXMuYnRuRm9jdXNlZCA9IGJ0bk5hbWU7XG4gICAgfSBlbHNlIGlmIChldmVudFR5cGUgPT09ICdibHVyJyAmJiB0aGlzLmJ0bkZvY3VzZWQgPT09IGJ0bk5hbWUpIHtcbiAgICAgIHRoaXMuYnRuRm9jdXNlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxufVxuIiwiPGRpdlxuICBjbGFzcz1cInJkcy1nbG9iYWwtc2VhcmNoIHJkcy1nbG9iYWwtc2VhcmNoLXt7IHNpemUgfX1cIlxuICBbY2xhc3MucmRzLWdsb2JhbC1zZWFyY2gtYWN0aXZlXT1cImFjdGl2ZVwiXG4gIFtjbGFzcy5yZHMtZ2xvYmFsLXNlYXJjaC1kaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gIChjbGljayk9XCJzZWFyY2hJbnB1dC5mb2N1cygpXCJcbj5cbiAgPHJkcy1mb3JtLWZpZWxkIFtzaXplXT1cInNpemVcIiBsYWJlbFBvc2l0aW9uPVwibm9uZVwiPlxuICAgIDxyZHMtaWNvblxuICAgICAgY2xhc3M9XCJyZHMtZ2xvYmFsLXNlYXJjaC1pY29uXCJcbiAgICAgIG5hbWVzcGFjZT1cImZpbGxlZFwiXG4gICAgICBpY29uPVwic2VhcmNoXCJcbiAgICAgIHJkcy1jb250cm9sLXByZWZpeFxuICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcbiAgICAvPlxuICAgIDxpbnB1dFxuICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgIFtuZ01vZGVsXT1cInZhbHVlXCJcbiAgICAgIChpbnB1dCk9XCJvbklucHV0KCRldmVudClcIlxuICAgICAgdHlwZT1cInNlYXJjaFwiXG4gICAgICAjc2VhcmNoSW5wdXRcbiAgICAgIHJkc0lucHV0XG4gICAgICAoa2V5ZG93bi5lbnRlcik9XCJlbWl0VmFsdWUoJ2lucHV0LWVudGVyLWtleScsICRldmVudClcIlxuICAgICAgKHNlYXJjaCk9XCIkZXZlbnQucHJldmVudERlZmF1bHQoKTsgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXCJcbiAgICAgIFtwbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXG4gICAgLz5cbiAgICBAaWYgKGlzRGlydHlWYWx1ZSgpKSB7XG4gICAgICA8YnV0dG9uXG4gICAgICAgIHJkcy1pY29uLWJ1dHRvblxuICAgICAgICByZHMtY29udHJvbC1zdWZmaXhcbiAgICAgICAgW3NpemVdPVwiJ3MnXCJcbiAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJhcmlhQ2xlYXJMYWJlbFwiXG4gICAgICAgIChjbGljayk9XCJyZXNldElucHV0KCRldmVudCk7ICRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiXG4gICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgIChmb2N1cyk9XCJzZXRCdG5Gb2N1c2VkKCdyZXNldCcsICdmb2N1cycpXCJcbiAgICAgICAgKGJsdXIpPVwic2V0QnRuRm9jdXNlZCgncmVzZXQnLCAnYmx1cicpXCJcbiAgICAgICAgY2xhc3M9XCJyZHMtZ2xvYmFsLXNlYXJjaC1yZXNldC1idXR0b25cIlxuICAgICAgPlxuICAgICAgICA8cmRzLWljb24gbmFtZXNwYWNlPVwiZmlsbGVkXCIgaWNvbj1cImNsb3NlXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgIDwvYnV0dG9uPlxuICAgIH1cbiAgPC9yZHMtZm9ybS1maWVsZD5cbiAgQGlmIChpbmNsdWRlQnV0dG9uKSB7XG4gICAgPGJ1dHRvblxuICAgICAgY2xhc3M9XCJyZHMtZ2xvYmFsLXNlYXJjaC1idXR0b25cIlxuICAgICAgcmRzLXByaW1hcnktYnV0dG9uXG4gICAgICAoZm9jdXMpPVwic2V0QnRuRm9jdXNlZCgnc2VhcmNoJywgJ2ZvY3VzJylcIlxuICAgICAgKGJsdXIpPVwic2V0QnRuRm9jdXNlZCgnc2VhcmNoJywgJ2JsdXInKVwiXG4gICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgW3NpemVdPVwic2l6ZVwiXG4gICAgICAoY2xpY2spPVwiZW1pdFZhbHVlKCdidXR0b24nLCAkZXZlbnQpOyAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIlxuICAgID5cbiAgICAgIHt7IGJ1dHRvblRleHQgfX1cbiAgICA8L2J1dHRvbj5cbiAgfVxuPC9kaXY+XG4iXX0=