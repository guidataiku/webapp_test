@use 'sass:map';
@use 'sass:list';
@use './utils';

@function get-typography-ordered-by-breakpoint(
  $name,
  $typography,
  $breakpoints
) {
  $list: ();
  @each $font, $typo in $typography {
    @if (map.get($typo, 'name') == $name) {
      $list: list.append($list, $font);
    }
  }
  $sortedList: ();

  @while list.length($list) > 0 {
    $value: list.nth($list, 1);
    @each $item in $list {
      $valueBrList: map.get(map.get($typography, $value), 'breakpoint');
      $itemBrList: map.get(map.get($typography, $item), 'breakpoint');

      @if utils.get-minimal-index($breakpoints, $itemBrList) <
        utils.get-minimal-index($breakpoints, $valueBrList)
      {
        $value: $item;
      }
    }

    $sortedList: list.append($sortedList, $value);
    $list: utils.list-remove($list, $value);
  }

  @return $sortedList;
}

@function order-breakpoint-list($breakpoints, $breakpointList) {
  $sortedList: ();

  @while list.length($breakpointList) > 0 {
    $value: list.nth($breakpointList, 1);

    @each $item in $breakpointList {
      @if utils.get-minimal-index($breakpoints, ($item)) <
        utils.get-minimal-index($breakpoints, ($value))
      {
        $value: $item;
      }
    }

    $sortedList: list.append($sortedList, $value);
    $breakpointList: utils.list-remove($breakpointList, $value);
  }

  @return $sortedList;
}
